<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" IQ Roku library API Documentation Classes IQ Tutorials Getting Started Classes Classes IQ × Search results Close "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Tutorials","body":" IQ Roku library API Documentation Classes IQ Tutorials Getting Started Tutorials Classes IQ × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" IQ Roku library API Documentation Classes IQ Tutorials Getting Started Ooyala IQ SDK for RokuThis library allows you to report video events (content started, content paused, and so on) and certain user metrics (platform, OS, and so on) from your Roku channels to Ooyala IQ. It provides a very simple and easy to use API through the IQ object. Roku requirementsThe minimum Roku OS version compatible with this library is v7. Getting startedSee the Getting Started tutorial for information about how to use the library. Sample appA sample app is available here. It demonstrates the Roku IQ library integrated with both a roVideoScreen and a roVideoPlayer. ChangelogVersion 1.0.1 - May 10, 2016 Added the player info reporting to the backend Version 1.0.0 - March 10, 2016 First version of the Roku IQ library. × Search results Close "},"IQ.html":{"id":"IQ.html","title":"Class: IQ","body":" IQ Roku library API Documentation Classes IQ Tutorials Getting Started Class: IQ IQ new IQ() IQ class.It provides the API to report events for Ooyala IQ backend Methods handleEvent(message) HandleEvent should be called every time an event arises on the roVideoScreen/ roVideoPlayer message port (usually as a part of the main event loop). The IQ SDK will then process and report the appropriate events to the IQ backend. Parameters: Name Type Description message Roku event obtained in the main loop with msg = wait(1000, messagePort) init(pcode) Init the IQ library, starts the session Parameters: Name Type Description pcode The API key found in Ooyala Backlot, which identifies your account to Ooyala reportCustomEvent(name, metadata) Report a custom event. Parameters: Name Type Description name String Event name metadata Event metadata Example m.iq.reportCustomEvent(&quot;myEvent&quot;, {val1 : 42, myString : &quot;my custom string&quot;}) reportEventLoopExit() This method should be called when the content event loop is exited (content end, user action, and so on). reportPlayRequested(isAutoPlay) This method should be called when the user has requested the video to start playing. Parameters: Name Type Description isAutoPlay Boolean Boolean indicating whether the video was automatically played or started by the user reportReplay() This method should be called when a user replays a video. setContentMetadata(metadata) Sets the metadata from a video about to be played. Parameters: Name Type Description metadata IQ.ContentMetadata metadata object setGeoInfo(geoInfo) Sets the geo info to be reported to the IQ backend (optional) Parameters: Name Type Description geoInfo IQ.GeoInfo geo info setUserInfo(userInfo) Sets the user info to be reported to the IQ backend (optional) Parameters: Name Type Description userInfo IQ.UserInfo user info Type Definitions AgeGroup Type: Object Properties: Name Type Description min number user age group minimum age max number user age group maximum age ContentMetadata Type: Object Properties: Name Type Description duration number Duration of the content in seconds assetId String Video's embed code assetType String asset type : &quot;ooyala&quot; or &quot;external&quot; GeoInfo Type: Object Properties: Name Type Description countryCode String ISO 2-alpha code of the country of the user region String Region of the user state String State of the user city String City of the user latitude Number Latitude of the user longitude Number Longitude of the user geoVendor String Name of the vendor which provided these details. If available. UserInfo Type: Object Properties: Name Type Description emailHashMD5 String MD5 hash of the user email userId String User Id gender String User gender (&quot;M&quot; or &quot;F&quot;) ageGroup IQ.AgeGroup user age group × Search results Close "},"tutorial-getting_started.html":{"id":"tutorial-getting_started.html","title":"Tutorial: Getting Started","body":" IQ Roku library API Documentation Classes IQ Tutorials Getting Started Getting Started This tutorial shows you how to include and work with the IQ library in your Roku channel. Getting the libraryTo get the library, go here. Integrating the library in your projectIntegrating the library in your project is as simple as copying IQ.brs to your source folder, like any other source file in your Roku channel. If you see issues when deploying your channel to a Roku device, make sure you have added the file in your zip build script/Makefile. Adding IQ to your channelUsing the library in a Roku channel is simple. Instantiate the IQ object in your init code. Sub Main() m.iq = new IQ()This step marks the start of the session, and does not report anything back to IQ. Init your IQ session using your pcode when you load your video player. The pcode can be found in your Ooyala Backlot account. For more information, refer to Your API Credentials. Sub loadVideoPlayer() screen.show() pcode : &quot;YOUR_BACKLOT_PCODE&quot; m.iq.init(pcode) Give IQ the metadata about the video you are about to play. m.iq.setContentMetadata({duration : 60, assetId : &quot;AdDgFFGgEergergwrrehEj&quot; , assetType: &quot;external&quot;} })This code is typically called when you have retrieved information about the content from a server, and before the video starts. The duration should be in seconds. Set the notification period of your video player to one second. This is very important, because IQ needs the highest possible precision on time updates. video = CreateObject(&quot;roVideoScreen&quot;) video.SetPositionNotificationPeriod(1) When the user requests the content start, call reportPlayRequested. It takes one parameter isAutoplay. Set isAutoplay to true if the content was automatically played without user input. video.show() m.iq.reportPlayRequested(false) In the main event loop, forward all messages on the video message port to the library. video.show() m.iq.reportPlayRequested(false) while true msg = wait(1000, video.GetMessagePort()) m.iq.handleEvent(msg) doStuffWithTheEvents() end while When the event loop is exited, call reportEventLoopExit. This allows the library to make sure that all the events were sent to the server. while true msg = wait(1000, video.GetMessagePort()) m.iq.handleEvent(msg) doStuffWithTheEvents() end while m.iq.reportEventLoopExit() Replays can be reported with reportReplay(). Custom events can also be reported with reportCustomEvent(name, metadata). m.iq.trackCustomEvent(&quot;myCustomEvent&quot;, {myCustomValue : 42, myCustomParameter : &quot;Brightscript is awesome!&quot;}) DebuggingThe library possesses an attribute private_debugEnabled that can be set to true in order to get useful information about the tracked events in the console and to help troubleshoot problems. × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/support-feedback.js"></script><script src="https://support.brightcove.com/site-assets/js/site/feedback.js"></script>
</body>
</html>
