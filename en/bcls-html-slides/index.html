<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=1024, user-scalable=no">

  <title>Analytics API v0&gt;v1 Migration</title>

  <!-- Required stylesheet -->
  <link rel="stylesheet" media="screen" href="core/deck.core.css">

  <!-- Extension CSS files go here. Remove or add as needed. -->
  <link rel="stylesheet" media="screen" href="extensions/goto/deck.goto.css">
  <link rel="stylesheet" media="screen" href="extensions/menu/deck.menu.css">
  <link rel="stylesheet" media="screen" href="extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" media="screen" href="extensions/status/deck.status.css">
  <link rel="stylesheet" media="screen" href="extensions/scale/deck.scale.css">

  <!-- Style theme. More available in /themes/style/ or create your own. -->
  <link rel="stylesheet" media="screen" href="themes/style/bcls-slides.css">

  <!-- Transition theme. More available in /themes/transition/ or create your own. -->
  <link rel="stylesheet" media="screen" href="themes/transition/horizontal-slide.css">

  <!-- Basic black and white print styles -->
  <link rel="stylesheet" media="print" href="core/print.css">

  <!-- Required Modernizr file -->
  <script src="modernizr.custom.js"></script>
</head>
<body>
  <div class="deck-container">

    <!-- Begin slides. Just make elements with a class of slide. -->

            <div id="top" class="section slide">
                <h1>Analytics API Migration: v0 to v1</h1>
                <p>This topic provides information for developers who are migrating apps and integrations from the v0 (Limited Availabilty) version of the Analytics API to version v1.</p>
            </div>
            <div class="section slide" id="enhancements">
                <h2>New features</h2>
                <p>If you are currently using the Limited Availabilty version of the Analytics API, there are many reasons to upgrade your apps to the v1 version. Here are some of the enhancements offered in the v1 version:</p>
                <ul>
                    <li>Generate reports on multiple accounts: you can now generate reports on more than one account using the <code>accounts</code> parameter - <a href="#accounts">see more...</a></li>
                    <li>Filter videos by video properties: you can now select the videos you want to report on using video properties such as tags, custom fields, and reference ids - <a href="#videoProperties">see more...</a></li>
                    <li>Engagement endpoints: there are new engagement endpoints that allow you to get detailed engagement data for recent views - <a href="engagementEndpoints">see more...</a></li>
                </ul>
            </div>
            <div id="generalChanges" class="section slide">
                <h2>General changes</h2>
            </div>
                <dl class="slide">
                    <dt id="baseURL">Base URL</dt>
                    <dd>The base URL for the API has changed:
                    <p>Old URL:</p>
<pre><code>https://data.brightcove.com/analytics-api/videocloud</code></pre>
                    <p><strong>New URL:</strong></p>
<pre><code><strong>https://analytics.api.brightcove.com/v1</strong></code></pre>
                    </dd>
                </dl>
                <dl class="slide">
                    <dt id="authentication">Authentication</dt>
                    <dd>Authentication via the v0 (Limited Availabilty) is no longer supported. You must get access tokens for the Analytics API via the <a href="//docs.brightcove.com/en/video-cloud/oauth-api/getting-started/oauth-api-overview.html">Brightcove OAuth Service</a>. See <a href="../guides/managing-api-credentials.html">Managing API Credentials</a> for information on obtaining client credentials for the Analytics API.
                    <p>In order to use the <a href="#videoProperties">video property filters</a>, your client credentials need to have permisssions for both:</p>
                    <ul>
                        <li>video-cloud/analytics/read</li>
                        <li>video-cloud/video/read</li>
                    </ul>
                    <p class="BCL-aside">Note: you can also use the OAuth service to authenticate calls to the v0 API. You may want to test this with working apps before migrating to v1, to make sure you have the authentication implemented correctly.</p></dd>
                </dl>
                <dl class="slide">
                    <dt id="rollups">Rollups</dt>
                    <dd>Account rollup calls are no longer supported. If you were using rollups to get detailed engagement information on recent video views, you will now be able to obtain these through the new <a href="#engagementEndpoints">engagement endpoints</a>.</dd>
                </dl>
            <div class="section slide" id="reportChanges">
                <h2>Report Changes</h2>
                <dl>
                    <dt id="reports">Reports</dt>
                    <dd>Reports are now accessed through the <code>data</code> resource rather than <code>report</code>:
                    <p>Old report endpoint</p>
<pre><code>https://data.brightcove.com/analytics-api/videocloud/accounts/{accountId}/report</code></pre>
                    <p><strong>New report endpoint</strong></p>
<pre><code><strong>https://analytics.api.brightcove.com/v1/data</strong></code></pre>
                    </dd>
                    <dt id="accounts">Accounts</dt>
                    <dd>For <a href="#reports">reports</a>, <code>accounts</code> is now a <strong>parameter</strong> rather than a <strong>resource</strong> in the URL path - this allows generation of reports on multiple accounts:
                    <p>Old way:</p>
<pre><code>.../accounts/{accountId}/report...</code></pre>
                    <p><strong>New way:</strong></p>
<pre><code><strong>.../data?accounts={account_id1},{account_id2}...</strong></code></pre>
                    <p class="BCL-aside">Note: the new <a href="#engagementEndpoints">engagement endpoints</a> and the <a href="../guides/video-information-endpoint.html">video information endpoint</a> still have <code>/accounts/{account_id}/ in the URL path, and accept requests for a single account only.</code></p>
                    </dd>
                    <dt id="date"><code>day</code> becomes <code>date</code> dimension</dt>
                    <dd>The <code>day</code> dimension for reports is replaced by the <strong><code>date</code></strong> dimension. The <code>date</code> dimension works in the same way and returns the same data as the old <code>day</code> dimension. See the <a href="../guides/date.html">guide to the <code>date</code> dimension</a> for more information.</dd>
                    <dt id="date_hour"><code>date_hour</code> dimension</dt>
                    <dd>The <code>date_hour</code> dimension is used like the <code><span id="#date">date</span></code> dimension, but allows you to get hourly data for periods within the previous 32 days. If the range for the <code>date_hour</code> requests extends outside the previous 32 days, an error will be returned. To specify hours of the day for request, set the <code>from</code> and <code>to</code> parameters to millisecond value of epoch time rather than using MM-DD-YYYY dates. For example:
<pre><code id="date_hour_example"></code></pre>
                    <p>See the <a href="../guides/date_hour.html">guide to the <code>date_hour</code> dimension</a> for more information.</p>
                    </dd>
                    <dt id="reportFields">Top-level fields for reports</dt>
                    <dd>Reports will always have these three top-level fields (only):
                    <ul>
                        <li><code>summary</code></li>
                        <li><code>item_count</code></li>
                        <li><code>items</code></li>
                    </ul>
                    </dd>
                    <dt id="multipleDimensions">Fields for reports on multiple dimensions</dt>
                    <dd>Fields returned for reports on multiple dimensions will be a union of the fields for each dimension included in the request. See the <a href="./api-overview.html#reportDimensions">Analytics API Overview</a> for information on what dimensions can be combined in reports.</dd>
                    <dt id="fieldValidation">Strict validation on <code>fields</code> and <code>sort</code> parameters</dt>
                    <dd>The <code>fields</code> and <code>sort</code> parameters are strictly validated. If you include a field that is not supported for the call you are making, an error will be returned.</dd>
                    <dt id="fieldsAll"><code>fields=all</code></dt>
                    <dd><code>fields=all</code> is no longer supported. The fields you want to return for items must be specified. See <a href="./api-overview.html#dimensions">Dimensions</a> for the fields supported for each dimension.</dd>
                    <dt id="refID"><code>video.reference_id</code> and <code>video.tags</code></dt>
                    <dd>If you include <code>video.reference_id</code> and/or <code>video.tags</code> in <code>fields</code> for reports on the <code>video</code> dimension, they will be returned in the response (or <code>null</code> if there is no reference id, an emtpy array if there are no tags). Reference id and tags data is cached for 24 hours, and so will not reflect changes made in the past 24 hours.</dd>

                    <dt id="videoProperties">Filtering by video properties</dt>
                    <dd>
                        <p>The <code>where</code> filter syntax for video properties is as follows: <code>where=video.q=={property}:{value}</code>. For example:</p>
                        <p><strong>Filter by tags</strong></p>
<pre><code>where=video.q==tags:foo,bar</code></pre>
                        <p><strong>Filter by reference ids</strong></p>
<pre><code>where=video.q==reference_id:refid1,refid2</code></pre>
                    <p class="BCL-note">Remember that this data is cached for 24 hours, so will not reflect changes made in the past day.</p>
                    </dd>
                </dl>
            </div>
            <div class="section slide" id="engagementEndpoints">
                <h2>Engagement endpoints</h2>
                <dl>
                    <dt>Engagement endpoints</dt>
                    <dd>Three new engagement endpoints allow you to get granular engagement information for each 100th part of videos:
                    <p>Account averages</p>
<pre><code>.../engagement/accounts/{account_id}</code></pre>
                    <p>Averages for a player</p>
<pre><code>.../engagement/accounts/{account_id}/players/{player_id}</code></pre>
                    <p>Engagement for a video</p>
<pre><code>.../engagement/accounts/{account_id}/videos/{video_id}</code></pre>
                    <p>The only parameters supported for engagement endpoints are <code>from</code> and <code>to</code>.</p>
                    <p>Only periods within the previous 32 days are supported for engagement endpoints.</p>
                    </dd>
                </dl>
            </div>

    <!-- End slides. -->

    <!-- Begin extension snippets. Add or remove as needed. -->

    <!-- deck.navigation snippet -->
    <div aria-role="navigation">
      <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
      <a href="#" class="deck-next-link" title="Next">&#8594;</a>
    </div>

    <!-- deck.status snippet -->
    <p class="deck-status" aria-role="status">
      <span class="deck-status-current"></span>
      /
      <span class="deck-status-total"></span>
    </p>

    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
      <label for="goto-slide">Go to slide:</label>
      <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
      <datalist id="goto-datalist"></datalist>
      <input type="submit" value="Go">
    </form>

    <!-- End extension snippets. -->
  </div>

<!-- Required JS files. -->
<script src="jquery.min.js"></script>
<script src="core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
  $(function() {
    $.deck('.slide');
  });
</script>
</body>
</html>
