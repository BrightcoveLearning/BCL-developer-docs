<!DOCTYPE html>
<html lang="en">

<head>
    
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Dynamically Change Source Videos</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/normalize.css" />
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/atelier-forest.light.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/vendor/modernizr.js"></script>
  <style id="pageStyles">
    .video-js {
      width: 640px;
      height: 360px;
    }
  </style>
  </head>

<body>
    <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
      <div id="top" class="section">
        <h1>Dynamically Change Source Videos</h1>
        <p class="video-cloud-only">It is a common use-case to dynamically change the video loaded in the player. This topic shows you how to do this using both the embed_in_page and the embed_code (iframe) implementations. When you select a button on the HTML page, the source video will change. Click the button below the player to see the video change.</p>
        <p class="perform-only">It is a common use-case to dynamically change the video loaded in the player. This topic shows you how to do this using both the embed_in_page and the embed_code (iframe) implementations. Click the button below the player to see the video change.</p>
      </div>
        <video id="myPlayerID" 
          data-account="1752604059001" 
          data-player="b51d022a-e462-4796-a084-07f44367a6e9" 
          data-embed="default" 
          data-video-id="4093643993001" 
          class="video-js" controls autoplay></video>
        <br/>
        <button onclick="changeVideo()">change video</button>
      <div id="createplayer" class="section">
        <h2>Create a player</h2>
      <p class="video-cloud-only">You can use Studio to create a player or refer to the <a href="/en/video-cloud/player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a> guide to create a player using the API directly.</p>
      <p  class="perform-only">You can use Studio to create a player or refer to the <a href="/en/perform/player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a> guide to create a player using the API directly.</p>
        <p>Whether you use Studio or the API directly you will you will get options for the embed_in_page or iframe implementations. Below you see the server response from using the API directly.</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="1-7"></code></p>
        <p>You will use the embed_in_page and the embed_code (iframe) implementations in the next steps.</p>
      </div> 
      <div id="embedinpage" class="section perform-only">
        <h2>Use embed_in_page</h2>
		  <p>First, you will use the embed_in_page implementation to reference the player and change the source video using another URL for a new video. You will use the player's <code>src()</code> method to load the new video.</p>
        <h3><a name="HTMLCode"></a>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 123-129: Defines the player and the button to click to load another video.</li>
          </ul> 
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="123-130"></code></p>

        <h3><a name="JSCode"></a>The JavaScript code</h3>
        <p>This code gets a reference to the player and changes the video content.</p>
        <ul>
          <li>Lines 135-136: Creates two variables.</li>
          <li>Lines 138-140: Gets a reference to the player when it is ready.</li>
          <li>Lines 142-145: Function called on button click that uses the <code>src()</code> method to load the new video into the player and starts the video.</li>
        </ul>
		    <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="134-146"></code></p>
        <p class="BCL-aside">Note: If the player was created with no video content initially assigned you must use an object with <code>type</code> and <code>src</code> properties for the argument of the <code>src()</code> method, as shown here. If initially a video source is assigned, you can use just the URL string for the argument.</p>
        <h3><a name="CSSCode"></a>The stylesheet</h3>
          <p>This example uses CSS styles for Brightcove player.</p>
        <ul>
          <li>Lines 115-117: Set the dimensions of the player.</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="114-119"></code></p>
        
        <h3><a name="completecode"></a>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-line="108-149"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. You will see the appropriate video loaded into the player.</p>
	  </div>
      <div id="embedinpage" class="section video-cloud-only">
        <h2>Use embed_in_page</h2>
      <p>First, you will use the embed_in_page implementation to reference the player and change the source video using the id from another video in your Video Cloud library. The general approach to this functionality is:</p>
        <ul>
          <li>Use the <code>catalog</code>'s <code>getvideo()</code> method to retrieve a new video.</li>
          <li>Use the <code>catalog</code>'s <code>load()</code> method to play the new video.</li>
        </ul>
     
        <h3><a name="HTMLCode"></a>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 28-33: Define the player along with the initial video content.</li>
            <li>Line 36: Defines the button which when selected will update the video content.</li>
          </ul> 
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="27-37"></code></p>

        <h3><a name="JSCode"></a>The JavaScript code</h3>
        <p>This code gets a reference to the player and changes the video content.</p>
        <ul>
          <li>Line 42: Instantiates the player on the page.</li>
          <li>Lines 52-54: Get a reference to the player when it is ready.</li>
          <li>Line 45: Returns the video object from your Video Cloud library for the specified video id.</li>
          <li>Line 47-48: Loads and plays the new video.</li>
        </ul>
    <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="40-56"></code></p>
        
        <h3><a name="CSSCode"></a>The stylesheet</h3>
          <p>This example uses CSS styles for the display fields and the Brightcove player.</p>
        <ul>
          <li>Lines 20-21: Set the dimensions of the player.</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="18-23"></code></p>
        
        <h3><a name="completecode"></a>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-line="10-58"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. When you select the <strong>change video</strong> button you should see the new video in the player.</p>
    </div>

    <div id="iframe" class="section perform-only">
        <h2>Use iframe</h2>
      <p>It is a best practice to use the iframe player implementation if you can. The recommended approach to changing the video source is to is to create a plugin that basically performs the JavaScript shown in the previous section. The process is complicated a bit since the JavaScript must be in a plugin to work in the iframe, as well the new video's URL must be passed into the iframe. To pass data into the iframe you must use HTML's <code>postMessage()</code> method. This is explained at length in the <a href="//docs.brightcove.com/en/perform/brightcove-player/samples/listen-for-play-button.html">Brightcove Player Sample: Play Video from iframe Parent</a> document.</p>
     
        <h3><a name="HTMLCode"></a>The HTML code</h3>
            <p>The additions to the standard HTML page are the iframe tag for the player and a button.</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="177-180"></code></p>
        <h3>The JavaScript code</h3>
        <p>When the button is clicked, the event handler function dispatches an event into the iframe. Note that the first argument of the <code>postMessage()</code> method is passed into the iframe's event listener as the <code>data</code> object in the event object. This provides access to the new video's URL in the iframe.</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="182-190"></code></p>
        <h3>The plugin code</h3>
        <p>This code handles the event passed into the iframe, then uses information in the event object to play the new video.</p>
        <ul>
          <li>Line 160: Listens for the event to be dispatched into the iframe. Upon handling the event the <code>changeVideoFunc()</code> function is called. Note that the <code>postMessage()</code> method always dispatches an event named <code>message</code>, which is the reason for the first parameter.</li>
          <li>Line 152: Standard declaration for a plugin. Note the name of the plugin is <code>listenForChange</code>. You will be entering the name of the function into Studio's Plugin section later in this process.</li>
          <li>Line 153: Creates a variable to hold player instance.</li>
          <li>Line 154: Event handler function declaration called by the <code>addEventListener()</code> method.</li>
          <li>Line 155: Checks to be sure the event being handled is the for changing the video. In this case this check is probably superfluous as only one event is being dispatched into the iframe, but is a good practice.</li>
          <li>Line 156: Uses the <code>src()</code> method to load the video into the player. The <code>videoURL</code> defined as part of the event object's <code>data</code> property. In this case, the <code>data</code> property is the object built and passed in the iframe's parent page.</li>
          <li>Line 157: Plays the video (optional, of course).</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="152-161"></code></p>
        <p>Once you have the code entered you need to save the file to an Internet accessible URL. Once you do this you can go into Studio and provide the URL to the player as shown:</p>
        <div><img src="/en/video-cloud/brightcove-player/samples/assets/dynamic-add-plugin.png"></div>
        <p>You now need to be sure the plugin function is called. You can do this in Studio as shown:</p>
        <div><img src="/en/video-cloud/brightcove-player/samples/assets/dynamic-add-plugin-name.png"></div>
        <p>Of course, the plugin name supplied must match the name given to the plugin in the associated JavaScript.</p>
        <p>The functionality is now ready to use. You will see one video playing, then when you click the button another video will be dynamically loaded and played.</p>
    </div>
    <div id="iframe" class="section video-cloud-only">
        <h2>Use iframe</h2>
		  <p>It is a best practice to use the iframe player implementation if you can. The recommended approach to changing the video source is to append a query string in the form <code>?videoId=12345</code> to the <code>iframe</code>'s <code>src</code> attribute.</p>
		 
        <h3><a name="HTMLCode"></a>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 83-84: Define the player along with the initial video content.</li>
            <li>Line 87: Defines the button which when selected will update the video content.</li>
          </ul> 
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="81-88"></code></p>

        <h3><a name="JSCode"></a>The JavaScript code</h3>
        <p>This code gets a reference to the player and changes the video content.</p>
        <ul>
          <li>Line 92: Gets a reference to the first <code>iframe</code> element on the page.</li>
          <li>Line 92: Defines the query string for the new video id from your Video Cloud library.</li>
          <li>Line 97: Appends the query string with the new video id to the <code>iframe</code>'s <code>src</code> attribute.</li>
        </ul>
		<p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="91-100"></code></p>
        
        <h3><a name="CSSCode"></a>The stylesheet</h3>
          <p>This example uses CSS styles for the display fields and the Brightcove player.</p>
        <ul>
          <li>Lines 74-75: Set the dimensions of the player.</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="72-77"></code></p>
        
        <h3><a name="completecode"></a>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-line="64-103"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. When you select the <strong>change video</strong> button you should see the new video in the player.</p>
	  </div>
		  
      <div class="section" id="BCLreferences">
        <h2>Related Topics</h2>
        <ul>
          <li class="video-cloud-only"><a href="//docs.brightcove.com/en/video-cloud/player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a></li>
          <li class="perform-only"><a href="//docs.brightcove.com/en/perform/player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a></li>
          <li class="perform-only"><a href="//docs.brightcove.com/en/perform/brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a></li>
          <li class="video-cloud-only"><a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a></li>
          <li  class="perform-only"><a href="//docs.brightcove.com/en/video-cloud/brightcove-player/samples/listen-for-play-button.html">Brightcove Player Sample: Play Video from iframe Parent</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script src="/en/scripts/log.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v1.js"></script>
  <script src="/en/scripts/bc-mapi.js"></script>
  <script src="/en/scripts/expander.js"></script>
  <script>
      $(document).foundation();
  </script>
  <script src="//players.brightcove.net/1752604059001/b51d022a-e462-4796-a084-07f44367a6e9_default/index.min.js"></script>
  <!-- custom script -->
  <script type="text/JavaScript">
    var myPlayer;

    videojs('myPlayerID').ready(function () {
      myPlayer = this;
    });

    function changeVideo() {
      console.log('in change vid')
      myPlayer.catalog.getVideo('3851389913001', function (error, video) {
        myPlayer.catalog.load(video);
        myPlayer.play();
      })
    }
  </script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
	var feedbackMail = document.getElementById("feedbackMail");
	feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
	</script>
	</body>

</html>
