<!DOCTYPE html>
<html lang="en">

<head>
    
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Brightcove Player Sample: Loading the Player Dynamically</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/normalize.css" />
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/vendor/modernizr.js"></script>
  
  <!-- Page styles -->
	<style id="pageStyles">
    #video_1 {
      width: 640px;
      height: 360px;
    }
	</style>
</head>

<body>
    <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
      <div id="top" class="section">
        <h1>Brightcove Player Sample: Loading the Player Dynamically</h1>
        <p>This topic describes how to load the Brightcove player dynamically, that is, on a user event and NOT in the startup HTML. In the working example here you can click the <strong>Add Player</strong> button to dynamically load the player and play a video.</p>
      </div>
			
		  <div id="developmentsequence" class="section">
			  <h2 id="expanderHead"><span id="expanderSign">+</span>Development sequence</h2>
        <div id="expanderContent" style="display:none">	
          <p>Here is the recommended development sequence:</p>
          <ol>
            <li>Use the embed_in_page player implementation to test the functionality of your player, plugin and CSS (if CSS is needed)</li>
            <li>Put the plugin's JavaScript and CSS into separate files for local testing</li>
            <li>Deploy the plugin code and CSS to your server once you have worked out any errors</li>
            <li>Use the new Video Cloud Studio to add the plugin and CSS to your player</li>
            <li>Replace the embed_in_page player implementation if you determine that the iframe implementation is a better fit (detailed in next section)</li>
          </ol>
          <p>For details about these steps, review the <a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a> guide.</p>
          <h3>iframe or embed_in_page</h3> 
          <p>When developing enhancements for the Brightcove player you will need to decide if the code is a best fit for the iframe or embed_in_page implementation. The best practice recommendation is to build a plugin for use with an iframe implementation. The
            advantages of using the iframe player are:</p>
          <ul>
            <li>No collisions with existing JavaScript and/or CSS</li>
            <li>Automatically responsive</li>
            <li>The iframe eases use in social media apps (or whenever the video will need to "travel" into other apps)</li>
          </ul>
          <p>Although integrating the embed_in_page player can be more complex, there are times when you will plan your code around that implementation. To generalize, this approach is best when the containing page needs to communicate to the player. Specifically,
            here are some examples:</p>
          <ul>
            <li>Code in the containing page needs to listen for and act on player events</li>
            <li>The player uses styles from the containing page</li>
            <li>The iframe will cause app logic to fail, like a redirect from the containing page</li>
          </ul>
          <p>Even if your final implementation does not use the iframe code, you can still use the embed_in_page code with a plugin for your JavaScript and a separate file for your CSS. This encapsulates your logic so that you can easily use it in multiple players.</p>
        </div><!-- id="expanderContent" -->
			</div>
			
      <div id="selectimplementation" class="section">
				<h2>Select implementation</h2>
				<p>In this sample, you will generate the embed_in_page code dynamically, given your account id and player id. Since the <code>videojs</code> object does not exist until the player script is added to the page and run, you will not be able to move the CSS and JavaScript into a plugin, but both the iframe and In-Page Embed implementations will be used.</p>
			</div>
          
      <div id="resources" class="section">
        <h2>API resources used</h2>
		  <p>The following sections detail resources used from various APIs.</p>
        <h3>Player management API</h3>
        <ul><li>HTTP <code>POST</code> method with the endpoint <code>https://players.api.brightcove.com/v1/accounts/$ACCOUNT_ID/players</code> to create the player and its proper configuration</li></ul>
      </div>
			
      <div id="player" class="section">
        <h2>The player</h2>
        <p>Select the <strong>Add Player</strong> button to dynamically load the player with its associated video. Notice that the video starts playing automatically.</p>
        
        <div class="player-block">
            <div id="placeHolder" style="background-color:#64AAB2;width:640px;height:360px;text-align: center;">
                <button onclick="addPlayer()">Add Player</button>
            </div>
        </div>
		  
      </div><!-- class="section" -->
			
      <div id="code" class="section">
        <h2>How it works</h2>
		  <p>The following sections explain the player, JavaScript and CSS code used in the example.</p>
        <h3>The player code</h3>
        <p>The player code is simply the code for the iframe implementation displayed when the player is published.</p>
        <p class="BCL-aside">Note: This code does not initially reside in the HTML page, but is generated dynamically when the user selects the <strong>Add Player</strong> button.</p>
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="1" data-gist-hide-footer="true"></code></p>
        <p>This player was created using the curl statement statement below with the following configuration options:</p>
        <ul>
          <li>Line 22: Indicates that the player should start playing immediately on platforms that allow this.</li>
          <li>Lines 26-27: Define the video and its type in the <code>sources</code> array.</li>
        </ul>
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="14-33" data-gist-highlight-line="22,26,27" data-gist-hide-footer="true"></code></p>
		 
        <h3><a name="HTMLCode"></a>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 54,56: Define the container where the player will by dynamically added.</li>
            <li>Line 55: Defines the button that when selected adds the player to the page.</li>
          </ul> 
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="53-57" data-gist-hide-footer="true"></code></p>
		  
        <h3><a name="JSCode"></a>The JavaScript code</h3>
		  
        <p>Define the variables, create the player code and inject it into the HTML page.</p>
        <ol>
          <li>Lines 60-55: Define the variables for the script. The <code>accountID</code> and <code>playerID</code> fields are used to dynamically create the player code.</li>
          <li>Lines 67-74: Dynamically add the player code to your HTML page. The <code>iframe</code> element is built and injected into the HTML page.</li>
        </ol>
		<p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="59-75"  data-gist-hide-footer="true"></code></p>
        
        <h3><a name="CSSCode"></a>The stylesheet</h3>
          <p>This example uses CSS styles for the Brightcove player.</p>
        <ul>
          <li>Lines 46-47: Set the dimensions of the player within the <code>iframe</code> element.</li>
        </ul>
          <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="44-49"  data-gist-hide-footer="true"></code></p>
        <h3><a name="completecode"></a>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="38-78"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. When you select the <strong>Add Player</strong> button you should see the video playing in the player.</p>
      </div>
          
      <div id="useembedinpage" class="section">
        <h2>embed_in_page code</h2>
        <p>It is a best practice to use the iframe player implementation as shown above. If you want to get a reference to the player to control it, you can use the embed_in_page implementation.</p>
        
        <h3>The player code</h3>
        <p>In this case, you will use the embed_in_page implementation displayed when the player is published.</p>
        <p class="BCL-aside">Note: This code does not initially reside in the HTML page, but is generated dynamically when the user selects the <strong>Add Player</strong> button.</p>
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="5-10"  data-gist-hide-footer="true"></code></p>
        <p>This player was created using the curl statement statement below with the following configuration options:</p>
        <ul>
            <li>Lines 150-151: Define the video and its type in the <code>sources</code> array.</li>
        </ul>
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="140-157" data-gist-hide-footer="true"></code></p>
        
        <h3><a name="JSCode"></a>The JavaScript code</h3>
        <p>In this JavaScript code you will perform the following tasks:
        <ul>
            <li>Define the variables</li>
            <li>Create the player code</li>
            <li>Inject it into the HTML page</li>
            <li>Create the appropriate script block</li>
            <li>Append the script to the HTML page</li>
        </ul>
        <ol>
          <li>Lines 108-113: Define the variables for the script. The <code>accountID</code> and <code>accountID</code> fields are used to dynamically create the player code.</li>
          <li>Lines 117-119: Dynamically add the player code, in this case the <code>video</code> element, to the HTML page.</li>
          <li>Lines 122-123: Add the <code>script</code> tag to the page using the <code>createElement()</code> method.</li>
          <li>Line 124: Adds the script using the <code>appendChild()</code> method, which also runs the script.</li>
        </ol>
		<p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="107-126"  data-gist-hide-footer="true"></code></p>
        
        <h3><a name="completecode"></a>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="bca97cb5b55b2918911f" data-gist-line="83-129"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. When you select the <strong>Add Player</strong> button you should see the video playing in the player.</p>
          
      </div>
          
      <div class="section" id="BCLreferences">
        <h2>Related Topics</h2>
        <ul>
          <li><a href="../../player-management/guides/player-configuration.html">Player Configuration Guide</a></li>
          <li><a href="../../brightcove-player/guides/plugin-guide.html">Plugin Guide</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script src="/en/scripts/log.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v1.js"></script>
  <script src="/en/scripts/bc-mapi.js"></script>
  <script src="/en/scripts/expander.js"></script>
  <script>
      $(document).foundation();
  </script>
  <script type="text/javascript">
    /******** Any scripts specific to page samples should go here *********/
    
		var myPlayer,
        playerHTML,
        playerData = { 
            "accountID" : "1752604059001",
            "playerID" : "04ee9f58-9d08-43ea-803f-abda86776db2"
        };
    
    function addPlayer (){
        // dynamically build the player video element
        playerHTML = "<video id=\"video_1\" data-account=\"" + playerData.accountID + "\" data-player=\"" + playerData.playerID + "\" data-embed=\"default\" class=\"video-js\" controls></video>";
        // inject the player code into the DOM
        document.getElementById("placeHolder").innerHTML = playerHTML;

        // add and execute the player script tag
        var s = document.createElement("script");
        s.src = "//players.brightcove.net/" + playerData.accountID + "/" + playerData.playerID + "_default/index.min.js";
        document.body.appendChild(s); 
    } 

  </script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
	var feedbackMail = document.getElementById("feedbackMail");
	feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
	</script>
	</body>

</html>
