<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="products" content="Perform">
    <meta name="role" content="API Developer">
    <meta name="task" content="Create & Configure Players">
    <meta name="topic" content="Code Samples">
    <meta name="api" content="Player Management">
    <!-- End Drupal Taxonomy Data -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Sample Code Overview</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
 <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
 <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
 <script src="//use.edgefonts.net/source-code-pro.js"></script>
 <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
 <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
 <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

 <script>
     (function(i, s, o, g, r, a, m) {
         i['GoogleAnalyticsObject'] = r;
         i[r] = i[r] || function() {
             (i[r].q = i[r].q || []).push(arguments)
         }, i[r].l = 1 * new Date();
         a = s.createElement(o),
             m = s.getElementsByTagName(o)[0];
         a.async = 1;
         a.src = g;
         m.parentNode.insertBefore(a, m)
     })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

     ga('create', 'UA-2728311-29', 'auto');
     ga('send', 'pageview');
 </script>
 <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

  </head>

<body><script src="/en/scripts/redirect2.js"></script>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <h1>Sample Code Overview</h1>
            <!-- begin drupal content -->
      <article class="bcls-article">
          <header id="bcls_header" class="bcls-header">
            <p>The sample apps listed on this page are meant as a way for you to explore the basics of the Player Management API. They are not meant to be enterprise ready, deployable apps. For instance, form validation is not exhaustive and passwords are sent NOT using HTTPS.</p>
            <p>This page describes how the basic samples for the new player are written. This includes details on basic authentication and how AJAX is used within the samples.</p>
              </header>
          <section id="authentication" class="bcls-section">
            <h2>Authentication</h2>
              <p>In the Quick Start to Player Management you used curl statements to interact with the API. When an API call was made you were interactively prompted for a password. While this works well for curl, this kind of interactive authentication is not feasible when building an application.</p>
              <p>You can use basic authentication when building an app. In the header you need to send the credentials, encrypted in a base-64 encoded ASCII string. You can use the JavaScript <code>btoa()</code> method to do the encoding. Assuming <code>account_username</code> and <code>account_password</code> are populated from, for example a form, the Authorization header would appear as follows:</p>
<pre class="line-numbers"><code class="language-javascript"> "Authorization": "Basic " + btoa(account_username + ":" + account_password),</code></pre>
              <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="27"></code> -->
          </section>
          <section id="ajax" class="bcls-section">
            <h2>AJAX</h2>
              <p>Instead of using curl statements these samples will use JavaScript to communicate with the API. This means using AJAX to issue the request to the API. A specific example request might look something like this:</p>
<pre class="line-numbers"><code class="language-javascript">$.ajax({
  type: "DELETE",
  headers: {
    "Authorization": "Basic " + btoa("username:password"),
    "Content-Type": "application/json"
  },
  url: "https://players.api.brightcove.com/v1/accounts/123456789/players/478772a5-a2f2-44c6-a26b-2d7234bd97f5",
  success: ajaxSuccess,
  error: ajaxError
});</code></pre>
              <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="1-10"></code><br /> -->
              <p>Associated <code>success</code> and <code>error</code> handlers could look something like this:</p>
<pre class="line-numbers"><code class="language-javascript">var ajaxSuccess = function (data) {
  document.getElementById("jsonResponse").innerHTML = JSON.stringify(data,null,2);
};

var ajaxError = function (data) {
  console.log("error data: ");
  console.log(data);
};</code></pre>
              <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="12-19"></code><br /> -->
              <p>Of course, you don't want to hard code all the information in the AJAX call as shown above, so it makes sense to abstract the actual call to a function that is reusable, as shown here:</p>
<pre class="line-numbers"><code class="language-javascript">var makeAjaxCall = function (callURL, callType, callData) {
  if (callData) {
    $.ajax({
      type: callType,
      headers: {
        "Authorization": "Basic " + btoa(account_username + ":" + account_password),
        "Content-Type": "application/json"
      },
      url: callURL,
      data: JSON.stringify(callData),
      success: ajaxSuccess,
      error: ajaxError
    });
  } else {
    $.ajax({
      type: callType,
      headers: {
        "Authorization": "Basic " + btoa(account_username + ":" + account_password),
        "Content-Type": "application/json"
      },
      url: callURL,
      success: ajaxSuccess,
      error: ajaxError
    });
  }
};</code></pre>
              <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="22-47"></code><br /> -->
            <aside class="bcls-aside bcls-aside--information">Separate calls are built if data needs to be passed with the API call. In the Quick Start to Player Management you have seen both use cases. Publishing a player does not require any data to be passed, whereas creating a player with a media source does require passing data.</aside>
              <p>You are then ready to call the function. In the following example the <code>account_id</code>, <code>account_password</code> and <code>account_username</code> values are all extracted from a form.</p>
<pre class="line-numbers"><code class="language-javascript">var getPlayerInfo = function () {
  account_id = document.getElementById("account_id").value,
  account_password = document.getElementById("account_password").value,
  account_username = document.getElementById("account_username").value;
  call_url = "https://players.api.brightcove.com/v1/accounts/" + account_id + "/players";
  makeAjaxCall(call_url, "GET", null);
};</code></pre>
              <!-- <code data-gist-id="9216425" data-gist-hide-footer="true" data-gist-line="49-55"></code><br /> -->
              <p>If you have completed the Quick Start to Player Management you know that some processes take multiple API calls, like creating and publishing a player. Also, the logic of some apps may require multiple API calls, like getting a list of all players to display, then deleting players the user marked. In these instances you will most likely need to alter your <code>success</code> handler to perform different logic based on which call was just successfully carried out. In these sample apps the implementation logic for these use cases will be implemented using a flag variable, <code>callPurpose</code>, and a <code>case</code> statement using that flag, as shown here:</p>
<pre class="line-numbers"><code class="language-javascript">var ajaxSuccess = function (data) {
  switch (callPurpose) {
    case "getPlayers":
      createCheckboxes(data);
      watchCheckboxes();
      break;
    case "deletePlayer":
      document.getElementById("jsonResponse").innerHTML += data;
      break;
  }
};</code></pre>
          </section>
      </article>
      <!-- end drupal content -->
      <div class="bcls-section" id="BCLreferences">
        <h2>Related Topics</h2>
        <ul>
          <li> <a href="../getting-started/player-mgmt-quick-start.html">Quick Start to Player Management</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- bcl scripts -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
<script src="/en/scripts/docs-nav-data.min.js"></script>
<script src="/en/scripts/bcls-doc-site-v2.js"></script>
<script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
<script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
<script>
    $(document).foundation();
</script>

    <div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<div class="bcls-footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>
