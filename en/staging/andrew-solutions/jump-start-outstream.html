<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Load Player Dynamically</title>
  <style>
    .video-js {
      width: 640px;
      height: 360px;
    }
    body {
      background-color: #111;
      color: #f5f5f5;
      font-family: sans-serif;
      margin: 2em;
    }
    .bcls-code {
      color: #111;
      font-family: 'Source Code Pro', monospace;
      padding: 1em;
      width: 90%;
      min-height: 5em;
      background-color: #cfcfcf;
      font-size: 1rem;
    }
    .bcls-button {
      padding: .5em;
      background-color: #333;
      border: 1px yellow solid;
      border-radius: .5em;
      color: yellow;
      cursor: pointer;
    }
    fieldset {
      color: #64AAB2;
      border: 1px #64AAB2 solid;
      border-radius: .5em;
    }
    code {
      color: #E4B842;
      font-family: 'Source Code Pro', monospace;
    }
  </style>
  <link href="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet">
</head>

<body>
  <h2 id="accountInput">Jump Start: Pre-Roll Ad</h2>
  <p>Enter values for the three form fields below to see an outstream video ad. (If you choose not to input your data, demo data will be supplied.)</p>
  <p>Below the player, the code for the player implementation is shown so you can copy and use.</p>

  <div id="inputFields" class="input-fields">
    <fieldset class="bcls-fieldset">
      <legend>Account Information</legend>
      <div id="accountInfo">
        <table class="bcls-table">
          <tbody class="bcls-table__body">
            <tr>
              <td>Video Cloud Account ID:</td>
              <td>
                <input id="accountID" type="text" size="60" value="3723496277001" />
              </td>
            </tr>
            <tr>
              <td>Ad Server URL:</td>
              <td>
                <input id="adServerURL" type="text" size="60" value="https://solutions.brightcove.com/bcls/brightcove-player/vmap/simple-vast.xml" />
              </td>
            </tr>
            <tr>
              <td>Animation Duration:</td>
              <td>
                <input id="animationDuration" type="text" size="60" value="500" />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </fieldset>
  </div>

  <p><button id="buildPlayer" class="bcls-button" onclick="addPlayer()">Build the Player</button></p>

  <div id="playerWrapper">
    <fieldset class="bcls-fieldset">
      <legend>Player</legend>
      <div><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nunc mi ipsum faucibus vitae aliquet nec. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nunc mi ipsum faucibus vitae aliquet nec.</p></div>
      <div id="placeHolder"></div>
      <div><p>Habitasse platea dictumst vestibulum rhoncus est pellentesque elit ullamcorper. Varius vel pharetra vel turpis nunc eget lorem dolor. Habitasse platea dictumst vestibulum rhoncus est pellentesque elit ullamcorper. Varius vel pharetra vel turpis nunc eget lorem dolor.</p></div>

    </fieldset>
  </div>
  <br>

  <div id="publishingCodeWrapper">
    <fieldset class="bcls-fieldset">
      <legend>Publishing Code</legend>
      <textarea id="publishingCode" class="bcls-code" style="width: 90%;height: 420px" onclick="this.select()"></textarea>
    </fieldset>
  </div>

  <!-- custom script -->
  <script type="text/JavaScript">
    var myPlayer,
      playerHTML,
      playerScript,
      adonlyScript,
      publishingCode = document.getElementById('publishingCode'),
      adPlayerDiv = document.getElementById('placeHolder');
      accountID = document.getElementById('accountID'),
      animationDuration = document.getElementById('animationDuration'),
      adServerURL = document.getElementById('adServerURL'),
      options = {};

    function addPlayer() {
      options.accountID = accountID.value;
      options.animationDuration = animationDuration.value;
      options.adServerURL = adServerURL.value;
      playerScript = document.createElement('script');
      playerScript.src = "//players.brightcove.net/" + options.accountID + "/default_default/index.min.js";
      document.head.appendChild(playerScript);
      playerScript.onload = loadIMA;
    }

    function loadIMA() {
      ima = document.createElement('script');
      ima.src = '//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js';
      document.head.appendChild(ima);
      ima.onload = loadAdonly;
    }

    function loadAdonly() {
      adOnlyScript = document.createElement('script');
      adOnlyScript.src = "//players.brightcove.net/3723496277001/files/adonly.js";
      document.head.appendChild(adOnlyScript);
      adOnlyScript.onload = playAd;
    }

    function playAd(){
      bcPlayerTools.expandAndInjectAdOnlyPlayer({
        div: adPlayerDiv,
        adTag: options.adServerURL,
        height: 360,
        animationDuration: options.animationDuration
      });
      buildHTML();
    }
    function buildHTML(){
      var htmlText,
        prettyText;
      htmlText = '<!doctype html> <html> <head> <meta charset="UTF-8"> <title>Untitled Document</title> </head> <body> <div style="width:600px"> <h1>Lorem Ipsum</h1> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nunc mi ipsum faucibus vitae aliquet nec. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nunc mi ipsum faucibus vitae aliquet nec.</p> <div id="adPlayerDiv"></div> <p>Habitasse platea dictumst vestibulum rhoncus est pellentesque elit ullamcorper. Varius vel pharetra vel turpis nunc eget lorem dolor. Habitasse platea dictumst vestibulum rhoncus est pellentesque elit ullamcorper. Varius vel pharetra vel turpis nunc eget lorem dolor.</p> </div>';
      htmlText += playerScript.outerHTML;
      htmlText += '<link href="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet" /\>';
      htmlText += '<script src="//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js">\</script\>';
      htmlText += '<script src="//players.brightcove.net/3723496277001/files/adonly.js">\</script\>';
      htmlText += '<script type="text/javascript">';
      htmlText += 'bcPlayerTools.expandAndInjectAdOnlyPlayer({ div: adPlayerDiv, adTag: ' + options.adServerURL + ', height: 360, animationDuration: '+ options.animationDuration + ' });  \</script\> </body> </html> ';
      console.log('htmlText: ', htmlText);
    }

  </script>
</body>

</html>
