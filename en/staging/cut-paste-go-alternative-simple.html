<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Untitled Document</title>
  <style>
    .video-js {
      height: 344px;
      width: 610px;
    }
  </style>
  <link rel="stylesheet" type="text/css" href="//players.brightcove.net/videojs-ima3/2/videojs.ima3.min.css" />

</head>

<body>
  <button id="generatePlayer" class="bcls-button">Generate Player</button>


  <section class="bcls-section">
    <h2 id="Player">Player</h2>
    <div id="placeHolder"></div>
    <br />
    <br />
    <br />
  </section>



  <script type="text/javascript">
    var
      player;

    generatePlayer.addEventListener("click", function() {
      account_id = '1752604059001';
      video_url = '4093643993001';
      console.log('****account_id:', account_id);
      console.log('****video_url:', video_url);
      playerHTML = '<video id=\"player\" data-video-id=\"' + video_url + '\"  data-account=\"' + account_id + '\" data-player=\"default\" data-embed=\"default\" class=\"video-js\" controls></video>';
      document.getElementById('placeHolder').innerHTML = playerHTML;
      var s = document.createElement('script');
      s.src = "//players.brightcove.net/" + account_id + "/default_default/index.min.js";
      // Add the script tag to the document
      document.body.appendChild(s);
      // Call a function to play the video once player's JavaScript loaded
      s.onload = callback;

      // +++ Initialize the player and start the video +++
      function callback() {
        var ima = document.createElement('script');
        ima.src = '//players.brightcove.net/videojs-ima3/2/videojs.ima3.min.js';
        document.body.appendChild(ima);
        ima.onload = function() {
          var options = {};
          options.serverUrl = "//solutions.brightcove.com/bcls/brightcove-player/vmap/simple-vast.xml";
          options.timeout = 5000;
          options.requestMode = "onload";
          options.debug = true;
          player = bc(document.getElementById('player'));
          player.ima3(options);
        	videojs('player').ready(function() {
        		var player = this;
            player.play();
        		console.log('player loaded and ready');
          }); // end player ready
        }; // end ima script load
      }; // end player script load
    }); // end click event handler
  </script>

</body>

</html>
