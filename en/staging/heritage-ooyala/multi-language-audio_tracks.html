<!DOCTYPE html>
<html lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <meta name="robots" content="noindex">
    <!-- change title to match the h1 heading -->
    <title>Multi-Language Audio Tracks Processing</title>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

  </head>

  <body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
      <div class="sidebar large-2 columns show-for-large-up">
        <div id="sidenav" class="side-nav"></div>
      </div>
      <div id="main" class="large-10 small-12 columns">
        <h1>Ingesting Videos with Multi-Language Audio Tracks</h1> 
        <!-- BEGIN MAIN CONTENT -->
        <article class="bcls-article">
            <p><a href="index.html">Return to the Documentation Index</a></p>
            <aside class="bcls-aside bcls-aside--information language-editable">Note: these topics apply <strong>only</strong> to Ooyala customers recently migrated to Video Cloud.</aside>
          <section class="bcls-section">
            <h2 id="Introduction">Introduction</h2>
            <p>language audio tracks in your source videos can be preserved in your Video Cloud video renditions. Ingestion of multi-language audio tracks is supported through the <a href="https://support.brightcove.com/dynamic-ingest-api">Dynamic Ingest API</a> <strong>only</strong>,</p>

            <p>For general information on how to ingest videos using the API, please see the <a href="https://support.brightcove.com/overview-dynamic-ingest-api-dynamic-delivery">Overview of the Dynamic Ingest API</a>.</p>

            <h4>Notes</h4>
            <ul>
              <li>Both multiple audio tracks within the source video and additional separate audio files can be used for multiple audio tracks. Video Cloud does not store audio masters, however - separate audio files used as alternate audio tracks must be hosted on public URLs.</li>
              <li>By default, external audio tracks will be merged with those contained in the video. If instead you want to replace the audio tracks contained in the video, you can set the <code>merge_with_existing</code> flag to <code>false</code>.</li>
              <li>Ingest will <strong>not</strong> fail the job for any master track that is not part of the media info and that track will be skipped.</li>
              <li>For the master audio tracks input, any one of the languages or the variants can be passed as well. In that case we will look for that in media info and skip it if not present.</li>
              <li>Where the language or variant for a track is not specified in the request, we will default to <code>en</code> for the language, and <code>main</code> for the variant.</li>
            </ul>
          </section>
          <section class="bcls-section">
            <h2 id="authentication">Authentication for API requests</h2>
            
            <p>Authentication for most of Brightcove's REST (platform) APIs is managed using OAuth 2. For a full explanation of Brightcove's OAuth implementation, see the <a href="https://support.brightcove.com/oauth-api">OAuth API documentation</a>. The short version, however, is that you need two things to authenticate API requests:</p>
            <ul>
              <li>Client credentials, consisting of a <code>client_id</code> and <code>client_secret</code> (getting these is a one-time operation)</li>
              <li>Access token (you need to retrieve an access token for each API request from the OAuth API)</li>
            </ul>
            <p>Client credentials carry permissions for specific API operations. The operations required for Dynamic Ingest are:</p>
            <ul>
              <li>
              <ul>
                <li><code>video-cloud/video/create</code></li>
                <li><code>video-cloud/video/read</code></li>
                <!-- for adding images and webvtt files -->
                <li><code>video-cloud/video/update</code></li>
                <li><code>video-cloud/ingest-profiles/profile/read</code></li>
                <li><code>video-cloud/ingest-profiles/account/read</code></li>
                <li><code>video-cloud/ingest-profiles/account/write</code></li>
                <li><code>video-cloud/ingest-profiles/profile/write</code></li>
                <li><code>video-cloud/upload-urls/read</code></li>
              </ul>
              </li>
            </ul>
            
            <p>The easiest way to get client credentials is to use the Studio <a href="https://support.brightcove.com/managing-api-authentication-credentials">admin tools</a>. When you register a new app, check the <strong>Create</strong> box under Dynamic Ingest, and the other permissions you need will be selected automatically:</p>
            <figure class="bcls-figure">
              <img class="bcls-image" src="/en/staging/heritage-ooyala/images/di-permissions.png" alt="Operation Permissions">
              <figcaption class="bcls-caption--image">Operation Permissions</figcaption>
            </figure>
            
            <p>If you prefer to use the OAuth API directly to create your client credentials, see one of these topics:</p>
            <ul>
              <li><a href="https://support.brightcove.com/oauth-create-client-credentials-using-curl">OAuth: Get Client Credentials Using CURL</a></li>
              <li><a href="https://support.brightcove.com/oauth-create-client-credentials-using-postman">OAuth: Get Client Credentials Using Postman</a></li>
              <li><a href="https://support.brightcove.com/oauth-api-sample-create-client-credentials">Brightcove Learning Services Online App</a></li>
            </ul>
            <h3>Getting access tokens</h3>
            <p>Once you have client credentials, you can get an access token by submitting a <code>POST</code> request to:</p>

            <pre class="line-numbers">
            <code class="language-http notranslate">https://oauth.brightcove.com/v4/access_token</code></pre>
            
            <p>You must pass the following headers with this call:</p>
            
            <ul>
              <li><code class="language-http notranslate">Content-Type: application/x-www-form-urlencoded</code></li>
              <li><code class="language-http notranslate">Authorization: Basic <span class="bcls-input">client_id:client_secret</span></code></li>
            </ul>
            
            <p>The entire <code class="language-http notranslate">{client_id}:{client_secret}</code> string must be Base64-encoded (curl will automatically Base64-encode the string if you pass it as <code>--user</code> credentials; in other languages, you'll need to handle the Base64-encoding yourself).</p>
            
            <p>You must also send the following key/value pair as the request body or as URL parameter:</p>
            
            <pre class="line-numbers">
            <code class="language-http notranslate">grant_type=client_credentials</code></pre>
            
            <aside class="bcls-aside bcls-aside--information">Note that since the <code class="notranslate">Content-Type</code> must be <code class="notranslate">application/x-www-form-urlencoded</code>, the key/value pair will be sent to the API as a URL param even if you put it in the request body.</aside>

            <p>If you will only need to do this a few times, we also have an <a href="https://support.brightcove.com/oauth-api-sample-get-access-token">online app for creating access tokens</a>, as well as instructions for setting up popular REST API clients to do this:</p>
            <ul>
              <li><a href="https://support.brightcove.com/use-postman-api-requests">Use Postman for API Requests</a></li>
              <li><a href="https://support.brightcove.com/use-insomnia-api-requests">Use Insomnia for API Requests</a></li>
            </ul>
            <p>If you are creating your own app/integration, or using curl to submit API requests, the access token is passed in an <code>Authorization</code> header:</p>
            <pre class="line-numbers"><code class="language-bash">Authorization: Bearer <span class="bcls-input">your_access_token</span></code></pre>
          </section>
            
          <section class="bcls-section">
              <h2 id="using_dynamic_ingest_api">Using the Dynamic Ingest API</h2>
              <p>There are two steps to ingesting a video using the Dynamic Ingest API</p>
              <ol>
                <li><a href="#create_video">Create a video object</a> in Video Cloud using the CMS API</li>
                <li><a href="#ingest_video">Ingest the video</a> using the Dynamic Ingest API</li>
              </ol>
              <section class="bcls-subsection">
                <h3 id="create_video">Create the video object</h3>
                <p>To create a new video object in your Video Cloud video library, make <code>POST</code> request to:</p>
<pre><code class="language-http">https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">{account_id}</span>/videos</code></pre>
                <p>You must include a request body that contains at least the video <code>name</code>:</p>
<pre class="line-numbers"><code class="language-json">{
  "name": "My Video Title"
  }</code></pre>
                <p>You can also include additional video metadata (see the <a href="https://docs.brightcove.com/cms-api/v1/doc/index.html#operation/CreateVideo">CMS API Reference</a>), but these can also be added later in Studio or via the CMS API.</p>
                <p>The response will be a JSON object containing many video properties. The first one will be the video <code>id</code>, and you will need this value to make the ingest request.</p>
              </section>
              <section class="bcls-subsection">
                <h3 id="ingest_video">Ingest the video</h3>
                <p>After you create the video object and retrieve its <code>id</code>, you can ingest the video to Video Cloud by sending a <code>POST</code> request to:</p>
<pre><code class="language-http">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">{account_id}</span>/videos/<span class="bcls-input">{video_id}</span>/ingest-requests</code></pre>
              </section>
            </section>
          <section class="bcls-section">
            <h2 id="Sample_request_bodies">Sample request bodies</h2>
            <p>Below are some sample request bodies for different cases.</p>
            <h3>Only master audio tracks</h3>
<pre class="line-numbers"><code class="language-json">{
  "master": {
      "url": "https://mybucket.com/videos/video1.mp4",
      "audio_tracks": [
        {
          "language": "en",
          "variant": "main"
        },
        {
          "language": "fr",
          "variant": "main"
        },
        {
          "language": "es",
          "variant": "main"
        }
      ]
  },
}</code></pre>
            <h3>Master audio tracks with multiple audio inputs</h3>
<pre class="line-numbers"><code class="language-json">{
  "master": {
      "url": "https://mybucket.com/videos/video1.mp4",
      "audio_tracks": [
          {
              "language": "en",
              "variant": "main"
          },
          {
              "language": "fr",
              "variant": "main"
          },
          {
              "language": "es",
              "variant": "main"
          }
      ]
  },
  "audio_tracks": {
      "merge_with_existing": true,
      "masters": [
          {
              "language": "en",
              "variant": "commentary",
              "url": "https://mybucket.com/audio/video1-en-commentary.m4a"
          },
          {
              "language": "fr",
              "variant": "commentary",
              "url": "https://mybucket.com/audio/video1-fr-commentary.m4a"
          }
      ]
  }
}</code></pre>
          </section>
          <section class="bcls-section">
              <h2 id="Audio_service_type">Audio service type</h2>
              <p>Dolby audio codecs (ac-3 and eac-3) support including audio service type metadata. (AAC audio <strong>cannot</strong> contain service type metadata.)</p>
              <p>The following service types can be specified for supported Dobly tracks:</p>
              <ul>
                <li><code>main</code></li>
                <li><code>music_and_effects</code></li>
                <li><code>visually_impaired</code></li>
                <li><code>hearing_impaired</code></li>
                <li><code>dialogue</code></li>
                <li><code>commentary</code></li>
                <li><code>emergency</code></li>
                <li><code>voice_over</code></li>              </ul>
            </section>
        </article>

        <!-- END MAIN CONTENT -->
      </div>
    </div>

    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v3.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
    <script>
    $(document).foundation();
  </script>
    <!-- Any scripts specific to page samples should go here -->
  <script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
</body>

</html>
