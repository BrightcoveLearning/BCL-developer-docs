<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <meta name="robots" content="noindex">
  	<!-- change title to match the h1 heading -->
  	<title>Implementing Stream Concurrency</title>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<h1>Implementing Stream Concurrency</h1>
      <aside class="bcls-aside bcls-aside--warning">This is a temporary STAGING document for review only. For the official Brightcove documentation site, go to <a href="https://support.brightcove.com/">support.brightcove.com</a></aside>
      <p>In this topic, you will learn how to implement stream concurrency when using Brightcove's Playback Authorization Service.</p>


	    <!-- BEGIN DRUPAL CONTENT -->

<article class="bcls-article">
<section class="bcls-section">
<h2 id="Introduction">Introduction</h2>

<p>Stream concurrency allows a customer to limit the number of videos a specific user can watch at any given time. This feature hooks into the DRM workflow so it is secure and can be used with minimal integration.</p>

<p>If you are new to this feature, see the <a href="https://docs.brightcove.com/en/staging/pas/overview-playback-authorization-service.html">Overview: DRM with Playback Authorization Service</a> document.</p>

</section>

<section class="bcls-section">
<h2 id="Implementation">Implementation</h2>

<p>Using stream concurrency follows the same steps as in the <a href="https://docs.brightcove.com/en/staging/pas/technical-workflow-pas.html">Implementing DRM with Playback Authorization Service</a> document.</p>
<p>
  To enable stream concurrency, you must include the <a href="https://docs.brightcove.com/en/staging/pas/technical-workflow-pas.html#Generate_JWT_token">JWT token claims</a> required for concurrency.
</p>
</section>

<section class="bcls-section">
<h2 id="Renewal_Interval">Renewal Interval</h2>
<p>
  Mid-stream playback authorization requests need to specify a concurrency limit in the JWT token along with a public key id.
</p>

<p>Today each renewal request counts as an additional license that would go towards the number of your purchased licenses. This should be taken into account when you are deciding on an interval.</p>
<table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Renewal Interval</th>
          <th>Licenses Served per User for 2 hour content</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>None</td>
          <td>1</td>
        </tr>
        <tr>
          <td>15 minutes</td>
          <td>8</td>
        </tr>
        <tr>
          <td>5 minutes</td>
          <td>24</td>
        </tr>
        <tr>
          <td>2 minutes</td>
          <td>60</td>
        </tr>
      </tbody>
    </table>
</section>

<section class="bcls-section">
<h2 id="Behavior_examples">Behavior examples</h2>
<p>
  The following examples demonstrate different strategies for limiting playback streams.
</p>
<h3>General Behavior</h3>
<p>
  Brightcove supports limiting playback streams for DRM-proteced content. The default behavior is to stop the oldest session when a new renewal request is processed. This allows new user requests to be given access, while blocking the oldest requests which may no longer be valid due to a network or device failure.
</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/pas/concurrency-general.png" alt="General concurrency">
  <figcaption class="bcls-caption--image">General concurrency</figcaption>
</figure>

<p>
  <strong>User activity:</strong>
</p>
<ol>
  <li>
    Ben, Jason and Sarah begin watching a movie.
  </li>
  <li>
    Jamie decides to also start watching, causing Ben's upcoming renewal request to be denied.
  </li>
  <li>
    Ben restarts the movie, now causing Jason's renewal request to fail.
  </li>
  <li>
    Jason starts watching another movie some time later, causing Sarah's movie to stop.
  </li>
</ol>

<h3>Limited functionality with PlayReady</h3>
<p>
  When Stream Concurrency is enabled with PlayReady the behavior changes slightly, described in the examples below.
</p>
<h4>PlayReady: Secure stop</h4>
<p>
  Since Microsoft PlayReady does not support renewal requests, it denies any new sessions to limit the total number of streams. This behavior is referred to as secure stop.
</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/pas/playready-only.png" alt="PlayReady Secure stop">
  <figcaption class="bcls-caption--image">PlayReady Secure stop</figcaption>
</figure>

<p>
  <strong>User activity:</strong>
</p>
<ol>
  <li>
    Amy, Ben and Claire enjoy watching another movie.
  </li>
  <li>
    Dave decides to also start watching, but his request is denied due to the limit.
  </li>
  <li>
    Amy stops watching and her player sends the secure stop request. This opens a new slot.
  </li>
  <li>
    Dave can now use the new slot.
  </li>
</ol>

<h4>PlayReady: Session duration</h4>
<p>
  If the session duration limit is reached before a secure stop signal is received, then the duration limit is used.
</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/pas/playready-secure-stop.png" alt="PlayReady Session duration">
  <figcaption class="bcls-caption--image">PlayReady Session duration</figcaption>
</figure>

<p>
  <strong>User activity:</strong>
</p>
<ol>
  <li>
    Amy, Ben and Claire enjoy watching a movie.
  </li>
  <li>
    Amy's device is crashing and not sending the secure stop request.
  </li>
  <li>
    Dave also wants to watch, but his request is still denied.
  </li>
  <li>
    The session duration is reached and the slot is available again.
  </li>
  <li>
    Dave can now watch his movie.
  </li>
</ol>

<h4>PlayReady with other DRMs</h4>
<p>
  When PlayReady receives the maximum number of session requests, then all other license requests are denied, including Google Widevine and Apple FairPlay. No new sessions will be allowed.
</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/pas/playready-with-drms.png" alt="PlayReady with other DRMs">
  <figcaption class="bcls-caption--image">PlayReady with other DRMs</figcaption>
</figure>

<p>
  <strong>User activity:</strong>
</p>
<ol>
  <li>
    Amy, Ben and Claire enjoy watching a movie.
  </li>
  <li>
    Dave decides to also start watching, causing Ben's movie to stop. He's using a device supporting renewal requests and is upcoming request gets denied.
  </li>
  <li>
    Ben decides to switch to another device supporting secure stop, causing Dave's next renewal request to fail. Now, all slots are occupied by devices with secure stop.
  </li>
  <li>
    Dave has no free slot to watch.
  </li>
  <li>
    Amy stops watching, which frees a slot for Dave to use.
  </li>
</ol>

</section>

<section class="bcls-section">
<h2 id="Related_topics">Related topics</h2>

<ul>
  <li>
    <a href="https://docs.brightcove.com/en/staging/pas/overview-playback-authorization-service.html">Overview: DRM with Playback Authorization Service</a>
  </li>
  <li>
    <a href="https://docs.brightcove.com/en/staging/pas/using-pas-with-bcp.html">Using Playback Authorization DRM with Brightcove Player</a>
  </li>
  <li>
    <a href="https://docs.brightcove.com/en/staging/pas/using-pas-with-sdks.html">Using Playback Authorization DRM with the Native SDKs</a>
  </li>
  <li>
    <a href="https://docs.brightcove.com/en/staging/pas/additional-apis-for-pas.html">Additional APIs for Playback Authorization Service</a>
  </li>
</ul>
</section>

</article>


<!-- END DRUPAL CONTENT -->
</div>
</div>
<!-- bcl scripts -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
<script src="/en/scripts/docs-nav-data.min.js"></script>
<script src="/en/scripts/bcls-doc-site-v3.js"></script>
<script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
<script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
<script>
$(document).foundation();
</script>
<!-- Any scripts specific to page samples should go here -->
<script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/support-feedback.js"></script><script src="https://learning-services-media.brightcove.com/doc-assets/site-assets/js/site/feedback-docs.js"></script>
</body>

</html>
