<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <meta name="robots" content="noindex">
  	<!-- change title to match the h1 heading -->
  	<title>Selecting Captions Programmatically with the Native SDK for Android</title>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<h1>Selecting Captions Programmatically with the Native SDK for Android</h1>
      <aside class="bcls-aside bcls-aside--warning">This is a temporary STAGING document for review only. For the official Brightcove documentation site, go to <a href="https://support.brightcove.com/">support.brightcove.com</a></aside>
      <summary>In this topic, you will learn how to programmatically select captions when using the Brightcove Native SDK for Android.</summary>


	    <!-- BEGIN DRUPAL CONTENT -->


  <article class="bcls-article">
  <section class="bcls-section">
    <h2 id="Overview">Overview</h2>
    <p>
      The Native SDK for Android receives captions from either of the following:
    </p>
    <ul>
    	<li>Brightcove catalog response (Playback API) : Sidecar WebVTT</li>
    	<li>Video manifest (HLS or DASH) : In-manifest WebVTT</li>
    </ul>
    <p>
      For more information about captions, see the <a href="https://sdks.support.brightcove.com/features/using-captions-brightcove-native-sdks.html">Using Captions with the Brightcove Native SDKs</a> document.
    </p>
  </section>

  <section class="bcls-section">
    <h2 id="Event_sequence">Event sequence</h2>
    <p>
      The Native SDK follows this event sequence associated with captions:
    </p>
    <ol class="bcls-tasklist">
      <li>
        <p>
          Retrieve a video from the Brightcove catalog (ie. <code>catalog.findVideoByID()</code>).
        </p>
      </li>
      <li>
        <p>
          Sidecar captions are parsed from the catalog response and added to the video properties.
        </p>
      </li>
      <li>
        <p>
          At this point, you can retrieve caption sources as follows:
        </p>
        <pre><code class="language-java">video.getProperties().get(Video.Fields.CAPTION_SOURCES);</code></pre>
      </li>
      <li>
        <p>
          Set the video view. The video is added to ExoPlayer.
        </p>
        <pre><code class="language-java">brightcoveVideoView.add(video);</code></pre>
      </li>
      <li>
        <p>
          The Native SDK gets caption sources and emits the following event:
        </p>
        <pre><code class="language-java">EventType.CAPTIONS_LANGUAGES</code></pre>
      </li>
      <li>
        <p>
          After the video is added to ExoPlayer, the Native SDK looks for in-manifest captions. Any captions not already present in the video caption sources are added. If there are new caption sources, the following event is sent to update the Brightcove media controller.
        </p>
        <pre><code class="language-java">EventType.CAPTIONS_LANGUAGES</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Select_captions">Select captions</h2>
    <p>
      Follow these steps to select captions programmatically:
    </p>
    <ol class="bcls-tasklist__restart">
      <li>
        <p>
          Retrieve a video from the Brightcove catalog (ie. <code>catalog.findVideoByID()</code>).
        </p>
      </li>
      <li>
        <p>
          Sidecar captions are parsed from the catalog response and added to the video properties.
        </p>
      </li>
      <li>
        <p>
          At this point, you can retrieve caption sources as follows:
        </p>
        <pre><code class="language-java">video.getProperties().get(Video.Fields.CAPTION_SOURCES);</code></pre>
      </li>
      <li>
        <p>
          Set the video view. The video is added to ExoPlayer.
        </p>
        <pre><code class="language-java">brightcoveVideoView.add(video);</code></pre>
      </li>
      <li>
        <p>
          The Native SDK gets caption sources and emits the following event:
        </p>
        <pre><code class="language-java">EventType.CAPTIONS_LANGUAGES</code></pre>
      </li>
      <li>
        <p>
          After the video is added to ExoPlayer, the Native SDK looks for in-manifest captions. Any captions not already present in the video caption sources are added. If there are new caption sources, the following event is sent to update the Brightcove media controller.
        </p>
        <pre><code class="language-java">EventType.CAPTIONS_LANGUAGES</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
  <h2 id="Steps">Steps</h2>
  <p>
    To play a live stream with <span class="”notranslate”">SSAI</span>, follow these steps:
  </p>

  <ol class="bcls-tasklist__restart">
  	<li><a href="https://support.brightcove.com/node/18748#Creating_a_Live_ad_configuration">Create a live ad configuration</a> using Video Cloud Studio</li>
  	<li>Optional: <a href="https://support.brightcove.com/node/18753#fill_slate">Create slate assets</a>, and/or <a href="https://support.brightcove.com/node/18835">Insert cue points and ad beacons</a></li>
  	<li>
      <a href="#Create_a_live_event">Create a live event</a>
    </li>
    <li>
      <a href="#Get_the_playback_token">Get the playback token</a>
    </li>
    <li>
    <p>Build your app:</p>

    <ul><li><a href="#Android_implementation">Android implementation</a></li>
      <li><a href="#iOS_implementation">iOS implementation</a></li>
      <!-- <li><a href="#tvOS_implementation">tvOS implementation</a></li> -->
    </ul>
  </li>
  <li><a href="https://support.brightcove.com/node/18753#request_ad">Request an ad break</a></li>
  </ol>
  <aside class="bcls-aside bcls-aside--tip">If you prefer, you can use the Live API to create your stream and configure your ad breaks. For details, see the <a href="/node/17763">Live API: Server-Side Ad Insertion (SSAI)</a> document.</aside>
  </section>

  <section class="bcls-section">
  <h2 id="Create_a_live_event">Create a live event</h2>
  <p>
    To create a live event, follow these steps:
  </p>
  <ol class="bcls-tasklist__restart">
    <li>
      Refer to the <a href="https://support.brightcove.com/node/18753#create_event">Implementing Server-Side Ads in the Live Module</a> document.
    </li>
    <li>
      In the <strong>Advanced Options</strong>, make sure you select <strong>Enable Server-Side Ad Insertion (SSAI)</strong>.
    </li>
    <li>
      <p>
        <strong>Optional</strong>: By default, your live stream will use a Brightcove CDN. If you prefer, you can use your own choice of CDN (BYO CDN or "bring your own bandwidth").
      </p>
      <ul>
        <li>
          <p>
            In the <strong>Advanced Options</strong> section, select the <strong>Add multi CDN configuration</strong> option.
          </p>
          <figure class="bcls-figure">
            <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/multiple-cdn.png" alt="Multi CDN Configuration">
            <figcaption class="bcls-caption--image">Multi CDN Configuration</figcaption>
          </figure>
        </li>
        <li>
          Enter a label and URL for your own CDN. For more information about CDNs, see the <a href="node/549/">Content Delivery Options</a> document.
        </li>
      </ul>
    </li>
  </ol>
  </section>

  </article>

  <!-- END DRUPAL CONTENT -->
    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v3.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
  <script>
  $(document).foundation();
  </script>
  <!-- Any scripts specific to page samples should go here -->
  <script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/support-feedback.js"></script><script src="https://learning-services-media.brightcove.com/doc-assets/site-assets/js/site/feedback-docs.js"></script>
</body>

  </html>
