<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <meta name="robots" content="noindex">
  	<!-- change title to match the h1 heading -->
  	<title>Using Live SSAI with the Native SDKs</title>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<h1>Using Live SSAI with the Native SDKs</h1>
      <aside class="bcls-aside bcls-aside--warning">This is a temporary STAGING document for review only. For the official Brightcove documentation site, go to <a href="https://support.brightcove.com/">support.brightcove.com</a></aside>
      <summary>In this topic, you will learn how to play live streams enabled for server-side ad insertion (SSAI) using the Brightcove Native SDKs.</summary>


	    <!-- BEGIN DRUPAL CONTENT -->


  <article class="bcls-article">
  <section class="bcls-section">
  <h2 id="Overview">Overview</h2>
  <p>
    Server-Side Ad Insertion (<span class="”notranslate”">SSAI</span>) allows you to stitch ads into your video content stream to provide a TV-like viewing experience. To play a live stream with the Native SDKs, you need to pass the playback token with your video request.
  </p>

  <p>Live <span class="”notranslate”">SSAI</span> allows you to:</p>

  <ul>
  	<li>Insert ads using cue points sent from your encoder or create an instant cue point using the <span class="notranslate">Live API</span></li>
  	<li>Ingest "slate" assets to fill any unused ad time</li>
  	<li>Avoid ad blockers with ads that are stitched into the live stream on the server side</li>
  </ul>
  </section>

  <section class="bcls-section">
  <h2 id="Steps">Steps</h2>
  <p>
    To play a live stream with <span class="”notranslate”">SSAI</span>, follow these steps:
  </p>

  <ol class="bcls-tasklist__restart">
  	<li><a href="https://support.brightcove.com/node/18748#Creating_a_Live_ad_configuration">Create a live ad configuration</a> using Video Cloud Studio</li>
  	<li>Optional: <a href="https://support.brightcove.com/node/18753#fill_slate">Create slate assets</a>, and/or <a href="https://support.brightcove.com/node/18835">Insert cue points and ad beacons</a></li>
  	<li>
      <p>
        <a href="#Create_a_live_event">Create a live event</a>
      </p>
  </li>
  <li>
    <p>Build your app:</p>

    <ul><li><a href="#Android_implementation">Android implementation</a></li>
      <li><a href="#iOS_implementation">iOS implementation</a></li>
      <!-- <li><a href="#tvOS_implementation">tvOS implementation</a></li> -->
    </ul>
  </li>
  <li><a href="https://support.brightcove.com/node/18753#request_ad">Request an ad break</a></li>
  </ol>
  <aside class="bcls-aside bcls-aside--tip">If you prefer, you can use the Live API to create your stream and configure your ad breaks. For details, see the <a href="/node/17763">Live API: Server-Side Ad Insertion (SSAI)</a> document.</aside>
  </section>

  <section class="bcls-section">
  <h2 id="Create_a_live_event">Create a live event</h2>
  <p>
    To create a live event, follow these steps:
  </p>
  <ol class="bcls-tasklist__restart">
    <li>
      Refer to the <a href="https://support.brightcove.com/node/18753#create_event">Implementing Server-Side Ads in the Live Module</a> document.
    </li>
    <li>
      In the <strong>Advanced Options</strong>, make sure you select <strong>Enable Server-Side Ad Insertion (SSAI)</strong>.
    </li>
    <li>
      <p>
        <strong>Optional</strong>: By default, your live stream will use a Brightcove CDN. If you prefer, you can use your own choice of CDN (BYO CDN or "bring your own bandwidth").
      </p>
      <ul>
        <li>
          <p>
            In the <strong>Advanced Options</strong> section, select the <strong>Add multi CDN configuration</strong> option.
          </p>
          <figure class="bcls-figure">
            <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/multiple-cdn.png" alt="Multi CDN Configuration">
            <figcaption class="bcls-caption--image">Multi CDN Configuration</figcaption>
          </figure>
        </li>
        <li>
          Enter a label and URL for your own CDN. For more information about CDNs, see the <a href="node/549/">Content Delivery Options</a> document.
        </li>
      </ul>
    </li>
  </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Get_the_player_configuration">Get the player configuration</h2>
    <p>
      When you enable SSAI with your live stream, the player embed code will contain an <code>adConfigId</code> parameter. You will use this value when calling the Playback API in your app.
    </p>
    <p>
      To get the player configuration, follow these steps:
    </p>
    <ol class="bcls-tasklist__restart">
      <li>
        In Video Cloud Studio, open the <strong>Live</strong> module.
      </li>
      <li>
        In the left side navigation, select <strong>Player Configuration</strong>.
      </li>
      <li>
        <p>
          <strong>Optional</strong>: In the <strong>Live Player Options</strong> section, expand the <strong>Select Content Delivery Network (CDN)</strong> dropdown menu and select your preferred CDN.
        </p>
        <figure class="bcls-figure">
          <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/select-cdn.png" alt="Select your CDN">
          <figcaption class="bcls-caption--image">Select your CDN</figcaption>
        </figure>
      </li>
      <li>
        <p>
          Copy the <a href="">Standard Embed Code</a> to your clipboard.
        </p>
        <figure class="bcls-figure">
          <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/embed-code.png" alt="Embed code">
          <figcaption class="bcls-caption--image">Embed code</figcaption>
        </figure>
      </li>
      <li>
        <p>
          From the embed code, copy the <code>VideoId</code> and the <code>adConfigId</code> parameter value. You will use these values in a later step. The <code>adConfigId</code> value is the playback token passed when requesting content from your Video Cloud library. It should look similar to this:
        </p>
        <pre><code class="language-html">live.abcdefghijkl_-Bn1234567890abcde</code></pre>
      </li>
      <li>
        You will also need the Account Id and Policy Key for your account.
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Android_implementation">Android implementation</h2>
    <p>
      To play a live stream, you will include the <code>adConfigId</code> parameter and the value of your playback token to your video request.
    </p>
    <p>
      Follow these steps to build your app:
    </p>
    <ol class="bcls-tasklist__restart">
    <li>
      Use the <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSsaiSampleApp">Basic SSAI Sample App</a> as a starting point for your code.
    </li>
    <li>
      In the <strong>res/values/strings.xml</strong> file, replace the following with your own values
      <ul>
        <li>
          Account Id
        </li>
        <li>
          Video Id
        </li>
        <li>
          Policy Key
        </li>
      </ul>
    </li>
    <li>
      <p>
        In the <strong>MainActivity.java</strong> file, replace the <code>ad_config_id</code> value with your playback token (live URL) that you you copied from the Live module in the previous section.
      </p>
      <pre><code class="language-java">private final String AD_CONFIG_ID_QUERY_PARAM_VALUE = &quot;live.abcdefghijkl_-Bn1234567890abcde&quot;;</code></pre>
    </li>
    <li>
      <p>
        The <code>ad_config_id</code> with your playback token value is added to the HTTP request as a query parameter.
      </p>
      <pre class="line-numbers"><code class="language-java">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .addQueryParameter(AD_CONFIG_ID_QUERY_PARAM_KEY, AD_CONFIG_ID_QUERY_PARAM_VALUE)
  .build();
</code></pre>
    </li>
    <li>
      <p>
        Make the catalog call to the Playback API with your live stream video id and the updated HTTP request.
      </p>
      <pre class="line-numbers"><code class="language-java">catalog.findVideoByID(getString(R.string.video_id), httpRequestConfig, new VideoListener() {
   @Override
   public void onVideo(Video video) {
       plugin.processVideo(video);
   }
 });
</code></pre>
    </li>
    <li>
      Your app is ready to play the live stream.
    </li>
  </ol>
  </section>

  <section class="bcls-section">
    <h2 id="iOS_implementation">iOS implementation</h2>
    <p>
      To play a live stream, you will include the <code>adConfigId</code> parameter and the value of your playback token to your video request.
    </p>
    <p>
      Follow these steps to build your app:
    </p>
    <ol class="bcls-tasklist__restart">
    <li>
      Use the <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/BasicSSAIPlayer">Basic SSAI Sample App</a> as a starting point for your code.
    </li>
    <li>
      In the <strong>ViewController.swift</strong> file, replace the following with your own values
      <ul>
        <li>
          Account Id
        </li>
        <li>
          Video Id
        </li>
        <li>
          Policy Key
        </li>
      </ul>
    </li>
    <li>
      <p>
        In the <strong>ViewController.swift</strong> file, replace the <code>AdConfigId</code> value with your playback token (live URL) that you you copied from the Live module in the previous section.
      </p>
      <pre><code class="language-swift">static let AdConfigId = &quot;live.abcdefghijkl_-Bn1234567890abcde&quot;;</code></pre>
    </li>
    <li>
      <p>
        The <code>AdConfigId</code> with your playback token value is added to the HTTP request as a query parameter.
      </p>
      <pre class="line-numbers"><code class="language-swift">let queryParameters = [kBCOVPlaybackServiceParamaterKeyAdConfigId: Constants.AdConfigId]
</code></pre>
    </li>
    <li>
      <p>
        Make the catalog call to the Playback API with your live stream video id and the updated HTTP request.
      </p>
      <pre class="line-numbers"><code class="language-swift">playbackService.findVideo(withVideoID: Constants.VideoId, parameters: queryParameters) { [weak self] (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

   guard let _video = video else {
     print(&quot;ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? &quot;unknown error&quot;)&quot;)
     return
   }

   self?.playbackController?.setVideos([_video] as NSFastEnumeration)
}
</code></pre>
    </li>
    <li>
      Your app is ready to play the live stream.
    </li>
  </ol>
  </section>

  </article>

  <!-- END DRUPAL CONTENT -->
    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v3.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
  <script>
  $(document).foundation();
  </script>
  <!-- Any scripts specific to page samples should go here -->
  <script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
</body>

  </html>
