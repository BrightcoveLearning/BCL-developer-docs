<div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container="">
          

<div class="tabnav">
  <ul class="tabnav-tabs">
    <li><a href="/videocloud/analytics/wiki" class="js-selected-navigation-item tabnav-tab" data-selected-links=" /videocloud/analytics/wiki">Home</a></li>
    <li><a href="/videocloud/analytics/wiki/_pages" class="js-selected-navigation-item tabnav-tab" data-selected-links=" /videocloud/analytics/wiki/_pages">Pages</a></li>
    <li><a href="/videocloud/analytics/wiki/_history" class="js-selected-navigation-item tabnav-tab" data-selected-links=" /videocloud/analytics/wiki/_history">History</a></li>
  </ul>
  <div class="tabnav-right">
    <div class="tabnav-widget">
      <a href="/videocloud/analytics/wiki/_new" class="button minibutton primary js-new-page">New Page</a>
    </div>
  </div>
</div>



<div id="wrapper" class="page">
<div id="head">
  <ul class="actions readability-extra">
    <li class="gollum-minibutton"><a href="/videocloud/analytics/wiki/Analytics-Data-Collection-API/_edit" class="minibutton bigger action-edit-page">
       Edit Page
     </a></li>
    <li class="gollum-minibutton"><a href="/videocloud/analytics/wiki/Analytics-Data-Collection-API/_history" class="minibutton bigger action-page-history">
       Page History
     </a></li>
    <li class="gollum-minibutton"><span class="js-zeroclipboard minibutton" data-clipboard-text="https://bithub.brightcove.com/videocloud/analytics.wiki.git" data-copied-hint="copied!" title="Click to copy url to clipboard">Clone URL</span></li>
  </ul>
  <h1 class="instapaper_title">Analytics Data Collection API</h1>          <aside class="bcls-aside bcls-aside--warning">This version of the Analytics API is obsolete. Please see documentation for the <a href="https://support.brightcove.com/analytics-api">current version</a>.</aside>

</div>
<div id="content">
  <div class="wrap">
  <div id="body" class="gollum-markdown-content instapaper_body">
    <div class="markdown-body">
      <h3>
<a name="content" class="anchor" href="#content"><span class="octicon octicon-link"></span></a>Content</h3>

<ul>
<li>
<a href="#background">Background</a>

<ul>
<li><a href="#dimensions">Dimensions</a></li>
<li><a href="#event-and-domain-parameters"><code>event</code> and <code>domain</code> Parameters</a></li>
<li><a href="#additional-parameters">Additional Parameters</a></li>
<li><a href="#response-types">Response Types</a></li>
</ul>
</li>
<li><a href="#junk-data">Junk Data</a></li>
<li>
<a href="#video-cloud-events">Video Cloud Events</a>

<ul>
<li><a href="#video-cloud-event-parameters">Video Cloud Event Parameters</a></li>
<li><a href="#device_type-and-device_os-parameters"><code>device_type</code> and <code>device_os</code> Parameters</a></li>
<li><a href="#geo-parameters">Geographic data parameters</a></li>
<li><a href="#destination-and-source-parameters"><code>destination</code> and <code>source</code> Parameters</a></li>
<li><a href="#video_engagement-events"><code>video_engagement</code> Events</a></li>
<li><a href="#unprocessed-video-cloud-events">Unprocessed Video Cloud Events</a></li>
<li><a href="#uniques-tracking">Unique user tracking</a></li>
</ul>
</li>
</ul><p><a id="background"></a></p>

<h2>
<a name="background" class="anchor" href="#background"><span class="octicon octicon-link"></span></a>Background</h2>

<p><strong>(This document is intended to be internal-facing for the time being, and to validate expectations current integrations.)</strong></p>



<p>The Analytics Data Collection API is the endpoint for realtime analytics events. Event data is sent to Collector via a series of parameters submitted via HTTP requests, such as: </p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;domain=videocloud&amp;account=123&amp;player=456&amp;video=789
</code></pre>

<p>Simply put, these parameters describe a <strong>fact</strong> about the state of the system when an <strong>event</strong> occurred. The example above describes the fact that a <code>video_view</code> event occurred for video <code>789</code>, in player <code>456</code>, for account <code>123</code> (or: a user started watching account <code>123</code>'s video <code>789</code> in player <code>456</code>. See <a href="#video-cloud-events">below</a> for a description of the current player events).</p>

<p><a id="dimensions"></a></p>

<h4>
<a name="dimensions" class="anchor" href="#dimensions"><span class="octicon octicon-link"></span></a>Dimensions</h4>

<p>Dimensions are qualitative facts about the state of the system when an event occurs. For example, if the request is:</p>

<p><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;domain=videocloud&amp;account=123&amp;player=456&amp;video=789</code></p>

<p>The video's ID (<code>789</code>), the player and account ID (<code>456</code> and <code>123</code> respectively), and any device and location information gleaned from the request itself are all dimensions related to the <code>video_view</code> event. The Analytics system will record that a <code>video_view</code> event occurred when this request was made, with these dimensions.</p>

<p><a id="event-and-domain-parameters"></a></p>

<h4>
<a name="event-and-domain-parameters" class="anchor" href="#event-and-domain-parameters"><span class="octicon octicon-link"></span></a>
<code>event</code> and <code>domain</code> Parameters</h4>

<p>The <code>event</code> parameter describes which event has occurred. The <code>domain</code> parameter namespaces <code>event</code>s. Both <code>event</code> and <code>domain</code> are required parameters (for Video Cloud events, the value of <code>domain</code> is always <code>videocloud</code>). <code>event</code>s are <code>domain</code>-specific; see <a href="#video-cloud-events">Video Cloud Events</a> for events specific to the <code>videocloud</code> domain.</p>

<p><a id="additional-parameters"></a></p>

<h4>
<a name="additional-parameters" class="anchor" href="#additional-parameters"><span class="octicon octicon-link"></span></a>Additional Parameters</h4>

<p>Certain parameters must be included with events so that the Analytics system can successfully analyze them (see <a href="#video-cloud-events">Video Cloud Events</a> for the current AS3/HTML5 instrumentation details). In addition, events may include other name-value pairs that might be useful in the future. These name-value pairs should describe the state of the system when the event occurred and will be persisted with the event, but will not be available through the Analytics Data API unless they have been configured.</p>

<p><a id="response-types"></a></p>

<h4>
<a name="response-types" class="anchor" href="#response-types"><span class="octicon octicon-link"></span></a>Response Types</h4>

<p>The response to an analytics data collection API request is denoted by a HTTP response code and a human-readable message.</p>

<table>
<thead><tr>
<th>HTTP Status Code</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td><code>200</code></td>
<td>The request was successfully received by the collector and has been persisted.</td>
<td><code>{code: 200, message: "success"}</code></td>
</tr>
<tr>
<td><code>400</code></td>
<td>The request sent by the client is missing a required parameter: <code>domain</code>, <code>account</code> or <code>event</code>. (This status will not be returned if domain-specific parameters are missing.)</td>
<td><code>{code: 400, message: "Invalid 'event' parameter"}</code></td>
</tr>
<tr>
<td><code>50x</code></td>
<td>This is error code indicates a problem on the server side. Your event may or may not have been successfully recorded by the analytics system.</td>
<td><code>{code: 500, message: "Server-side failure, please retry."}</code></td>
</tr>
</tbody>
</table><p><a id="junk-data"></a></p>

<h2>
<a name="junk-data" class="anchor" href="#junk-data"><span class="octicon octicon-link"></span></a>Junk Data</h2>

<p>Data verification/checking is limited-to-non-existant at this time, and <strong>in general, data sent to Collector will be recorded as truth by the Analytics system.</strong> If an event contains inappropriate or incorrect information, the Analytics system will interpret the data incorrectly.</p>

<p>For example, if the player integration had a bug where instead of sending the video ID:</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=2621468623001&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=2621468623001</code>)</p>

<p>the player mistakenly sent the current timestamp:</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377190928432&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377190928432</code> instead of <code>video=2621468623001</code>)</p>

<p>Over the course of time, each video_view event would send a different value of id:</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377190928432&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377190928432</code> instead of <code>video=2621468623001</code>)</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377190996333&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377190996333</code> instead of <code>video=2621468623001</code>)</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377191006234&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377191006234</code> instead of <code>video=2621468623001</code>)</p>

<p>etc. </p>

<p>This would cause the Analytics system to count single views for many different "videos", and greatly affect the accuracy of overall summarizations. <strong>Please be careful here.</strong></p>

<p><a id="video-cloud-events"></a></p>

<h2>
<a name="video-cloud-events" class="anchor" href="#video-cloud-events"><span class="octicon octicon-link"></span></a>Video Cloud Events</h2>

<p>The current AS3/HTML5 player instrumentation sends the following events, which are processed by the Analytics system:</p>

<table>
<thead><tr>
<th><code>event</code></th>
<th>Intent/Meaning</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td><code>player_load</code></td>
<td>A player session has been initiated by an end-user. This marks the beginning of the analytics session, and should be sent before any other events.</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=player_load&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;mem=44644&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;player=2125004161001&amp;platform=as3&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200&amp;time=1377191644796</code></td>
</tr>
<tr>
<td><code>video_impression</code></td>
<td>A video has loaded in the player and is ready for playback.</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_impression&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377191644801&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;player=2125004161001&amp;video=2621468623001&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200&amp;platform=as3</code></td>
</tr>
<tr>
<td><code>video_view</code></td>
<td>A video has started playing back (either auto-play after loading, or due to user interaction).</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;player=2125004161001&amp;video=2621468623001&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;video_duration=189&amp;time=1377191666432&amp;mem=73416&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;platform=as3&amp;connectTime=844&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200</code></td>
</tr>
<tr>
<td><a href="#video_engagement-events"><code>video_engagement</code></a></td>
<td>A user watched a range of seconds of a video's timeline. This event is a heartbeat for tracking video engagement and will likely be sent many times during playback, depending on the user interaction and the length of the video. The AS3/HTML5 player instrumentation sends this event every 10 seconds, if playback is not interrupted. <strong>Events describing ranges over 20 seconds are discarded by the Analytics system.</strong>
</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_engagement&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;player=2125004161001&amp;video=2621468623001&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;video_duration=189&amp;time=1377191676589&amp;range=0..9&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;platform=as3&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200</code></td>
</tr>
</tbody>
</table><p><a href="#unprocessed-video-cloud-events">Other events</a> may also be sent, but are not yet available in the API.</p>

<p><a id="video-cloud-event-parameters"></a></p>

<h3>
<a name="video-cloud-event-parameters" class="anchor" href="#video-cloud-event-parameters"><span class="octicon octicon-link"></span></a>Video Cloud Event Parameters</h3>

<p>Parameters for these events should include any information relevant to the current state of the system when the event occurred, and be as specific as possible. For instance, a <code>player_load</code> event occurs in the context of a <code>player</code>, whereas a <code>video_view</code> event occurs in the context of a <code>video</code>, as well as (usually) in the context of a <code>player</code> (SDK playback is a notable exception).</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
<th>Events</th>
</tr></thead>
<tbody>
<tr>
<td><a href="#video-cloud-events"><code>event</code></a></td>
<td>The name of the event</td>
<td>all, required</td>
</tr>
<tr>
<td><code>domain</code></td>
<td><code>videocloud</code></td>
<td>all, required</td>
</tr>
<tr>
<td><code>time</code></td>
<td>End-user timestamp (ms since epoch)</td>
<td>all</td>
</tr>
<tr>
<td><code>account</code></td>
<td>Brightcove account ID</td>
<td>all, required</td>
</tr>
<tr>
<td><code>player</code></td>
<td>Brightcove player ID that originated the event</td>
<td>all</td>
</tr>
<tr>
<td><code>player_name</code></td>
<td>Name of the player specified by the <code>player</code> parameter</td>
<td>all</td>
</tr>
<tr>
<td><code>video</code></td>
<td>Brightcove video ID that originated the event, if there was one</td>
<td>
<code>video_impression</code>, <code>video_view</code>, <code>video_engagement</code>
</td>
</tr>
<tr>
<td><code>video_name</code></td>
<td>Name of the video specified by the <code>video</code> parameter</td>
<td>
<code>video_impression</code>, <code>video_view</code>, <code>video_engagement</code>
</td>
</tr>
<tr>
<td>
<code>video_duration</code>+<code>range</code>; <code>video_seconds_viewed</code>
</td>
<td>The <strong>duration</strong> of the video (in seconds) and the <strong>range</strong> (in the format <code>&lt;start_second&gt;..&lt;end_second&gt;</code>) of seconds viewed; or a count of watched seconds since the last update. See more information about  <a href="#video_engagement-events"><code>video_engagement</code> Events</a> below.</td>
<td><code>video_engagement</code></td>
</tr>
<tr>
<td>
<a href="#destination-and-source-parameters"><code>destination</code></a><br>(formerly <code>embed</code>)</td>
<td>The URI that originated the event</td>
<td>all</td>
</tr>
<tr>
<td><a href="#destination-and-source-parameters"><code>source</code></a></td>
<td>The URI that sent the end-user to the <code>destination</code> URI; if not provided, the Analytics system will treat events as direct traffic for traffic source data.</td>
<td>all</td>
</tr>
<tr>
<td><a href="#device_type-and-device_os-parameters"><code>device_type</code></a></td>
<td>Override to specify the type of the device that originated the event in cases where the User-Agent is unreliable; ignored unless both <code>device_os</code> and <code>device_type</code> are included. <strong>Not typically included.</strong>
</td>
<td>all</td>
</tr>
<tr>
<td><a href="#device_type-and-device_os-parameters"><code>device_os</code></a></td>
<td>Override to specify the OS of the device that originated the event in cases where the User-Agent is unreliable; ignored unless both <code>device_os</code> and <code>device_type</code> are included. <strong>Not typically included.</strong>
</td>
<td>all</td>
</tr>
</tbody>
</table><hr><p><a id="device_type-and-device_os-parameters"></a></p>

<h4>
<a name="device_type-and-device_os-parameters" class="anchor" href="#device_type-and-device_os-parameters"><span class="octicon octicon-link"></span></a>
<code>device_type</code> and <code>device_os</code> Parameters</h4>

<p>By default, the Analytics system will attempt to detect device type and OS information from the User-Agent header. If <strong>both</strong> <code>device_type</code> and <code>device_os</code> are sent, the information from the User-Agent header will be ignored in favor of <code>device_type</code> and <code>device_os</code>. <strong>In most cases, <code>device_type</code> and <code>device_os</code> are not required</strong> -- this override should only be used if the User-Agent is unreliable or otherwise not available.</p>

<p>The following values are permitted when specifying device information:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>device_type</code></td>
<td>
<code>mobile</code> <code>tablet</code> <code>tv</code> <code>desktop</code> <code>other</code>
</td>
</tr>
<tr>
<td><code>device_os</code></td>
<td>
<code>android</code> <code>bada</code> <code>ios</code> <code>rim</code> <code>symbian</code> <code>web_os</code> <code>windows</code> <code>os_x</code> <code>mac</code> <code>linux</code> <code>other</code>
</td>
</tr>
</tbody>
</table><p>The Analytics system will record <code>other</code> if a request includes unrecognized values for device parameter overrides.</p>

<hr><p><a id="geo-parameters"></a></p>

<h4>
<a name="geographic-data-parameters" class="anchor" href="#geographic-data-parameters"><span class="octicon octicon-link"></span></a>Geographic data Parameters</h4>

<p>By default, the Analytics system will attempt to detect device type and OS information from the Remote ip address. This behaviour can be overridden by passing <code>country</code>, <code>country_name</code>, <code>region</code>, <code>region_name</code>, <code>city</code> and <code>dma</code> parameters. <strong>In most cases, these parameters are not required</strong> -- this override should only be used if the remote ip address is unreliable or otherwise not available.</p>

<p>The following values are permitted when specifying device information:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>country</code></td>
<td>ISO-3166 (alpha 2) country code, eg: US</td>
</tr>
<tr>
<td><code>country_name</code></td>
<td>Human readable country name, eg: United States</td>
</tr>
<tr>
<td><code>region</code></td>
<td>ISO-3166 (alpha 2) region code, eg: US-WA for Washington, US</td>
</tr>
<tr>
<td><code>region_name</code></td>
<td>Human readable region name, eg: Washington</td>
</tr>
<tr>
<td><code>city</code></td>
<td>City name, eg: Seattle</td>
</tr>
<tr>
<td><code>dma</code></td>
<td>numeric DMA code (if applicable)</td>
</tr>
</tbody>
</table><p>The Analytics system will record <code>ZZ</code> or 'unknown' if a request includes unrecognized values for overrides.</p>

<hr><p><a id="destination-and-source-parameters"></a></p>

<h4><a name="destination-and-source-parameters" class="anchor" href="#destination-and-source-parameters"><span class="octicon octicon-link"></span></a>
<code>destination</code> and <code>source</code> Parameters</h4>

<p>The <code>destination</code> and <code>source</code> parameters provide the URI that originated the event (<code>destination</code>) and the URI that sent the user there (<code>source</code>). </p>

<p>The <code>source</code> parameter is used to determine traffic source information. If <code>source</code> is not specified, the Analytics system will treat events as being initiated by direct traffic.</p>

<p>The <code>destination</code> parameter will be used to determine traffic destination information -- that is, where the video is being watched. (Note: the destinations feature is forthcoming, but <code>destination</code> should be sent so that it can be properly backfilled by the Analytics system when the feature is complete.)</p>

<p>During web playback, the URL in the address bar of the page where the video is playing is the <code>destination</code>), and the <code>source</code> is the referrer (<code>top.document.referrer</code>).</p>

<p>For example, when searching for "nytimes" on Google and watching a video on the homepage after clicking through:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>source</code></td>
<td><a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CDYQFjAA&amp;url=http%3A%2F%2Fwww.nytimes.com%2F&amp;ei=oEYWUtCgEIXq9ATznoCgCQ&amp;usg=AFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw&amp;bvm=bv.51156542,d.dmg">http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CDYQFjAA&amp;url=http%3A%2F%2Fwww.nytimes.com%2F&amp;ei=oEYWUtCgEIXq9ATznoCgCQ&amp;usg=AFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw&amp;bvm=bv.51156542,d.dmg</a></td>
</tr>
<tr>
<td><code>destination</code></td>
<td><a href="http://www.nytimes.com/">http://www.nytimes.com/</a></td>
</tr>
</tbody>
</table><p>If there is no URL (as in the case of native playback, for example), both <code>destination</code> and <code>source</code> should be valid URIs that identify where the video is playing back and how the user got there, respectively.</p>

<p>Assuming the <code>destination</code> is a <a href="http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax">valid URI</a>: </p>

<pre><code>&lt;scheme name&gt; : &lt;hierarchical part&gt; [ ? &lt;query&gt; ] [ # &lt;fragment&gt; ]

ex. https://www.example.com/foo/bar/baz
            \-------------/\----------/
                 |             |
             authority        path
    \---/   \------------------------/
      |                |
    scheme       hierarchical part
</code></pre>

<p>the Analytics system will handle it as follows:</p>

<p>If the URI contains an <strong>authority</strong>, the API response will use that authority as the <code>destination_domain</code> and any path provided as the <code>destination_path</code>. If the URI does <strong>not</strong> contain an authority, the API response will use the first part of the path as the <code>destination_domain</code>, and the remaining path as the <code>destination_path</code>. A <code>destination</code> without a hierarchical part (e.g. just a scheme) is considered invalid, as is any value without a scheme. See the documentation on <a href="Destination-Dimensions">destination data in the API</a> for more information and examples.</p>

<hr><p><a id="video_engagement-events"></a></p>

<h4><a name="video_engagment-events" class="anchor" href="#video_engagment-events"><span class="octicon octicon-link"></span></a>
<code>video_engagment</code> Events</h4>

<p>The <code>video_engagement</code> event is a means of tracking video engagement while a video is playing back, and will likely be sent many times during playback. (The AS3/HTML5 player instrumentation sends this event every 10 seconds, if playback is not interrupted.) <strong>At present, events describing ranges over 20 seconds are discarded by the Analytics system, so it is necessary to send these events more frequently.</strong> </p>

<p>There are two forms that a <code>video_engagement</code> event can take (other parameters omitted for brevity):</p>

<table>
<thead><tr>
<th>Example</th>
<th>Meaning</th>
</tr></thead>
<tbody>
<tr>
<td><code>event=video_engagement&amp;video=123&amp;video_duration=75&amp;range=0..9</code></td>
<td>Video <code>123</code> with a duration of 75 seconds played seconds 0 through 9 (for a total of 10 seconds viewed).</td>
</tr>
<tr>
<td><code>event=video_engagement&amp;video=123&amp;video_seconds_viewed=10</code></td>
<td>10 seconds of video <code>123</code> were viewed.</td>
</tr>
</tbody>
</table><p>While both versions track viewed seconds, the version that includes <code>video_duration</code> and <code>range</code> also contains information necessary to calculate additional engagement data, and is <strong>the preferred way</strong> to send <code>video_engagement</code> event data to the Analytics system. In  cases where the video's timeline is continually changing during playback or is otherwise unreliable (e.g. live video playback, but not initial duration instability that may happen when a VOD video first loads), <code>video_seconds_viewed</code> may be the only data available, but in all other cases the <code>video_enagement</code> event should include <code>video_duration</code> and <code>range</code>.</p>

<table>
<thead><tr>
<th>Parameters</th>
<th>Derived engagement metrics (API)</th>
</tr></thead>
<tbody>
<tr>
<td>
<code>video_duration</code>,<code>range</code>
</td>
<td>
<code>video_seconds_viewed</code>, <code>video_percent_viewed</code>, <code>engagement_score</code>; engagement curve data</td>
</tr>
<tr>
<td><code>video_seconds_viewed</code></td>
<td><code>video_seconds_viewed</code></td>
</tr>
</tbody>
</table><p>If all three parameters (<code>video_duration</code>, <code>range</code> and <code>video_seconds_viewed</code>) are sent along with a <code>video_engagement</code> event, the Analytics system will calculate engagement metrics from the <code>video_duration</code>+<code>range</code> parameters.</p>

<p>See the <a href="Analytics-Data-API">Analytics Data API documentation</a> for more information about these metrics.</p>

<hr><p><a id="unprocessed-video-cloud-events"></a></p>

<h3>
<a name="unprocessed-video-cloud-events" class="anchor" href="#unprocessed-video-cloud-events"><span class="octicon octicon-link"></span></a>Unprocessed Video Cloud Events</h3>

<p>The current HTML5/AS3 player instrumentation sends events and parameters that are not currently interpreted by the Analytics system, but may be at some point in the future. These events, although not currently processed, will be persisted in the logs:</p>

<table>
<thead><tr>
<th><code>event</code></th>
<th>Intent/Meaning</th>
</tr></thead>
<tbody>
<tr>
<td><code>video_complete</code></td>
<td>A video that was playing back has finished (e.g. the end of the video was reached and playback stopped).</td>
</tr>
<tr>
<td><code>media_connect_error</code></td>
<td>There was a media connect error.</td>
</tr>
<tr>
<td><code>domain_restriction_error</code></td>
<td>There was a domain restriction error.</td>
</tr>
<tr>
<td><code>bc_menu_share_email</code></td>
<td>A user emailed a video from the player "Share" screen. <strong>Note:</strong> ideally these types of events would be replaced with click tracking events.</td>
</tr>
<tr>
<td><code>bc_share_clipboard</code></td>
<td>A user copied the URL for the video from the player "Share" screen. <strong>Note:</strong> ideally these types of events would be replaced with click tracking events.</td>
</tr>
</tbody>
</table><p>The current set of processed events is not exhaustive: for instance, tracking click events in the player would allow us to track all sorts of useful things beyond the current scope. </p>

<p>Similarly, the following parameters may be sent and are not currently processed but will be persisted in the logs:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>platform</code></td>
<td>
<code>as3</code> or <code>html5</code>, for the current AS3/HTML5 player implementation</td>
</tr>
<tr>
<td><code>flash_version</code></td>
<td>The Flash player version (only sent in the AS3 player implementation)</td>
</tr>
<tr>
<td><code>playlist</code></td>
<td>The playlist ID that originated this event.</td>
</tr>
<tr>
<td><code>connectTime</code></td>
<td>(only sent in the AS3 player implementation)</td>
</tr>
<tr>
<td><code>mem</code></td>
<td>(only sent in the AS3 player implementation)</td>
</tr>
</tbody>
</table><h2></h2>

<p><a id="uniques-tracking"></a></p>

<h3>
<a name="unique-user-tracking" class="anchor" href="#unique-user-tracking"><span class="octicon octicon-link"></span></a>Unique user tracking</h3>

<ul>
<li>To enable tracking the client application or player should include <code>cookies_enabled=true</code> parameter in the <code>GET</code> request to the analytics events collector.</li>
<li>To disable cookie tracking, include <code>cookies_enabled=false</code> or not pass a <code>cookies_enabled</code> parameter in the <code>GET</code> request.</li>
<li>The collector will now include a <code>Set-Cookie</code> header with the cookie <code>bcau</code> with a unique identifier for the user.</li>
<li>In cases where it is not possible to set/store cookies, the client application may send back an override user identifier ( such as the device UUID ) as the <code>user</code> query parameter.</li>
<li>If a <code>user</code> parameter is specified, we WILL track the user.</li>
</ul><p>For implementation details: <a href="Unique-user-tracking">Unique user tracking</a></p>

<hr><p>For more information (or help figuring out how best to track these things), please talk to RNA.</p>
    </div>
  </div>
  </div>

</div>
<div id="gollum-footer">
  <p id="last-edit">
    Last edited by Ankur Chauhan, <time class="js-relative-date" datetime="2014-02-03T18:47:33+00:00" title="2014-02-03 18:47:33">2 months ago</time>
  </p>
</div>
</div>


        </div>
        
 <h1 class="instapaper_title">Analytics Data Collection API</h1>          <aside class="bcls-aside bcls-aside--warning">This version of the Analytics API is obsolete. Please see documentation for the <a href="https://support.brightcove.com/analytics-api">current version</a>.</aside>

</div>
<div id="content">
  <div class="wrap">
  <div id="body" class="gollum-markdown-content instapaper_body">
    <div class="markdown-body">
      <h3>
<a name="content" class="anchor" href="#content"><span class="octicon octicon-link"></span></a>Content</h3>

<ul>
<li>
<a href="#background">Background</a>

<ul>
<li><a href="#dimensions">Dimensions</a></li>
<li><a href="#event-and-domain-parameters"><code>event</code> and <code>domain</code> Parameters</a></li>
<li><a href="#additional-parameters">Additional Parameters</a></li>
<li><a href="#response-types">Response Types</a></li>
</ul>
</li>
<li><a href="#junk-data">Junk Data</a></li>
<li>
<a href="#video-cloud-events">Video Cloud Events</a>

<ul>
<li><a href="#video-cloud-event-parameters">Video Cloud Event Parameters</a></li>
<li><a href="#device_type-and-device_os-parameters"><code>device_type</code> and <code>device_os</code> Parameters</a></li>
<li><a href="#geo-parameters">Geographic data parameters</a></li>
<li><a href="#destination-and-source-parameters"><code>destination</code> and <code>source</code> Parameters</a></li>
<li><a href="#video_engagement-events"><code>video_engagement</code> Events</a></li>
<li><a href="#unprocessed-video-cloud-events">Unprocessed Video Cloud Events</a></li>
<li><a href="#uniques-tracking">Unique user tracking</a></li>
</ul>
</li>
</ul><p><a id="background"></a></p>

<h2>
<a name="background" class="anchor" href="#background"><span class="octicon octicon-link"></span></a>Background</h2>

<p><strong>(This document is intended to be internal-facing for the time being, and to validate expectations current integrations.)</strong></p>



<p>The Analytics Data Collection API is the endpoint for realtime analytics events. Event data is sent to Collector via a series of parameters submitted via HTTP requests, such as: </p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;domain=videocloud&amp;account=123&amp;player=456&amp;video=789
</code></pre>

<p>Simply put, these parameters describe a <strong>fact</strong> about the state of the system when an <strong>event</strong> occurred. The example above describes the fact that a <code>video_view</code> event occurred for video <code>789</code>, in player <code>456</code>, for account <code>123</code> (or: a user started watching account <code>123</code>'s video <code>789</code> in player <code>456</code>. See <a href="#video-cloud-events">below</a> for a description of the current player events).</p>

<p><a id="dimensions"></a></p>

<h4>
<a name="dimensions" class="anchor" href="#dimensions"><span class="octicon octicon-link"></span></a>Dimensions</h4>

<p>Dimensions are qualitative facts about the state of the system when an event occurs. For example, if the request is:</p>

<p><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;domain=videocloud&amp;account=123&amp;player=456&amp;video=789</code></p>

<p>The video's ID (<code>789</code>), the player and account ID (<code>456</code> and <code>123</code> respectively), and any device and location information gleaned from the request itself are all dimensions related to the <code>video_view</code> event. The Analytics system will record that a <code>video_view</code> event occurred when this request was made, with these dimensions.</p>

<p><a id="event-and-domain-parameters"></a></p>

<h4>
<a name="event-and-domain-parameters" class="anchor" href="#event-and-domain-parameters"><span class="octicon octicon-link"></span></a>
<code>event</code> and <code>domain</code> Parameters</h4>

<p>The <code>event</code> parameter describes which event has occurred. The <code>domain</code> parameter namespaces <code>event</code>s. Both <code>event</code> and <code>domain</code> are required parameters (for Video Cloud events, the value of <code>domain</code> is always <code>videocloud</code>). <code>event</code>s are <code>domain</code>-specific; see <a href="#video-cloud-events">Video Cloud Events</a> for events specific to the <code>videocloud</code> domain.</p>

<p><a id="additional-parameters"></a></p>

<h4>
<a name="additional-parameters" class="anchor" href="#additional-parameters"><span class="octicon octicon-link"></span></a>Additional Parameters</h4>

<p>Certain parameters must be included with events so that the Analytics system can successfully analyze them (see <a href="#video-cloud-events">Video Cloud Events</a> for the current AS3/HTML5 instrumentation details). In addition, events may include other name-value pairs that might be useful in the future. These name-value pairs should describe the state of the system when the event occurred and will be persisted with the event, but will not be available through the Analytics Data API unless they have been configured.</p>

<p><a id="response-types"></a></p>

<h4>
<a name="response-types" class="anchor" href="#response-types"><span class="octicon octicon-link"></span></a>Response Types</h4>

<p>The response to an analytics data collection API request is denoted by a HTTP response code and a human-readable message.</p>

<table>
<thead><tr>
<th>HTTP Status Code</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td><code>200</code></td>
<td>The request was successfully received by the collector and has been persisted.</td>
<td><code>{code: 200, message: "success"}</code></td>
</tr>
<tr>
<td><code>400</code></td>
<td>The request sent by the client is missing a required parameter: <code>domain</code>, <code>account</code> or <code>event</code>. (This status will not be returned if domain-specific parameters are missing.)</td>
<td><code>{code: 400, message: "Invalid 'event' parameter"}</code></td>
</tr>
<tr>
<td><code>50x</code></td>
<td>This is error code indicates a problem on the server side. Your event may or may not have been successfully recorded by the analytics system.</td>
<td><code>{code: 500, message: "Server-side failure, please retry."}</code></td>
</tr>
</tbody>
</table><p><a id="junk-data"></a></p>

<h2>
<a name="junk-data" class="anchor" href="#junk-data"><span class="octicon octicon-link"></span></a>Junk Data</h2>

<p>Data verification/checking is limited-to-non-existant at this time, and <strong>in general, data sent to Collector will be recorded as truth by the Analytics system.</strong> If an event contains inappropriate or incorrect information, the Analytics system will interpret the data incorrectly. </p>

<p>For example, if the player integration had a bug where instead of sending the video ID:</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=2621468623001&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=2621468623001</code>)</p>

<p>the player mistakenly sent the current timestamp:</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377190928432&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377190928432</code> instead of <code>video=2621468623001</code>)</p>

<p>Over the course of time, each video_view event would send a different value of id:</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377190928432&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377190928432</code> instead of <code>video=2621468623001</code>)</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377190996333&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377190996333</code> instead of <code>video=2621468623001</code>)</p>

<pre><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;video=1377191006234&amp;platform=as3&amp;account=1749339200&amp;player=2125004161001&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377190768323&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;video_duration=189
</code></pre>

<p>(<code>video=1377191006234</code> instead of <code>video=2621468623001</code>)</p>

<p>etc. </p>

<p>This would cause the Analytics system to count single views for many different "videos", and greatly affect the accuracy of overall summarizations. <strong>Please be careful here.</strong></p>

<p><a id="video-cloud-events"></a></p>

<h2>
<a name="video-cloud-events" class="anchor" href="#video-cloud-events"><span class="octicon octicon-link"></span></a>Video Cloud Events</h2>

<p>The current AS3/HTML5 player instrumentation sends the following events, which are processed by the Analytics system:</p>

<table>
<thead><tr>
<th><code>event</code></th>
<th>Intent/Meaning</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td><code>player_load</code></td>
<td>A player session has been initiated by an end-user. This marks the beginning of the analytics session, and should be sent before any other events.</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=player_load&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;mem=44644&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;player=2125004161001&amp;platform=as3&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200&amp;time=1377191644796</code></td>
</tr>
<tr>
<td><code>video_impression</code></td>
<td>A video has loaded in the player and is ready for playback.</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_impression&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;time=1377191644801&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;player=2125004161001&amp;video=2621468623001&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200&amp;platform=as3</code></td>
</tr>
<tr>
<td><code>video_view</code></td>
<td>A video has started playing back (either auto-play after loading, or due to user interaction).</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_view&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;player=2125004161001&amp;video=2621468623001&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;video_duration=189&amp;time=1377191666432&amp;mem=73416&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;platform=as3&amp;connectTime=844&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200</code></td>
</tr>
<tr>
<td><a href="#video_engagement-events"><code>video_engagement</code></a></td>
<td>A user watched a range of seconds of a video's timeline. This event is a heartbeat for tracking video engagement and will likely be sent many times during playback, depending on the user interaction and the length of the video. The AS3/HTML5 player instrumentation sends this event every 10 seconds, if playback is not interrupted. <strong>Events describing ranges over 20 seconds are discarded by the Analytics system.</strong>
</td>
<td><code>http://metrics.aws-qa.rnatest.brightcove.com/tracker?event=video_engagement&amp;destination=http%3A%2F%2Fwww.nytimes.com%2F&amp;player_name=ADX%20Enabled%20Basic%20Chromeless%20Player%20(black%20bkg%20and%20hidden%20menu%20onload)&amp;player=2125004161001&amp;video=2621468623001&amp;video_name=Democratic%20Rivals%20Target%20Bill%20de%20Blasio&amp;video_duration=189&amp;time=1377191676589&amp;range=0..9&amp;source=http%3A%2F%2Fwww.google.com%2Furl%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26ved%3D0CDYQFjAA%26url%3Dhttp%253A%252F%252Fwww.nytimes.com%252F%26ei%3DoEYWUtCgEIXq9ATznoCgCQ%26usg%3DAFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw%26bvm%3Dbv.51156542%2Cd.dmg&amp;platform=as3&amp;domain=videocloud&amp;flash_version=MAC%2011%2C8%2C800%2C94&amp;account=1749339200</code></td>
</tr>
</tbody>
</table><p><a href="#unprocessed-video-cloud-events">Other events</a> may also be sent, but are not yet available in the API.</p>

<p><a id="video-cloud-event-parameters"></a></p>

<h3>
<a name="video-cloud-event-parameters" class="anchor" href="#video-cloud-event-parameters"><span class="octicon octicon-link"></span></a>Video Cloud Event Parameters</h3>

<p>Parameters for these events should include any information relevant to the current state of the system when the event occurred, and be as specific as possible. For instance, a <code>player_load</code> event occurs in the context of a <code>player</code>, whereas a <code>video_view</code> event occurs in the context of a <code>video</code>, as well as (usually) in the context of a <code>player</code> (SDK playback is a notable exception).</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
<th>Events</th>
</tr></thead>
<tbody>
<tr>
<td><a href="#video-cloud-events"><code>event</code></a></td>
<td>The name of the event</td>
<td>all, required</td>
</tr>
<tr>
<td><code>domain</code></td>
<td><code>videocloud</code></td>
<td>all, required</td>
</tr>
<tr>
<td><code>time</code></td>
<td>End-user timestamp (ms since epoch)</td>
<td>all</td>
</tr>
<tr>
<td><code>account</code></td>
<td>Brightcove account ID</td>
<td>all, required</td>
</tr>
<tr>
<td><code>player</code></td>
<td>Brightcove player ID that originated the event</td>
<td>all</td>
</tr>
<tr>
<td><code>player_name</code></td>
<td>Name of the player specified by the <code>player</code> parameter</td>
<td>all</td>
</tr>
<tr>
<td><code>video</code></td>
<td>Brightcove video ID that originated the event, if there was one</td>
<td>
<code>video_impression</code>, <code>video_view</code>, <code>video_engagement</code>
</td>
</tr>
<tr>
<td><code>video_name</code></td>
<td>Name of the video specified by the <code>video</code> parameter</td>
<td>
<code>video_impression</code>, <code>video_view</code>, <code>video_engagement</code>
</td>
</tr>
<tr>
<td>
<code>video_duration</code>+<code>range</code>; <code>video_seconds_viewed</code>
</td>
<td>The <strong>duration</strong> of the video (in seconds) and the <strong>range</strong> (in the format <code>&lt;start_second&gt;..&lt;end_second&gt;</code>) of seconds viewed; or a count of watched seconds since the last update. See more information about  <a href="#video_engagement-events"><code>video_engagement</code> Events</a> below.</td>
<td><code>video_engagement</code></td>
</tr>
<tr>
<td>
<a href="#destination-and-source-parameters"><code>destination</code></a><br>(formerly <code>embed</code>)</td>
<td>The URI that originated the event</td>
<td>all</td>
</tr>
<tr>
<td><a href="#destination-and-source-parameters"><code>source</code></a></td>
<td>The URI that sent the end-user to the <code>destination</code> URI; if not provided, the Analytics system will treat events as direct traffic for traffic source data.</td>
<td>all</td>
</tr>
<tr>
<td><a href="#device_type-and-device_os-parameters"><code>device_type</code></a></td>
<td>Override to specify the type of the device that originated the event in cases where the User-Agent is unreliable; ignored unless both <code>device_os</code> and <code>device_type</code> are included. <strong>Not typically included.</strong>
</td>
<td>all</td>
</tr>
<tr>
<td><a href="#device_type-and-device_os-parameters"><code>device_os</code></a></td>
<td>Override to specify the OS of the device that originated the event in cases where the User-Agent is unreliable; ignored unless both <code>device_os</code> and <code>device_type</code> are included. <strong>Not typically included.</strong>
</td>
<td>all</td>
</tr>
</tbody>
</table><hr><p><a id="device_type-and-device_os-parameters"></a></p>

<h4>
<a name="device_type-and-device_os-parameters" class="anchor" href="#device_type-and-device_os-parameters"><span class="octicon octicon-link"></span></a>
<code>device_type</code> and <code>device_os</code> Parameters</h4>

<p>By default, the Analytics system will attempt to detect device type and OS information from the User-Agent header. If <strong>both</strong> <code>device_type</code> and <code>device_os</code> are sent, the information from the User-Agent header will be ignored in favor of <code>device_type</code> and <code>device_os</code>. <strong>In most cases, <code>device_type</code> and <code>device_os</code> are not required</strong> -- this override should only be used if the User-Agent is unreliable or otherwise not available.</p>

<p>The following values are permitted when specifying device information:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>device_type</code></td>
<td>
<code>mobile</code> <code>tablet</code> <code>tv</code> <code>desktop</code> <code>other</code>
</td>
</tr>
<tr>
<td><code>device_os</code></td>
<td>
<code>android</code> <code>bada</code> <code>ios</code> <code>rim</code> <code>symbian</code> <code>web_os</code> <code>windows</code> <code>os_x</code> <code>mac</code> <code>linux</code> <code>other</code>
</td>
</tr>
</tbody>
</table><p>The Analytics system will record <code>other</code> if a request includes unrecognized values for device parameter overrides.</p>

<hr><p><a id="geo-parameters"></a></p>

<h4>
<a name="geographic-data-parameters" class="anchor" href="#geographic-data-parameters"><span class="octicon octicon-link"></span></a>Geographic data Parameters</h4>

<p>By default, the Analytics system will attempt to detect device type and OS information from the Remote ip address. This behaviour can be overridden by passing <code>country</code>, <code>country_name</code>, <code>region</code>, <code>region_name</code>, <code>city</code> and <code>dma</code> parameters. <strong>In most cases, these parameters are not required</strong> -- this override should only be used if the remote ip address is unreliable or otherwise not available.</p>

<p>The following values are permitted when specifying device information:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>country</code></td>
<td>ISO-3166 (alpha 2) country code, eg: US</td>
</tr>
<tr>
<td><code>country_name</code></td>
<td>Human readable country name, eg: United States</td>
</tr>
<tr>
<td><code>region</code></td>
<td>ISO-3166 (alpha 2) region code, eg: US-WA for Washington, US</td>
</tr>
<tr>
<td><code>region_name</code></td>
<td>Human readable region name, eg: Washington</td>
</tr>
<tr>
<td><code>city</code></td>
<td>City name, eg: Seattle</td>
</tr>
<tr>
<td><code>dma</code></td>
<td>numeric DMA code (if applicable)</td>
</tr>
</tbody>
</table><p>The Analytics system will record <code>ZZ</code> or 'unknown' if a request includes unrecognized values for overrides.</p>

<hr><p><a id="destination-and-source-parameters"></a></p>

<h4>
<a name="destination-and-source-parameters" class="anchor" href="#destination-and-source-parameters"><span class="octicon octicon-link"></span></a>
<code>destination</code> and <code>source</code> Parameters</h4>

<p>The <code>destination</code> and <code>source</code> parameters provide the URI that originated the event (<code>destination</code>) and the URI that sent the user there (<code>source</code>). </p>

<p>The <code>source</code> parameter is used to determine traffic source information. If <code>source</code> is not specified, the Analytics system will treat events as being initiated by direct traffic.</p>

<p>The <code>destination</code> parameter will be used to determine traffic destination information -- that is, where the video is being watched. (Note: the destinations feature is forthcoming, but <code>destination</code> should be sent so that it can be properly backfilled by the Analytics system when the feature is complete.)</p>

<p>During web playback, the URL in the address bar of the page where the video is playing is the <code>destination</code>), and the <code>source</code> is the referrer (<code>top.document.referrer</code>).</p>

<p>For example, when searching for "nytimes" on Google and watching a video on the homepage after clicking through:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>source</code></td>
<td><a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CDYQFjAA&amp;url=http%3A%2F%2Fwww.nytimes.com%2F&amp;ei=oEYWUtCgEIXq9ATznoCgCQ&amp;usg=AFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw&amp;bvm=bv.51156542,d.dmg">http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CDYQFjAA&amp;url=http%3A%2F%2Fwww.nytimes.com%2F&amp;ei=oEYWUtCgEIXq9ATznoCgCQ&amp;usg=AFQjCNEtLodOdxWZSGdJpL7WJaEeUJVlnw&amp;bvm=bv.51156542,d.dmg</a></td>
</tr>
<tr>
<td><code>destination</code></td>
<td><a href="http://www.nytimes.com/">http://www.nytimes.com/</a></td>
</tr>
</tbody>
</table><p>If there is no URL (as in the case of native playback, for example), both <code>destination</code> and <code>source</code> should be valid URIs that identify where the video is playing back and how the user got there, respectively.</p>

<p>Assuming the <code>destination</code> is a <a href="http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax">valid URI</a>: </p>

<pre><code>&lt;scheme name&gt; : &lt;hierarchical part&gt; [ ? &lt;query&gt; ] [ # &lt;fragment&gt; ]

ex. https://www.example.com/foo/bar/baz
            \-------------/\----------/
                 |             |
             authority        path
    \---/   \------------------------/
      |                |
    scheme       hierarchical part
</code></pre>

<p>the Analytics system will handle it as follows:</p>

<p>If the URI contains an <strong>authority</strong>, the API response will use that authority as the <code>destination_domain</code> and any path provided as the <code>destination_path</code>. If the URI does <strong>not</strong> contain an authority, the API response will use the first part of the path as the <code>destination_domain</code>, and the remaining path as the <code>destination_path</code>. A <code>destination</code> without a hierarchical part (e.g. just a scheme) is considered invalid, as is any value without a scheme. See the documentation on <a href="Destination-Dimensions">destination data in the API</a> for more information and examples.</p>

<hr><p><a id="video_engagement-events"></a></p>

<h4>
<a name="video_engagment-events" class="anchor" href="#video_engagment-events"><span class="octicon octicon-link"></span></a>
<code>video_engagment</code> Events</h4>

<p>The <code>video_engagement</code> event is a means of tracking video engagement while a video is playing back, and will likely be sent many times during playback. (The AS3/HTML5 player instrumentation sends this event every 10 seconds, if playback is not interrupted.) <strong>At present, events describing ranges over 20 seconds are discarded by the Analytics system, so it is necessary to send these events more frequently.</strong> </p>

<p>There are two forms that a <code>video_engagement</code> event can take (other parameters omitted for brevity):</p>

<table>
<thead><tr>
<th>Example</th>
<th>Meaning</th>
</tr></thead>
<tbody>
<tr>
<td><code>event=video_engagement&amp;video=123&amp;video_duration=75&amp;range=0..9</code></td>
<td>Video <code>123</code> with a duration of 75 seconds played seconds 0 through 9 (for a total of 10 seconds viewed).</td>
</tr>
<tr>
<td><code>event=video_engagement&amp;video=123&amp;video_seconds_viewed=10</code></td>
<td>10 seconds of video <code>123</code> were viewed.</td>
</tr>
</tbody>
</table><p>While both versions track viewed seconds, the version that includes <code>video_duration</code> and <code>range</code> also contains information necessary to calculate additional engagement data, and is <strong>the preferred way</strong> to send <code>video_engagement</code> event data to the Analytics system. In  cases where the video's timeline is continually changing during playback or is otherwise unreliable (e.g. live video playback, but not initial duration instability that may happen when a VOD video first loads), <code>video_seconds_viewed</code> may be the only data available, but in all other cases the <code>video_enagement</code> event should include <code>video_duration</code> and <code>range</code>.</p>

<table>
<thead><tr>
<th>Parameters</th>
<th>Derived engagement metrics (API)</th>
</tr></thead>
<tbody>
<tr>
<td>
<code>video_duration</code>,<code>range</code>
</td>
<td>
<code>video_seconds_viewed</code>, <code>video_percent_viewed</code>, <code>engagement_score</code>; engagement curve data</td>
</tr>
<tr>
<td><code>video_seconds_viewed</code></td>
<td><code>video_seconds_viewed</code></td>
</tr>
</tbody>
</table><p>If all three parameters (<code>video_duration</code>, <code>range</code> and <code>video_seconds_viewed</code>) are sent along with a <code>video_engagement</code> event, the Analytics system will calculate engagement metrics from the <code>video_duration</code>+<code>range</code> parameters.</p>

<p>See the <a href="Analytics-Data-API">Analytics Data API documentation</a> for more information about these metrics.</p>

<hr><p><a id="unprocessed-video-cloud-events"></a></p>

<h3>
<a name="unprocessed-video-cloud-events" class="anchor" href="#unprocessed-video-cloud-events"><span class="octicon octicon-link"></span></a>Unprocessed Video Cloud Events</h3>

<p>The current HTML5/AS3 player instrumentation sends events and parameters that are not currently interpreted by the Analytics system, but may be at some point in the future. These events, although not currently processed, will be persisted in the logs:</p>

<table>
<thead><tr>
<th><code>event</code></th>
<th>Intent/Meaning</th>
</tr></thead>
<tbody>
<tr>
<td><code>video_complete</code></td>
<td>A video that was playing back has finished (e.g. the end of the video was reached and playback stopped).</td>
</tr>
<tr>
<td><code>media_connect_error</code></td>
<td>There was a media connect error.</td>
</tr>
<tr>
<td><code>domain_restriction_error</code></td>
<td>There was a domain restriction error.</td>
</tr>
<tr>
<td><code>bc_menu_share_email</code></td>
<td>A user emailed a video from the player "Share" screen. <strong>Note:</strong> ideally these types of events would be replaced with click tracking events.</td>
</tr>
<tr>
<td><code>bc_share_clipboard</code></td>
<td>A user copied the URL for the video from the player "Share" screen. <strong>Note:</strong> ideally these types of events would be replaced with click tracking events.</td>
</tr>
</tbody>
</table><p>The current set of processed events is not exhaustive: for instance, tracking click events in the player would allow us to track all sorts of useful things beyond the current scope. </p>

<p>Similarly, the following parameters may be sent and are not currently processed but will be persisted in the logs:</p>

<table>
<thead><tr>
<th>Parameter</th>
<th>Value</th>
</tr></thead>
<tbody>
<tr>
<td><code>platform</code></td>
<td>
<code>as3</code> or <code>html5</code>, for the current AS3/HTML5 player implementation</td>
</tr>
<tr>
<td><code>flash_version</code></td>
<td>The Flash player version (only sent in the AS3 player implementation)</td>
</tr>
<tr>
<td><code>playlist</code></td>
<td>The playlist ID that originated this event.</td>
</tr>
<tr>
<td><code>connectTime</code></td>
<td>(only sent in the AS3 player implementation)</td>
</tr>
<tr>
<td><code>mem</code></td>
<td>(only sent in the AS3 player implementation)</td>
</tr>
</tbody>
</table><h2></h2>

<p><a id="uniques-tracking"></a></p>

<h3>
<a name="unique-user-tracking" class="anchor" href="#unique-user-tracking"><span class="octicon octicon-link"></span></a>Unique user tracking</h3>

<ul>
<li>To enable tracking the client application or player should include <code>cookies_enabled=true</code> parameter in the <code>GET</code> request to the analytics events collector.</li>
<li>To disable cookie tracking, include <code>cookies_enabled=false</code> or not pass a <code>cookies_enabled</code> parameter in the <code>GET</code> request.</li>
<li>The collector will now include a <code>Set-Cookie</code> header with the cookie <code>bcau</code> with a unique identifier for the user.</li>
<li>In cases where it is not possible to set/store cookies, the client application may send back an override user identifier ( such as the device UUID ) as the <code>user</code> query parameter.</li>
<li>If a <code>user</code> parameter is specified, we WILL track the user.</li>
</ul><p>For implementation details: <a href="Unique-user-tracking">Unique user tracking</a></p>

<hr><p>For more information (or help figuring out how best to track these things), please talk to RNA.</p>
    </div>
  </div>
  </div>

</div>