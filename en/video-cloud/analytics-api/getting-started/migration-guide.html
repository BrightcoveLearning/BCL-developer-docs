<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <title id="bclPageTitle">Brightcove Video Cloud Analytics API Migration Guide</title>
    <script type="text/javascript" src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href="//files.brightcove.com/proxima-nova/font-faces.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css" />
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="large-2 columns show-for-large-up">
            <div id="sidenav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <div id="top" class="section">
                <h1>Analytics API Migration: v0 to v1</h1>
                <p>This topic provides information for developers who are migrating apps and integrations from the v0 (Limited Availabilty) version of the Analytics API to version v1.</p>
                <h3>New features highlights</h3>
                <p>If you are currently using the Limited Availabilty version of the Analytics API, there are many reasons to upgrade your apps to the v1 version. Here are some of the enhancements offered in the v1 version:</p>
                <ul>
                    <li>Generate reports on multiple accounts: you can now generate reports on more than one account using the <code>accounts</code> parameter - <a href="#accounts">see more...</a></li>
                    <li>Filter videos by video properties: you can now select the videos you want to report on using video properties such as tags, custom fields, and reference ids - <a href="#videoProperties">see more...</a></li>
                    <li>Engagement endpoints: there are new engagement endpoints that allow you to get detailed engagement data for recent views - <a href="engagementEndpoints">see more...</a></li>
                </ul>
            </div>
            <div id="generalChanges" class="section">
                <h2>General changes</h2>
                <dl>
                    <dt id="baseURL">Base URL</dt>
                    <dd>The base URL for the API has changed:
                    <p>Old URL:</p>
<pre><code>https://data.brightcove.com/analytics-api/videocloud</code></pre>
                    <p><strong>New URL:</strong></p>
<pre><code><strong>https://analytics.api.brightcove.com/v1</strong></code></pre>
                    </dd>
                    <dt id="authentication">Authentication</dt>
                    <dd>Authentication via the v0 (Limited Availabilty) is no longer supported. You must get access tokens for the Analytics API via the <a href="//docs.brightcove.com/en/video-cloud/oauth-api/getting-started/oauth-api-overview.html">Brightcove OAuth Service</a>. See <a href="../guides/managing-api-credentials.html">Managing API Credentials</a> for information on obtaining client credentials for the Analytics API.
                    <p>In order to use the <a href="#videoProperties">video property filters</a>, your client credentials need to have permisssions for both:</p>
                    <ul>
                        <li>video-cloud/analytics/read</li>
                        <li>video-cloud/video/read</li>
                    </ul>
                    <p class="BCL-aside">Note: you can also use the OAuth service to authenticate calls to the v0 API. You may want to test this with working apps before migrating to v1, to make sure you have the authentication implemented correctly.</p></dd>
                    <dt id="rollups">Rollups</dt>
                    <dd>Account rollup calls are no longer supported. If you were using rollups to get detailed engagement information on recent video views, you will now be able to obtain these through the new <a href="#engagementEndpoints">engagement endpoints</a>.</dd>
                </dl>
            </div>
            <div class="section" id="reportChanges">
                <h2>Report Changes</h2>
                <dl>
                    <dt id="reports">Reports</dt>
                    <dd>Reports are now accessed through the <code>data</code> resource rather than <code>report</code>:
                    <p>Old report endpoint</p>
<pre><code>https://data.brightcove.com/analytics-api/videocloud/accounts/{accountId}/report</code></pre>
                    <p><strong>New report endpoint</strong></p>
<pre><code><strong>https://analytics.api.brightcove.com/v1/data</strong></code></pre>
                    </dd>
                    <dt id="accounts">Accounts</dt>
                    <dd>For <a href="#reports">reports</a>, <code>accounts</code> is now a <strong>parameter</strong> rather than a <strong>resource</strong> in the URL path - this allows generation of reports on multiple accounts:
                    <p>Old way:</p>
<pre><code>.../accounts/{accountId}/report...</code></pre>
                    <p><strong>New way:</strong></p>
<pre><code><strong>.../data?accounts={account_id1},{account_id2}...</strong></code></pre>
                    <p class="BCL-aside">Note: the new <a href="#engagementEndpoints">engagement endpoints</a> and the <a href="../guides/video-information-endpoint.html">video information endpoint</a> still have <code>/accounts/{account_id}/ in the URL path, and accept requests for a single account only.</code></p>
                    </dd>
                    <dt id="date"><code>day</code> becomes <code>date</code> dimension</dt>
                    <dd>The <code>day</code> dimension for reports is replaced by the <strong><code>date</code></strong> dimension. The <code>date</code> dimension works in the same way and returns the same data as the old <code>day</code> dimension. See the <a href="../guides/date.html">guide to the <code>date</code> dimension</a> for more information.</dd>
                    <dt id="date_hour"><code>date_hour</code> dimension</dt>
                    <dd>The <code>date_hour</code> dimension is used like the <code><span id="#date">date</span></code> dimension, but allows you to get hourly data for periods within the previous 32 days. If the range for the <code>date_hour</code> requests extends outside the previous 32 days, an error will be returned. To specify hours of the day for request, set the <code>from</code> and <code>to</code> parameters to millisecond value of epoch time rather than using MM-DD-YYYY dates. For example:
<pre><code id="date_hour_example"></code></pre>
                    <p>See the <a href="../guides/date_hour.html">guide to the <code>date_hour</code> dimension</a> for more information.</p>
                    </dd>
                    <dt id="reportFields">Top-level fields for reports</dt>
                    <dd>Reports will always have these three top-level fields (only):
                    <ul>
                        <li><code>summary</code></li>
                        <li><code>item_count</code></li>
                        <li><code>items</code></li>
                    </ul>
                    </dd>
                    <dt id="multipleDimensions">Fields for reports on multiple dimensions</dt>
                    <dd>Fields returned for reports on multiple dimensions will be a union of the fields for each dimension included in the request. See the <a href="./api-overview.html#reportDimensions">Analytics API Overview</a> for information on what dimensions can be combined in reports.</dd>
                    <dt id="fieldValidation">Strict validation on <code>fields</code> and <code>sort</code> parameters</dt>
                    <dd>The <code>fields</code> and <code>sort</code> parameters are strictly validated. If you include a field that is not supported for the call you are making, an error will be returned.</dd>
                    <dt id="fieldsAll"><code>fields=all</code></dt>
                    <dd><code>fields=all</code> is no longer supported. The fields you want to return for items must be specified. See <a href="./api-overview.html#dimensions">Dimensions</a> for the fields supported for each dimension.</dd>
                    <dt id="refID"><code>video.reference_id</code> and <code>video.tags</code></dt>
                    <dd>If you include <code>video.reference_id</code> and/or <code>video.tags</code> in <code>fields</code> for reports on the <code>video</code> dimension, they will be returned in the response (or <code>null</code> if there is no reference id, an emtpy array if there are no tags). Reference id and tags data is cached for 24 hours, and so will not reflect changes made in the past 24 hours.</dd>

                    <dt id="videoProperties">Filtering by video properties</dt>
                    <dd>
                        <p>The <code>where</code> filter syntax for video properties is as follows: <code>where=video.q=={property}:{value}</code>. For example:</p>
                        <p><strong>Filter by tags</strong></p>
<pre><code>where=video.q==tags:foo,bar</code></pre>
                        <p><strong>Filter by reference ids</strong></p>
<pre><code>where=video.q==reference_id:refid1,refid2</code></pre>
                    <p class="BCL-note">Remember that this data is cached for 24 hours, so will not reflect changes made in the past day.</p>
                    </dd>
                </dl>
            </div>
            <div class="section" id="engagementEndpoints">
                <h2>Engagement endpoints</h2>
                <dl>
                    <dt>Engagement endpoints</dt>
                    <dd>Three new engagement endpoints allow you to get granular engagement information for each 100th part of videos:
                    <p>Account averages</p>
<pre><code>.../engagement/accounts/{account_id}</code></pre>
                    <p>Averages for a player</p>
<pre><code>.../engagement/accounts/{account_id}/players/{player_id}</code></pre>
                    <p>Engagement for a video</p>
<pre><code>.../engagement/accounts/{account_id}/videos/{video_id}</code></pre>
                    <p>The only parameters supported for engagement endpoints are <code>from</code> and <code>to</code>.</p>
                    <p>Only periods within the previous 32 days are supported for engagement endpoints.</p>
                    </dd>
                </dl>
            </div>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a>
    </div>
    <script type="text/javascript">
    var now = new Date().valueOf(),
        twoHoursAgo = now - 7200000,
        date_hour_example = document.getElementById("date_hour_example");
        date_hour_example.innerHTML = ".../data?accounts={account_id}&amp;dimensions=date_hour&amp;from=" + twoHoursAgo + "&amp;to=" + now

    </script>
    <script>
        var feedbackMail = document.getElementById("feedbackMail");
        feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
    <script>
        $(document).foundation();
    </script>
</body>

</html>