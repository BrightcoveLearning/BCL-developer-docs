<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <title id="bclPageTitle">Brightcove Video Cloud Analytics API Quick Start</title>
    <script type="text/javascript" src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/atelier-estuary.light.min.css" />
    <style>
      textarea {
        width: 100%;
        height: 7rem;
      }
    </style>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <div id="top" class="section">
                <h1>Analytics API Quick Start</h1>
                <p>In this quick start you will perform the following tasks:</p>
                <ul>
                  <li>Obtain credentials to use the Analytics API</li>
                  <li>Generate reports on each of the Analytics API dimensions</li>
                  <li>Generate an engagement report for the account</li>
                </ul>
                <p class="BCL-aside">For details on the API used in this document you can view the <a href="api-overview.html">Analytics API Overview</a> document and the <a href="../references/versions/v1/index.html">Analytics API reference</a>.</p>
              </div>
              <div id="api-tester" class="section">
                <h2>API Tester</h2>
                <p>The Analytics API's security is implemented using OAuth2. To permit you to get started using the Analytics API as quickly as possible, the API calls in this quick start will use a shell script called <strong>api-tester.sh</strong> to get access tokens and make the API calls. The api-tester script uses cURL to make http calls. cURL is built in on Mac OS X and all Unix/Linux systems. To get cURL on Windows, see <a href="../../concepts/curl/curl.html">Setting up cURL</a>. Then download the <a href="../../oauth-api/assets/api-tester.sh.zip">api-tester.sh script</a></p>
                <p class="BCL-aside">You can see the full code for the shell script at <a href="../../oauth-api/guides/get-token.html#codeSamples">Getting Access Tokens</a>.</p>
                <h3>Running the shell script</h3>
                <p>After you download the shell script, unzip it wherever you like, and then go to a command line in the same folder. To run the script, type:</p>
                <pre><code>bash api-tester.sh</code></pre>
                <p>Each time you run the script, it will prompt you for 5 variables:</p>
                <ul>
                  <li>Client ID (see the <a href="#obtaincredentials">next section</a> on obtaining client credentials)</li>
                  <li>Client Secret (see the <a href="#obtaincredentials">next section</a> on obtaining client credentials)</li>
                  <li>The full API call (example: <code>https://cms.api.brightcove.com/v1/accounts/12345678/videos</code></li>
                  <li>The HTTP request method - one of the following: g (GET - the default) | p (POST) | pa (PATCH) | pu (PUT) | d (DELETE) (note: for Analytics API requests, this will always be GET - the default</li>
                  <li>Request data - used for POST, PATCH, and PUT; for GET and DELETE requests, you will leave this blank and just press <strong>return</strong></li>
                </ul>
                <p>For each part of this quick start, you will be given the values for each of these inputs to use with your account.</p>
              </div>
              <div class="section" id="getCredentials">
                <h2>Get client credentials</h2>
                <p>Although you can get client credentials (a
                    <code>client_id</code> and
                    <code>client_secret</code>) directly from the Brightcove OAuth Service using <a href="/en/video-cloud/oauth-api/guides/get-client-credentials.html">CURL</a> or <a href="/en/video-cloud/oauth-api/guides/get-client-credentials-postman.html">Postman</a>, the easiest way is to use the <a href="http://docs.brightcove.com/en/video-cloud/analytics-api-v0/guides/managing-api-credentials.html">OAuth Credentials UI</a>. We will use that method here.</p>
                <ol>
                    <li>Login to <a href="https://signin.brightcove.com/?redirect=https%3A%2F%2Fstudio.brightcove.com%2F">Video Cloud Studio</a>.</li>
                    <li>Click the gear icon
                        <img alt="" src="http://img.brightcove.com/node14056-gear-icon.png" /> in the header.</li>
                    <li>Click the
                        <strong>API Authentication</strong> link:
                        <br />
                        <img src="assets/oauth-account-settings.png" alt="account settings link" width="182" height="181">
                    </li>
                    <li>The API Authentication page will open displaying your current client registrations.
                        <br />
                        <img alt="current client registrations" src="assets/oauth-start-screen.png" width="757" height="329" />
                        <br />
                        <p class="BCL-aside">Note: Only the client registrations for the account you are logged into will display.</p>
                    </li>
                    <li>Click
                        <strong>Register New Application</strong>.</li>
                    <li>Enter a
                        <strong>Name</strong> and
                        <strong>Short Description</strong> for the client registration (optional).</li>
                    <li>Select one or more of your accounts for authorization. You can select multiple accounts and click
                        <strong>&gt;</strong> to add them or click
                        <strong>&gt;&gt;</strong> to add all accounts. Click
                        <strong>&lt;</strong> to remove an account or
                        <strong>&lt;&lt;</strong> to remove all accounts.</li>
                    <li>Select the API(s) and permission(s) to enable for this registration.
                        <br />
                        <img alt="register new app" src="assets/oauth-registering-new-app.png" width="714" height="817" />
                        <p>Be sure to select <strong>both</strong> Analytics&gt;Read and Video&gt;Read permissions.</p>
                    </li>
                    <li>Click
                        <strong>Save</strong>.</li>
                    <li>A
                        <strong>Client ID</strong> and
                        <strong>Client secret</strong> will be returned.
                        <br />
                        <img alt="OAuth" src="assets/oauth-client-secret.png" width="601" height="452" />
                        <br/>
                        <p class="BCL-aside">Note: Copy the client secret and store it in a secure location as the client secret
                            <strong>will not</strong> be displayed again.</p>
                    </li>
                </ol>
                <p class="BCL-aside">These credentials are good for <strong>both</strong> the v1 and v0 (Limited Availability) versions of the Analytics API.</p>
            </div>
                <div id="assignvalues" class="section">
                  <h2>Assign values</h2>
                  <p>Values you just retrieved in the previous section will be used, along with your account id, to generate the data inputs for each of the tasks that follow, so that you won't have to type them.</p>
                  <ol start="2">
                    <li>Enter the corresponding values for each of the following. This step <strong>MUST</strong> be completed before you will see the steps that follow.</li>
                  </ol>
                  <div class="form-wrapper">
                    <fieldset>
                      <legend>Assign values for reuse</legend>
                      <p>Submits to local JavaScript and assigns values to variables</p>
                      <p>
                        Client id:
                        <input name="client_id" id="aapi_client_id" type="text" size="50">
                      </p>
                      <p>
                        Client secret:
                        <input name="client_secret" id="aapi_client_secret" type="text" size="50">
                      </p>
                      <p>
                        Account ID:
                        <input name="account_id" id="aapi_account_id" type="text" size="30">
                      </p>
                      <p>
                        Video ID (for any active video in your account):
                        <input name="video_id" id="aapi_video_id" type="text" size="30">
                      </p>
                      <p>
                        Video Reference ID (for any active video in your account, if any have reference ids):
                        <input name="reference_id" id="aapi_reference_id" type="text" size="30">
                      </p>
                      <p>
                        A tag (assigned to any active video in your account, if use tags):
                        <input name="tag" id="aapi_tag" type="text" size="30">
                      </p>
              <!-- <p>
                  Video Cloud Video ID (if available):
                  <input name="video_id" id="aapi_video_id" type="text">
                </p> -->
                <p>
                  <input id="aapi_initial_values_submit" class="BCLbutton" type="submit" value="Assign Values">
                </p>
              </fieldset>
            </div>
            <div class="section" id="getReports">
                <h2>Get reports</h2>
                <p>Once you've entered the information needed above, you will see a series of steps below that walk you through requesting a report on each of the Analytics dimensions.</p>
                <p>We will keep things simple here by accepting the default values for all parameters and using filters only in the last few steps. Remember, however, that the <code>api-tester.sh</code> script can make any request, so feel free to experiment with the parameters.</p>
                <p class="BCL-aside">There are no dependencies between the steps, so feel free to skip some if you like.</p>
                <ol id="taskList" start="3"></ol>
            </div>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="../assets/aapi-model.js"></script>
    <script id="pageScript" type="text/javascript">
        var BCLS = (function ($, window, document, aapi_model) {
            var // Analytics API stuff
                $aapi_client_id = $("#aapi_client_id"),
                $aapi_client_secret = $("#aapi_client_secret"),
                $aapi_account_id = $("#aapi_account_id"),
                $aapi_video_id = $("#aapi_video_id"),
                $aapi_reference_id = $("#aapi_reference_id"),
                $aapi_tag = $("#aapi_tag"),
                $aapi_initial_values_submit = $("#aapi_initial_values_submit"),
                options = {
                  client_id: "",
                  client_secret: "",
                  account_id: "",
                  video_id: "",
                  reference_id: "",
                  tag: "",
                  aapiURL: "https://analytics.api.brightcove.com/v1/"
                },
                today = new Date().toISOString(),
                nowMS = new Date().valueOf(),
                taskList = document.getElementById("taskList"),
                // functions
                bclslog,
                createSteps,
                setInitialValues;
            /**
             * [bclslog description]
             * @param  {[type]} context [description]
             * @param  {[type]} message [description]
             * @return {[type]}         [description]
             */
            bclslog = function (context, message) {
              if (console) {
                console.log(context, message);
              }
            };
            bclslog("test", aapi_model.dimensions[0].fields.join(","));
            /**
             * create the quick start steps
             */
            createSteps = function () {
                var i,
                    iMax = aapi_model.dimensions.length,
                    str = "",
                    thisDimension;
                for (i = 0; i < iMax; i++) {
                    thisDimension = aapi_model.dimensions[i];
                    str += "<li>Now you will get a report on the <strong>" + thisDimension.name + "</strong> dimension. Go to the command line and enter <code>bash api-tester.sh</code>. Enter the following values for the inputs:<p><strong>Client ID: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_id + "\"></p><p><strong>Client Secret: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_secret + "\"></p><p><strong>API Call: </strong><textarea>" + options.aapiURL + "data?accounts=" + options.account_id + "&amp;dimensions=" + thisDimension.name + "&ampfields=" + thisDimension.fields.join(",") + "</textarea></p><p><strong>HTTP method: </strong><input type=\"text\" size=\"50\" value=\"g\"></p><p><strong>Request data: </strong><input type=\"text\" size=\"50\" value=\"{none - just press return}\"></p></li>";
                }
                str += "<li>Next, you will get an engagement report on the account for the past 30 days. Go to the command line and enter <code>bash api-tester.sh</code>. Enter the following values for the inputs:<p><strong>Client ID: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_id + "\"></p><p><strong>Client Secret: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_secret + "\"></p><p><strong>API Call: </strong><textarea>" + options.aapiURL + "engagement/accounts/" + options.account_id + "</textarea></p><p><strong>HTTP method: </strong><input type=\"text\" size=\"50\" value=\"g\"></p><p><strong>Request data: </strong><input type=\"text\" size=\"50\" value=\"{none - just press return}\"></p></li>";
                str += "<li>Next, you will get an engagement report on the video (that you entered an id for above) for the past 30 days. Go to the command line and enter <code>bash api-tester.sh</code>. Enter the following values for the inputs:<p><strong>Client ID: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_id + "\"></p><p><strong>Client Secret: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_secret + "\"></p><p><strong>API Call: </strong><textarea>" + options.aapiURL + "engagement/accounts/" + options.account_id + "/videos/" + options.video_id + "</textarea></p><p><strong>HTTP method: </strong><input type=\"text\" size=\"50\" value=\"g\"></p><p><strong>Request data: </strong><input type=\"text\" size=\"50\" value=\"{none - just press return}\"></p></li>";
                str += "<li>Next, you will get a report on the video with the reference id (that you entered above) for the past 30 days. Go to the command line and enter <code>bash api-tester.sh</code>. Enter the following values for the inputs:<p><strong>Client ID: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_id + "\"</p><p><strong>Client Secret: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_secret + "\"></p><p><strong>API Call: </strong><textarea>" + options.aapiURL + "data?accounts=/" + options.account_id + "&amp;dimensions=video&amp;where=video.q==reference_id:" + options.reference_id + "&amp;fields=" + thisDimension.fields.join(",") +  "</textarea></p><p><strong>HTTP method: </strong><input type=\"text\" size=\"50\" value=\"g\"></p><p><strong>Request data: </strong><input type=\"text\" size=\"50\" value=\"{none - just press return}\"></p></li>";
                str += "<li>Finally, you will get a report on the videos with the tags (that you entered above) for the past 30 days. Go to the command line and enter <code>bash api-tester.sh</code>. Enter the following values for the inputs:<p><strong>Client ID: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_id + "\"></p><p><strong>Client Secret: </strong><input type=\"text\" size=\"50\" value=\"" + options.client_secret + "\"></p><p><strong>API Call: </strong><textarea>" + options.aapiURL + "data?accounts=/" + options.account_id + "&amp;dimensions=video&amp;where=video.q==tags:" + options.tag + "&amp;fields=" + thisDimension.fields.join(",") + "</textarea></p><p><strong>HTTP method: </strong><input type=\"text\" size=\"50\" value=\"g\"></p><p><strong>Request data: </strong><input type=\"text\" size=\"50\" value=\"{none - just press return}\"></p></li>";
                taskList.innerHTML = str;
            };
            /**
             * sets things up after user enters info
             */
            setInitialValues = function () {
              options.client_id = $aapi_client_id.val();
              options.client_secret = $aapi_client_secret.val();
              options.account_id = $aapi_account_id.val();
              options.video_id = $aapi_video_id.val();
              options.reference_id = $aapi_reference_id.val();
              options.tag = $aapi_tag.val();
              today = today.substring(0, today.indexOf("T"));
              $aapi_initial_values_submit.attr("value", "Values Assigned!");
              $aapi_initial_values_submit.off("click", setInitialValues);
              createSteps();
            };
            $aapi_initial_values_submit.on("click", setInitialValues);
        })($, window, document, aapi_model);
    </script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a>
    </div>
    <script>
        var feedbackMail = document.getElementById("feedbackMail");
        feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
    <script>
        $(document).foundation();
    </script>
</body>

</html>