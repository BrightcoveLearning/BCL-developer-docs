<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="product" content="Video Cloud">
    <meta name="audience" content="Player Developer">
    <meta name="product-area" content="Getting Started">
    <meta name="product-focus" content="">
    <meta name="keywords" content="player">
    <!-- End Drupal Taxonomy Data -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Quick Start: Video.js Plugin Generator</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
  <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
  <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

  <script>
      (function(i, s, o, g, r, a, m) {
          i['GoogleAnalyticsObject'] = r;
          i[r] = i[r] || function() {
              (i[r].q = i[r].q || []).push(arguments)
          }, i[r].l = 1 * new Date();
          a = s.createElement(o),
              m = s.getElementsByTagName(o)[0];
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-2728311-29', 'auto');
      ga('send', 'pageview');
  </script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
  <!-- header navbar -->
  <div id="navWrapper" class="fixed"></div>
  <!-- breadcrumbs -->
  <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
  <!-- content -->
  <div class="row">
    <div class="sidebar large-2 columns show-for-large-up">
      <div id="sidenav" class="side-nav"></div>
    </div>
    <div id="main" class="large-10 small-12 columns">
    <h1>Quick Start: Video.js Plugin Generator</h1>
    <!-- begin drupal content -->
    <article class="bcls-article">
      <header id="bcls_header" class="bcls-header">
        <!-- Place document intro sentence(s) here -->
        <p>In this topic, you will learn how to use the video.js plugin generator to create and test standard plugins for the Brightcove player.</p>
        <p>
          The video.js plugin generator creates the files and folders needed to create a standard plugin. It includes a test environment so that you can easily see your changes as you develop your plugin. It even generates the final plugin files that you can use when you are ready to release it.
        </p>
      </header>

      <section id="Overview" class="bcls-section">
        <h2>Overview</h2>
        <p>
          In this topic, you will perform the following tasks:
        </p>
        <ul>
          <li>
            <a href="#Setup_your_environment">Setup your environment</a>
          </li>
          <li>
            <a href="#Create_the_plugin_foundation">Create the plugin foundation</a>
          </li>
          <li>
            <a href="#View_the_source_files">View the source files</a>
          </li>
          <li>
            <a href="#Test_your_plugin">Test your plugin</a>
          </li>
          <li>
            <a href="#Build_your_plugin">Build your plugin</a>
          </li>
          <li>
            <a href="#Recommendations">Recommendations</a>
          </li>
          <li>
            <a href="#Resources">Resources</a>
          </li>
        </ul>
      </section>

      <section id="Setup_your_environment" class="bcls-section">
        <h2>Setup your environment</h2>
        <p>To setup your environment to run the plugin generator, follow these steps:</p>
        <ol class="bcls-tasklist">
          <li>
            <p>
              If you don't already have it, download and install the <a href="https://nodejs.org/en/">Node.js JavaScript runtime</a>. This includes npm, which is a package ecosystem that includes a large collection of open source libraries.
            </p>
            <aside class="bcls-aside bcls-aside--tip">Use the "Recommended For Most Users" version of Node.js.</aside>
          </li>
          <li>
            Clone or download the <a href="https://github.com/videojs/generator-videojs-plugin">video.js plugin generator</a> to your computer.
          </li>
          <li>
            <p>
              In the Terminal, install the plugin generator along with Yeoman:
            </p>
            <pre class="line-numbers"><code class="language-javascript">$ npm install -g yo generator-videojs-plugin</code></pre>
            <p>
              The video.js plugin generator uses a Yeoman generator, which is a scaffolding tool to setup the foundation for any project. This sets up the basic files and folders. You do not need to understand Yeoman. You just need to install it with the plugin generator.
            </p>
            <aside class="bcls-aside bcls-aside--tip">To avoid permission issues, use (super user do): <code>sudo npm</code></aside>
          </li>
        </ol>
      </section>

      <section id="Create_the_plugin_foundation" class="bcls-section">
        <h2>Create the plugin foundation</h2>
        <p>In this section, you will create the foundation folders and files for your plugin.</p>
        <ol class="bcls-tasklist">
          <li>
            <p>
              In the Terminal, run the following command:
            </p>
            <pre class="line-numbers"><code class="language-javascript">$ yo videojs-plugin</code></pre>
            <aside class="bcls-aside bcls-aside--tip">You can run this command as many times as you want. This is helpful if you decide to add an option to your plugin after working on it. The tool will remember your previous selections, but you may have to overwrite some files.</code></aside>
          </li>
          <li>
            <p>
              Next, you'll be asked a series of questions about the details of your plugin. Here is a list of the options as well as a brief description for each.
            </p>

            <table class="bcls-table">
                <thead class="bcls-table__head">
                <tr>
                    <th style="width:20%">Option</th>
                    <th style="width:60%">Description</th>
                    <th style="width:20%">Values for this example</th>
                </tr>
                </thead>
                <tbody class="bcls-table__body">
                <tr>
                    <td>Package scope</td>
                    <td>
                        This is only needed if you plan to publish your plugin to npm. You could use your company name here or leave it blank.
                    </td>
                    <td>
                      blank
                    </td>
                </tr>
                <tr>
                    <td>Plugin name</td>
                    <td>
                        Give your plugin a name. Entering the name <strong>demo</strong> creates a plugin named <strong>videojs-demo</strong>.
                    </td>
                    <td>
                      demo
                    </td>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>
                        Enter a description for your plugin.
                    </td>
                    <td>
                      This is a demo
                    </td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>
                        The generator will try to guess your name and email address based on your git setup. You can change these values.
                    </td>
                    <td>
                      [your name] &lt;your email address&gt;
                    </td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>
                        Select one of the license options. For your private plugins, you can select <strong>Unlicensed</strong>.
                    </td>
                    <td>
                      Unlicensed
                    </td>
                </tr>
                <tr>
                    <td>Changelog</td>
                    <td>
                        Select yes if you would like the tool to manage the changelog.
                    </td>
                    <td>
                      No
                    </td>
                </tr>
                <tr>
                    <td>SASS styling</td>
                    <td>
                        Select yes, if you want to include CSS styling. This will generate a CSS file.
                    </td>
                    <td>
                      Yes
                    </td>
                </tr>
                <tr>
                    <td>IE8 support</td>
                    <td>
                        If yes, then the generator pulls in pre-processing tools to polyfill missing features that IE 8 does not have, but that most modern browsers do have.
                    </td>
                    <td>
                      No
                    </td>
                </tr>
                <tr>
                    <td>Documentation tooling</td>
                    <td>
                        If yes, the generator includes JSDoc and provides a command to generate documentation.
                    </td>
                    <td>
                      No
                    </td>
                </tr>
                <tr>
                    <td>Internationalized strings</td>
                    <td>
                        This is helpful if you have text that you want translated into different languages. The tool doesn't offer automatic translation, but convert files from video.js JSON format to JavaScript. Then you can create languages as your would for video.js and have them compiled into your plugin's output.
                    </td>
                    <td>
                      No
                    </td>
                </tr>
                <tr>
                    <td>Browser versioning</td>
                    <td>
                        This is relevant for open source projects. It changes the way it tags projects in git.
                    </td>
                    <td>
                      No
                    </td>
                </tr>
                <tr>
                    <td>Check code quality</td>
                    <td>
                        If yes, this automatically runs a linting tool called videojs standard. This is a good way to ensure you are not pushing code that is not up to standards.
                    </td>
                    <td>
                      Yes
                    </td>
                </tr>

              </tbody>
            </table>

            <p>
              Here is what the output looks like with values set for this example:
            </p>
            <figure class="bcls-figure">
              <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/player-development/getting-started/plugin-generator/option-values.png" alt="Option values">
              <figcaption class="bcls-caption--image">Option values</figcaption>
            </figure>
          </li>
          <li>
            <p>
              When the setup is complete, you should see a message similar to this:
            </p>
            <figure class="bcls-figure">
              <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/player-development/getting-started/plugin-generator/setup-complete.png" alt="Setup complete">
              <figcaption class="bcls-caption--image">Setup complete</figcaption>
            </figure>
            <p>
              Notice that the name of the plugin is <strong>videojs-demo</strong>.
            </p>
          </li>

        </ol>
      </section>

      <section id="View_the_source_files" class="bcls-section">
        <h2>View the source files</h2>
        <p>
          In this section, we will review the source files that were created by the videojs generator.
        </p>
        <ol class="bcls-tasklist">
          <li>
            <p>
              In an editor, open the top folder where you put your plugin project. In the <strong>src</strong> folder, you will find a <strong>plugin.js</strong>. if you selected <strong>Yes</strong> to the styling option, you will also see a <strong>plugin.scss</strong> file.
            </p>
          </li>
          <li>
            <p>
               If you did not select <strong>Yes</strong> to the styling option, you can skip this step. Open the <strong>src > plugin.scss</strong> file.
            </p>
            <aside class="bcls-aside bcls-aside--tip">You will make your coding changes in this SASS file, but a CSS file will be created for distribution. If you are not familiar with SASS, don't worry. Since CSS is a subset of SASS, you can also use CSS in this file.</aside>
            <p>
              Your code should look similar to the following:
            </p>
            <ul>
              <li>
                Lines 6-8: add the <code>vjs-demo</code> class to the player.
              </li>
            </ul>
            <pre class="line-numbers"><code class="language-javascript">// Sass for videojs-demo

.video-js {

  // This class is added to the video.js element by the plugin by default.
  &amp;.vjs-demo {
    display: block;
  }
}
</code></pre>
          </li>
          <li>
            <p>
              Open the <strong>src &gt; plugin.js</strong> file.
            </p>
            <aside class="bcls-aside bcls-aside--tip">The generator uses ES6, which is the latest JavaScript version. Learn more about the new features in <a href="http://es6-features.org/#Constants">ECMAScript 6</a>. The generator translates your ES6 code into ES5 code so that your distribution code will run on a majority of browsers.</aside>
            <p>
              Your code should look similar to the following:
            </p>
            <ul>
              <li>
                Lines 33-37: call the <code>onPlayerReady()</code> function, when the player is ready. Here, you can pass variables into your plugin using the <code>options</code> object.
              </li>
              <li>
                Line 40: registers your plugin with video.js.
              </li>
              <li>
                Line 43: adds a version parameter to your plugin. When you run the <strong>npm version</strong> script, it will update this variable to the version you are on.
              </li>
              <li>
                Line 18: adds the <code>vjs-demo</code> class to your player. By default, this is the only thing the skeleton code does. This is where you can add functionality to your plugin.
              </li>
            </ul>
            <pre class="line-numbers"><code class="language-javascript">import videojs from 'video.js';

// Default options for the plugin.
const defaults = {};

/**
 * Function to invoke when the player is ready.
 *
 * This is a great place for your plugin to initialize itself. When this
 * function is called, the player will have its DOM and child components
 * in place.
 *
 * @function onPlayerReady
 * @param    {Player} player
 * @param    {Object} [options={}]
 */
const onPlayerReady = (player, options) =&gt; {
  player.addClass('vjs-demo');
};

/**
 * A video.js plugin.
 *
 * In the plugin function, the value of `this` is a video.js `Player`
 * instance. You cannot rely on the player being in a &quot;ready&quot; state here,
 * depending on how the plugin is invoked. This may or may not be important
 * to you; if not, remove the wait for &quot;ready&quot;!
 *
 * @function demo
 * @param    {Object} [options={}]
 *           An object of options left to the plugin author to define.
 */
const demo = function(options) {
  this.ready(() =&gt; {
    onPlayerReady(this, videojs.mergeOptions(defaults, options));
  });
};

// Register the plugin with video.js.
videojs.plugin('demo', demo);

// Include the version number.
demo.VERSION = '__VERSION__';

export default demo;
</code></pre>
          </li>
        </ol>
      </section>

      <section id="Test_your_plugin" class="bcls-section">
        <h2>Test your plugin</h2>
        <p>
          The plugin generator makes it easy to develop and test your plugin using a local test environment. Follow these steps to test your plugin:
        </p>
        <ol class="bcls-tasklist">
          <li>
            <p>
              In the Terminal, enter the following command to start the development server:
            </p>
            <pre class="line-numbers"><code class="language-javascript">$ npm start</code></pre>
          </li>
          <li>
            <p>
              In a browser, enter the following to open the development server:
            </p>
            <pre class="line-numbers"><code class="language-javascript">http://localhost:9999/</code></pre>
            <p>
              You should see the player with a test video. The generator gives you a demo player that runs in the page. Open the Elements tab in the browser developer tools to see the HTML for the player.
            </p>
            <figure class="bcls-figure">
              <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/player-development/getting-started/plugin-generator/browser-test.png" alt="Browser testing">
              <figcaption class="bcls-caption--image">Browser testing</figcaption>
            </figure>
          </li>
          <li>
            <p>
              Inspect the Elements of this web page. You should see that the <code>vjs-demo</code> class has been added to the player. Remember that we added this class to the player in the plugin code.
            </p>
            <figure class="bcls-figure">
              <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/player-development/getting-started/plugin-generator/vjs-demo-class.png" alt="vjs-demo class">
              <figcaption class="bcls-caption--image">vjs-demo class</figcaption>
            </figure>
          </li>
          <li>
            <p>
              Now,let's try adding code to the plugin to automatically start playing the video when the player loads. Return to the <strong>src &gt; plugin.js</strong> file in your editor.
            </p>
          </li>
          <li>
            <p>
              In the <code>onPlayerReady()</code> method, add code to start playback of the video.
            </p>
            <pre class="line-numbers"><code class="language-javascript">const onPlayerReady = (player, options) =&gt; {
  player.addClass('vjs-demo');
  <span class="bcls-highlight">player.play();</span>
};</code></pre>
          </li>
          <li>
            <p>
              Save the <strong>plugin.js</strong> file in your editor. You should notice that the video starts playing in the test environment.
            </p>
            <p>
              As you develop your plugin in the <strong>plugin.js</strong> file and save changes, the tool automatically rebuilds and reloads the player in the browser. This makes it easy to develop and test your plugin.
            </p>
          </li>
          <li>
            <p>
              Remove the line of code to start playing the video.
            </p>
            <pre class="line-numbers"><code class="language-javascript">player.play();</code></pre>
          </li>
        </ol>
      </section>

      <section id="Build_your_plugin" class="bcls-section">
        <h2>Build your plugin</h2>
        <p>
          In this section, you will build your plugin. This takes your source code and creates distributable CSS and JavaScript files.
        </p>
        <ol class="bcls-tasklist">
          <li>
            <p>
              In the Terminal, run the following command:
            </p>
            <pre class="line-numbers"><code class="language-javascript">$ npm run build</code></pre>
            <p>
              The build takes your ES6 source code and converts it into ES5 JavaScript code. It also takes your SASS styles and converts it into CSS.
            </p>
          </li>
          <li>
            <p>
              In your project folder, expand the <strong>dist</strong> folder. Here, you should find the following files (assuming you selected Yes for styling):
            </p>
            <p>
              <ul>
                <li>
                  <strong>videojs-demo.css</strong>
                </li>
                <li>
                  <strong>videojs-demo.js</strong>
                </li>
                <li>
                  <strong>videojs-demo.min.js</strong>
                </li>
              </ul>
            </p>
            <p>
              The <strong>dist</strong> folder is where you will find a distributable version of your plugin.
            </p>
          </li>
          <li>
            <p>
              In the <strong>dist</strong> folder, open the <strong>videojs-demo.js</strong> file.
            </p>
            <figure class="bcls-figure">
              <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/player-development/getting-started/plugin-generator/dist-js.png" alt="Distribution files">
              <figcaption class="bcls-caption--image">Distribution files</figcaption>
            </figure>
            <p>
              A few things to note about this distribution file:
            </p>
            <p>
              <ul>
                <li>
                  A license banner has been added to the top of the file.
                </li>
                <li>
                  Your plugin has been wrapped in a <a href="http://browserify.org/">browserify</a> namespace. This means that there are no global variables that might conflict with your page code.
                </li>
                <li>
                  There are no global variables that might conflict with your page code.
                </li>
                <li>
                  The plugin internally registers itself with videojs. This means that you can create multiple plugins, each working independently, for a player.
                </li>
              </ul>
            </p>
          </li>

        </ol>
      </section>

      <section id="Recommendations" class="bcls-section">
        <h2>Recommendations</h2>
        <p>
          It is recommended to use this generator for all of your plugins, even the simple ones. This way, you will always have the same standard setup for all of your plugins. It also frees you from the task of having to create scripts for perform certain functions, like linting or minifying.
        </p>
        <p>
          With this generator, you can focus on developing and testing your plugin without having to worry about the underlying tools.
        </p>
        <p>
          You can keep your plugin local or put it on your private GitHub repo. Creating a videojs plugin means that it will work with the Brightcove player.
        </p>
      </section>


      <section id="Resources" class="bcls-section">
        <h2>Resources</h2>
        <p>
          Here is a summary of the resources you will use while working through this quick start. These links are also provided in the steps below:
        </p>
        <ul>
          <li>
            Download and install: <a href="https://nodejs.org/en/">Node.js (This includes npm)</a>
            <p>
              Use the "Recommended For Most Users" version.
            </p>
          </li>
          <li>
            <a href="https://github.com/videojs/generator-videojs-plugin">The video.js generator</a>
          </li>
          <li>
            <a href="https://github.com/videojs/generator-videojs-plugin/blob/master/docs/standards.md">The video.js plugin standards</a>
          </li>
          <li>
            <a href="https://docs.npmjs.com/">Getting started with npm</a>
          </li>
          <li>
            <a href="http://yeoman.io/">The yeoman scaffolding tool</a>
          </li>
        </ul>

      </section>

    </article>
    <!-- end drupal content -->
    </div>
  </div>

  <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v2.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
    <script>
        $(document).foundation();
    </script>
    <!-- Any scripts specific to page samples should go here -->

    <div style="text-align:center">
        <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
    </div>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
    var feedbackMail = document.getElementById("feedbackMail");
    feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
</body>

</html>
