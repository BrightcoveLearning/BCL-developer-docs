<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Directed Migration</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Directed Migration</h1>
				<!-- Place document intro sentence(s) here -->
				<p>You can use directed migration to designate a Brightcove Player that should be displayed in place of an existing Smart Player. No changes need to be made to the HTML page that contains the code for the Smart Player. You will create a file that contains one for more mappings of which Brightcove Player should be substituted for which Smart Player. This will ONLY work in simple implementations of Smart Player when no special features enhance the specific Smart Player, like:</p>
        <ul>
          <li>Special templates</li>
          <li>Development on the page using JavaScript</li>
          <li>c</li>
          <li>d</li>
          <li>...</li>
        </ul>
        <p>At a high level, to setup directed migration you will need to perform the following tasks:</p>
        <ul>
          <li><a href="#Get_prepared">Get prepared</a>: There may be some technologies you need to understand, like <strong>cURL</strong> and <strong>Git</strong>, before starting the process.</li>
          <li><a href="#Gather_required_information">Gather required information</a>: You will need identifiers for both the Smart Player and Brightcove Player used in the mapping.</li>
          <li><a href="#Create_mappings_file">Create mappings file</a>: This is a specially formatted file that contains the information Brightcove will use to substitute a Brightcove Player for a Smart Player.</li>
          <li><a href="#Publish_mapping_file">Publish mapping file</a>: Places the file in a specific location on a Brightcove server.</li>
          <li><a href="Test">Test</a>: Of course, you will want to be sure that the mapping file is working correctly.</li>
        </ul>
        <p>The steps in this document show a standard mapping. More options for mappings are shown in the <a href="#Mapping_options">Mapping options</a> section of the document.</p>
      </div>
      <div id="Get_prepared" class="section">
        <h2>Get prepared</h2>
        <p>Setting up directed migration uses both <strong>cURL</strong> and <strong>Git</strong> statements in the terminal/command prompt. You will also work with files in <strong>JSON</strong> format. The following documents provide introductions to these technologies if you are not familiar with them (note that the links will open in new tabs/windows):</p>
        <ul>
          <li><a href="../../concepts/curl/curl.html" target="_blank">Set up cURL</a></li>
          <li><a href="../../concepts/delivery-system-api/guides/git-overview.html" target="_blank">Git Overview</a></li>
          <li><a href="../../concepts/intro-to-JSON/intro-to-JSON.html" target="_blank">Introducing JSON</a></li>
				</ul>
			</div>
			<div id="Gather_required_information" class="section">
				<h2>Gather required information</h2>
				<p>You will need the Smart Player <strong>playerKey</strong> and the Brightcove Player <strong>ID</strong>.</p>
        <p>To get the Smart Player information, examine the player code on your HTML page and copy the <strong>value</strong> for the <strong>playerKey</strong>. From the example shown below, the value to copy is <strong>AQ~~,AAABXxBZKsE~,AdU2xXeQoKBP-8tgJnkJv-czgxbjn_aR</strong>.</p>
        <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="2-29" data-gist-highlight-line="14"></code></p>
        <p>Next you need the <strong>ID</strong> for the Brightcove Player you are going to substitute for the Smart Player. After you create the player you can get the ID from Studio. The player's ID is highlighted in the red box in the screenshot. From the example shown below, the value to copy is <strong>B13X2Aix</strong>.</p>
        <div><img src="/en/video-cloud/brightcove-player/guides/assets/directed-migration/Brightcove-Player-id-studio.png" alt="get ID"></div>
			</div>
			<div id="Create_mappings_file" class="section">
				<h2>Create mappings file</h2>
        <p>You will create a file that sets up mappings between the Smart Player and Brightcove Player. The format of the file is JSON. The general format of the file is as follows:</p>
        <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="36-41"></code></p>
        <p>An actual mapping file, using the data gathered above, is as follows:</p>
        <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="44-49"></code></p>
        <p>If you have multiple mappings, the JSON would be formatted as follows:</p>
        <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="52-61"></code></p>
        <p>Now that you know the format, go ahead and use an editor to create your JSON mappings and save the file as <code>mappings.json</code>. At this point, the location of where you save the file does not matter.</p>
			</div>
      <div id="Publish_mapping_file" class="section">
        <h2>Publish mapping file</h2>
        <p>Now you will use <strong>cURL</strong> and <strong>Git</strong> to publish the mapping file you created. When you publish the file, it is placed in a location that Brightcove can use to do the appropriate substitutions. The following steps guide you through the process.</p>
        <ol>
          <li style="margin-bottom:1em">Open Terminal (or a command prompt). Be in a folder in which you want a <strong>migration</strong> folder created and in which you will store your <code>mappings.json</code> file.</li>
          <li>Create environment variables for your email and account number. Follow the examples:
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="65-67"></code></p>
          </li>
          <li>Update your account's repository to contain a <strong>migration</strong> folder. You will be prompted for your Brightcove password when running this cURL command.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="69"></code></p>
          </li>
          <li>Associates the existing <strong>migration</strong> folder from your account with a local folder of the same name it creates.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="71"></code></p>
          </li>
          <li style="margin-bottom:1em">Using any tool you choose, move/copy the <code>mappings.json</code> file into the newly created, local <strong>migration</strong> folder.
          </li>
          <li>Back in terminal, change directory into the <strong>migration</strong> folder.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="73"></code></p>
          </li>
          <li>Ready the <code>mappings.json</code> file to be committed to Git.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="75"></code></p>
          </li>
          <li>Commit the file to Git.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="77"></code></p>
          </li>
          <li>Transfer the commit from your local repository to the remote repository.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="79"></code></p>
          </li>
          <li>Confirm the file was moved correctly.
            <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="81"></code></p>
          </li>
        </ol>
      </div>
      <div id="Test" class="section">
        <h2>Test</h2>
        <p class="BCL-aside">NOTE: There may be a delay in seeing the substitution work as all files hosted via the Delivery System API are subject to 5 minute caching. This means it may be up to five minutes before your mapping file is read and used.</p>
        <p>Testing is simple because you don't have to change anything, which is the whole reason behind directed migration. Simply browse your page page that contains a Smart Player which you have mapped to a Brightcove Player and see the new player.</p>
        <p><strong>Smart Player</strong></p>
        <div><img src="/en/video-cloud/brightcove-player/guides/assets/directed-migration/smart-player.png" alt="smart player"></div>
        <p><strong>Brightcove Player</strong></p>
        <div><img src="/en/video-cloud/brightcove-player/guides/assets/directed-migration/Brightcove-Player.png" alt="Brightcove Player"></div>
      </div>
      <div id="Mapping_options" class="section">
        <h2>Mapping options</h2>
        <p>There are some situations where a more complex mappings must be created. They are detailed here.</p>
        <h3>enable_mapping</h3>
        <p>You can set up your mapping(s) in disabled mode. This allows the directed migration to be in place, but the Smart Player to be displayed unless you include <code>enableMapping=true</code> in your page URL request.  This way you can test in place before all users see the change.</p>
        <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="138-144"></code></p>
        <h3>smart_player_id</h3>
        <p>In early years of the Smart Player, the Javascript embed did not include a player key. For this reason we also allow you to specify a player ID in the mapping.</p>
        <p><code data-gist-id="1eb2201bf0f98e5315cc612651a8812f" data-gist-hide-footer="true" data-gist-line="149-155"></code></p>
      </div>
			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
          <li><a href="../../concepts/curl/curl.html">Set up cURL</a></li>
          <li><a href="../../concepts/delivery-system-api/guides/git-overview.html">Git Overview</a></li>
          <li><a href="../../concepts/intro-to-JSON/intro-to-JSON.html">Introducing JSON</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site-v1.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>


<iframe id="CSAT" src="
http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=
[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>

    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));

</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>
