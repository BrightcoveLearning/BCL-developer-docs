<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Geo-Filtering</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.4.7/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.4.7/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href="//files.brightcove.com/proxima-nova/font-faces.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.4.7/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="large-2 columns show-for-large-up">
			<div id="sidenav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Geo-Filtering</h1>
				<!-- Place document intro sentence(s) here -->
				<p>It is possible to restrict where a video can be used via geo-filtering. The <a href="http://support.brightcove.com/en/video-cloud/docs/geo-filtering-your-videos">Geo-filtering your Videos</a> document shows you how to apply geographic restrictions. This document instructs you how to implement code to inform users that a video is geo-filtered.</p>
				<p>By default Brightcove Player does not inform the user that a video is geo-filtered. It simply does not play. If you view the console you will see the following.</p>
				<p><code data-gist-id="8cf94f062cf27a9efdd7" data-gist-hide-footer="true" data-gist-line="1"></code></p>
				<p>This is not terribly helpful as you cannot be guaranteed the reason the video is forbidden to view is geo-filtering.</p>
				<p>This document implement a strategy to let the user know the video they are trying to watch is geo-filtered.</p>
			</div>
			<div id="errorobject" class="section">
				<h2>Player catalog's error object</h2>
				<p>The key to creating a user friendly message is the <code>error</code> object contained in Brightcove Player's <code>catalog</code>, shown below in a screenshot from a browser's console. Notice that the object contains a <code>data</code> property, which contains an array. The array will contain the last error the catalog encountered loading a video. In the example you see the element in the array is reporting a geo-filtering access issue.</p>
				<p><img src="/en/video-cloud/brightcove-player/guides/assets/error-object.png"></p>
			</div>
      <div id="htmlmessage" class="section">
        <h2>Message in HTML</h2>
        <p>Once you understand the structure of the error that is produced, and where it is located, you can use some JavaScript to display a description error for the user. The basic implementation steps are:</p>
				<ul>
				    <li>Create a target element in which to display the message</li>
				    <li>Be sure the player is ready to act upon</li>
				    <li>Check to see if any error has occurred</li>
				    <li>Check to see if the error is a geo-filtering issue</li>
				    <li>Display message to user</li>
				</ul>
				<p>The following code implements these steps.</p>
				<ul>
				    <li>Line 13: Insert some HTML element, in this case a paragraph, created; give an <code>id</code> for targeting purposed.</li>
				    <li>Line 18: Use the <code>ready()</code> method to be sure player is ready to act upon.</li>
				    <li>Line 21: Use an <code>if</code> statement to be sure some error has occurred.</li>
				    <li>Line 22: Assign a variable the specific error information from Brightcove Player catalog's error object.</li>
				    <li>Line 23: Use an <code>if</code> statement to be sure the specific error information exists AND the type of error is from geo-filtering.</li>
				    <li>Line 24: Inject an appropriate text message into the HTML element created at line 13.</li>
				</ul>
				<p><code data-gist-id="8cf94f062cf27a9efdd7" data-gist-hide-footer="true" data-gist-line="5-28" data-gist-highlight-line="13,18,21-24"></code></p>
				<p>The following screenshot shows the message displayed below the player. (Note the image in the player is the poster, which is not geo-restricted.)</p>
				<p><img src="/en/video-cloud/brightcove-player/guides/assets/geo-filtering-html-message.png"></p>
      </div>
      <div id="error plugin" class="section">
				<h2>Message via errors plugin</h2>
        <p>You may wish to have the message displayed in the player and/or not have the even the poster appear if the video is geo-filtered. You can do this utilizing the errors plugin. The errors plugin is automatically loaded into the player, so you do not need to explicitly perform that operation. For details on the errors plugin beyond what will be mentioned in this document see the <a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/errors-plugin.html">Display Error Messages Plugin</a> document.</p>
				<ul>
				    <li>Line 45: Use the <code>ready()</code> method to be sure player is ready to act upon.</li>
				    <li>Lines 48-55: Call the player's <code>error()</code> method, passing in the <code>errors</code> object which defines the error code and information to display in the error. Note that the choice of <code>-3</code> for the error code is arbitrary, and the only guidance is not to use a standard error code.</li>
				    <li>Line 59: Call the <code>error()</code> method to display the custom error information. The logic as to when to display the error is the same as above. The object passed as an argument defines which error message to display.</li>
				</ul>
				<p><code data-gist-id="8cf94f062cf27a9efdd7" data-gist-hide-footer="true" data-gist-line="44-63" data-gist-highlight-line="45,48-55,59"></code></p>
				<p>The following screenshot shows a appropriate error in the player that the video is geo-filtered.</p>
				<p><img src="/en/video-cloud/brightcove-player/guides/assets/geo-filtering-errors-plugin.png"></p>
      </div>
      <div id="generalerror" class="section">
        <h2>General error display</h2>
        <p>The two sections above deal specifically with displaying the error generated when a geo-restricted video is viewed from a restricted locale. </p>
				<p><img src="/en/video-cloud/brightcove-player/guides/assets/geo-filtering-general-error.png"></p>
				<p><code data-gist-id="8cf94f062cf27a9efdd7" data-gist-hide-footer="true" data-gist-line="70-85" data-gist-highlight-line="45,48-55,59"></code></p>
				<p>The following screenshot shows a appropriate error in the player that the video is geo-filtered.</p>
      </div>
			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li><a href="">DOC TITLE</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.2/fastclick.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.4.7/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	<div class="footer text-center"><a href="mailto:docs@brightcove.com">Questions or comments?</a></div>
</body>

</html>
