<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="product" content="Video Cloud">
    <meta name="audience" content="Player Developer">
    <meta name="task" content="">
    <meta name="feature" content="General Info">
    <meta name="type" content="Reference">
    <meta name="keywords" content="player">
    <!-- End Drupal Taxonomy Data -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Video Metadata from mediainfo</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
  <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
  <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

  <script>
      (function(i, s, o, g, r, a, m) {
          i['GoogleAnalyticsObject'] = r;
          i[r] = i[r] || function() {
              (i[r].q = i[r].q || []).push(arguments)
          }, i[r].l = 1 * new Date();
          a = s.createElement(o),
              m = s.getElementsByTagName(o)[0];
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-2728311-29', 'auto');
      ga('send', 'pageview');
  </script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
      <h1>Video Metadata from mediainfo</h1>
    <!-- begin drupal content -->
    <article class="bcls-article">
			<header id="bcls_header" class="bcls-header">
				<!-- Place document intro sentence(s) here -->
				<p>In this topic you will learn how to retrieve information about the video (metadata) from the <code>mediainfo</code> object. <span class="video-cloud-only">The property is populated after the <code>loadstart</code> event is dispatched.</span></p>
			</header>
      <section id="mediainfo" class="bcls-section">
        <h2>mediainfo property</h2>
				<p class="video-cloud-only">The <code>mediainfo</code> property is an object which contains information (metadata) on the current video in the player.</p>
				<p  class="perform-only">The <code>mediainfo</code> property is an object which contains information (metadata) on the current video in the player. You populate the object with video information from your CMS (content management system) or database.</p>
				<p>After the <code>mediainfo</code> object is populated you can use it for convenient data retrieval when wishing to display video information, like the video name or description. The object is also used in analytics collection.</p>
				<h3>Fields in mediainfo</h3>
				<p>The fields present in the <code>mediainfo</code> property are as follows:</p>
				<table>
				  <tr>
				    <th>Field Name</th>
				    <th>Description</th>
				    <th>Data Type</th>
				  </tr>
          <tr>
				    <td>account_id</td>
				    <td>Brightcove account </td>
				    <td>string</td>
				  </tr>
          <tr>
				    <td>ad_keys</td>
				    <td>For future support</td>
				    <td>N/A</td>
				  </tr>
          <tr>
            <td>created_at</td>
            <td>Creation date and time</td>
            <td>UTC (2011-09-28T20:06:37.879Z)</td>
          </tr>
          <tr>
            <td>cue_points</td>
            <td>List of cue points as an array of objects</td>
            <td>array of objects</td>
          </tr>
          <tr>
            <td>custom_fields</td>
            <td>Key-value pairs of custom field names and associated values</td>
            <td>Object</td>
          </tr>
          <tr>
            <td>description</td>
            <td>Short description, 250 characters maximum</td>
            <td>string</td>
          </tr>
          <tr>
            <td>duration</td>
            <td>Length of video in seconds</td>
            <td>numeric</td>
          </tr>
          <tr>
				    <td>economics</td>
				    <td>Contains either <strong>AD_SUPPORTED</strong> or <strong>FREE</strong>. If the media is marked <strong>FREE</strong>, neither IMA3 nor FreeWheel ads will play.</td>
				    <td>string</td>
				  </tr>
          <tr>
            <td>id</td>
            <td><span class="video-cloud-only">Video Cloud ID</span><span class="perform-only">Unique identifier associated with the video</span></td>
            <td>string</td>
          </tr>
          <tr>
				    <td>link</td>
				    <td>Object that contains link <strong>text</strong> and <strong>url</strong> properties</td>
				    <td>object</td>
				  </tr>
          <tr>
            <td>long_description</td>
            <td>Description, 5000 characters maximum</td>
            <td>string</td>
          </tr>
          <tr>
            <td>name</td>
            <td>Video title</td>
            <td>string</td>
          </tr>
          <tr>
            <td>poster</td>
            <td>URL to the poster image</td>
            <td>string</td>
          </tr>
          <tr>
            <td>posterSources</td>
            <td>Array containing poster sources</td>
            <td>array</td>
          </tr>
          <tr>
            <td>published_at</td>
            <td>Publication date and time</td>
            <td>UTC (2011-09-28T20:06:37.879Z)</td>
          </tr>
          <tr>
            <td>rawSources</td>
            <td>Rendition information</td>
            <td>array</td>
          </tr>
          <tr>
            <td>reference_id</td>
            <td><span class="video-cloud-only"></span>Video Cloud reference ID<span class="perform-only">Key or identifier from external database or CMS</span></td>
            <td>string</td>
          </tr>
          <tr>
            <td>sources</td>
            <td>List of renditions as an array of objects; each object includes at least two elements: <strong>type</strong> and <strong>src</strong></td>
            <td>array of objects</td>
          </tr>
          <tr>
            <td>tags</td>
            <td>Tags (metadata) associated with the video</td>
            <td>array of strings</td>
          </tr>
          <tr>
            <td>textTracks</td>
            <td>Array that holds text tracks for captions, cue points, etc.</td>
            <td>array</td>
          </tr>
          <tr>
            <td>thumbnail</td>
            <td>URL to the thumbnail image</td>
            <td>string</td>
          </tr>
          <tr>
            <td>thumbnailSources</td>
            <td>Data structure containing poster theumbnails</td>
            <td>string</td>
          </tr>
          <tr>
            <td>updated_at</td>
            <td>Update date and time</td>
            <td>UTC (2011-09-28T20:06:37.879Z)</td>
          </tr>
				</table>
			</section>
			<section id="code" class="bcls-section video-cloud-only">
				<h2>Populate mediainfo</h2>
				<p>Using the <code>on()</code> method you wait for the <code>loadstart</code> event to be dispatched, then in the corresponding event handler you access the values stored in <code>mediainfo</code> object. From the code below note the use of <code>console.log</code> that displays the <code>mediainfo</code> object (lines 111-113).</p>
        <pre class="line-numbers" data-start="100"><code class="language-html">  &lt;video id=&quot;myPlayerID&quot;
    data-video-id=&quot;4093643993001&quot;
    data-account=&quot;1752604059001&quot;
    data-player=&quot;VJvZIueYx&quot;
    data-embed=&quot;default&quot;
    class=&quot;video-js&quot; controls=&quot;&quot;&gt;&lt;/video&gt;
  &lt;script src=&quot;//players.brightcove.net/1752604059001/VJvZIueYx_default/index.min.js&quot;&gt;&lt;/script&gt;

  &lt;script type=&quot;text/javascript&quot;&gt;
    videojs('myPlayerID').ready(function(){
      var myPlayer = this;
      <span class="bcls-highlight">myPlayer.on('loadstart',function(){
        console.log('mediainfo', myPlayer.mediainfo);
      })</span>
    });
  &lt;/script&gt;</code></pre>
        <p>An example display from the console is shown here:</p>
        <figure class="bcls-figure">
            <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/references/mediainfo/console-display.png" alt="console display">
        </figure>
			</section>
			<section id="populatetheobject" class="bcls-section perform-only">
				<h2>Populate the object</h2>
				<p>You can manually populate the <code>mediainfo</code> property with metadata from your  CMS or database. You can then use the <code>mediainfo</code> object's <code>sources</code> property to populate the player with a video rendition.</p>
				<aside class="bcls-aside bcls-aside--warning  perform-only">Note: If this manual process of building and populating the <code>mediainfo</code> object is NOT done 3rd party analytics will probably fail. This is because <code>mediainfo</code> is the integration point for plugins to get video metadata.</aside>
				<ul>
				    <li>Lines 32-37: In-page embed player implementation</li>
				    <li>Lines 40-52: Manually creates the a video object; in actuality data comes from CMS or database and object built dynamically</li>
				    <li>Line 54-55: Ensures the player is ready to use and assigns the player instance to a variable</li>
				    <li>Line 56: Assigns the manually created video object to the player's <code>mediainfo</code> object</li>
				    <li>Line 57: Uses the player's <code>src</code> method to assign one or more video renditions, which are stored in the <code>mediainfo</code> object's <code>sources</code> property, to the player</li>
				</ul>
        <pre class="line-numbers" data-start="32"><code class="language-html">  &lt;video id=&quot;myPlayerID&quot;
    data-account=&quot;3676484086001&quot;
    data-player=&quot;2433352b-a2e2-4b7e-9a15-2d9ec7f07e9d&quot;
    data-embed=&quot;default&quot;
    class=&quot;video-js&quot; controls&gt;&lt;/video&gt;
  &lt;script src=&quot;//players.brightcove.net/3676484086001/2433352b-a2e2-4b7e-9a15-2d9ec7f07e9d_default/index.min.js&quot;&gt;&lt;/script&gt;

  &lt;script type=&quot;text/javascript&quot;&gt;
    //Populate video object (normally from database or CMS)
    var videoObject = new Object();
    videoObject.name = &quot;Hand made video object test&quot;;
    videoObject.id = &quot;1234msb&quot;;
    videoObject.description = &quot;short description for hand made video object&quot;;
    videoObject.account_id = &quot;1507807800001&quot;;
    videoObject.sources = [{
        &quot;src&quot;: &quot;http://solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8&quot;,
        &quot;type&quot;: &quot;application/x-mpegURL&quot;
      }, {
        &quot;src&quot;: &quot;http://solutions.brightcove.com/bcls/assets/videos/Tiger.mp4&quot;,
        &quot;type&quot;: &quot;video/mp4&quot;
      }];

    videojs(&quot;myPlayerID&quot;).ready(function() {
      var myPlayer = this;
      <span class="bcls-highlight">myPlayer.mediainfo = videoObject;
      myPlayer.src(myPlayer.mediainfo.sources);</span>
    });
  &lt;/script&gt;</code></pre>
			</section>
      <section id="displaytagsfields" class="bcls-section">
        <h2>Display tags and custom fields</h2>
        <p>Both the tags and custom fields are stored in complex data structures. The <strong>custom_fields</strong> in an object and <strong>tags</strong> in an array. The following screenshot shows the custom fields and tags highlighted in the <code>mediainfo</code> object.</p>
        <figure class="bcls-figure">
            <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/references/mediainfo/tags-custom-fields.png" alt="tags and custom fields in console display">
        </figure>
        <p>To display the data from these complex data structures you need to kinds of loops. A <code>for</code> loop is used to iterate over the tags array (lines 128-133) and inject the dynamically built HTML unordered list into a <code>&lt;div&gt;</code> ( defined in line 125). A <code>for-in</code> loop is used to iterate over the custom fields object (lines 137-139) and inject the dynamically built HTML unordered list into the <code>&lt;div&gt;</code>.</p>
        <pre class="line-numbers" data-start="125"><code class="language-javascript">  &lt;div id=&quot;displayInfo&quot;&gt;&lt;/div&gt;

        //Use JavaScript to display the tags
        var numTags = myPlayer.mediainfo.tags.length;
        displayInfo.innerHTML += &quot;&lt;h1&gt;Tags:&lt;/h1&gt;&lt;ul&gt;&quot;;
        for (var i = 0; i &lt; numTags; i++) {
          displayInfo.innerHTML += &quot;&lt;li&gt;&quot; + myPlayer.mediainfo.tags[i] + &quot;&lt;/li&gt;&quot;;
        };
        displayInfo.innerHTML += &quot;&lt;/ul&gt;&lt;br /&gt;&quot;;

        //Use JavaScript to display custom fields
        displayInfo.innerHTML += &quot;&lt;h1&gt;Custom Fields:&lt;/h1&gt;&lt;ul&gt;&quot;;
        for (var key in myPlayer.mediainfo.custom_fields) {
         displayInfo.innerHTML += &quot;&lt;li&gt;&lt;strong&gt;&quot; + key + &quot;&lt;/strong&gt;: &quot; + myPlayer.mediainfo.custom_fields[key] + &quot;&lt;/li&gt;&quot;;
        }
        displayInfo.innerHTML += &quot;&lt;/ul&gt;&quot;;</code></pre>
        <p>The rendered HTML appears as shown in this screenshot.</p>
        <figure class="bcls-figure">
            <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/references/mediainfo/html-display.png" alt="tags and custom display in HTML">
        </figure>
        <aside class="bcls-aside bcls-aside--information">Note: The custom field keys, <strong>customfield1</strong> and <strong>customfield2</strong>, are demo names only. You would choose key names that reflect the data stored in the custom field.</aside>
      </section>
    </article>
    <!-- end drupal content -->
			<div class="section video-cloud-only" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li><a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/events.html">Understanding Player Events</a></li>
				</ul>
			</div>
		</div>
	</div>

  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v2.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
  <script>
      $(document).foundation();
  </script>

<div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<div class="bcls-footer"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>
