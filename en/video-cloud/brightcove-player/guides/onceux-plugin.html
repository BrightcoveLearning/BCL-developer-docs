img<!DOCTYPE html>
<html lang="en">

<head>
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>OnceUX Plugin</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href="//files.brightcove.com/proxima-nova/font-faces.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/styles/github.min.css">
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/js/vendor/modernizr.js"></script>
  
  <!-- Page styles -->
	<style>
    .player-block iframe {
      width: 640px;
      height: 360px;
    }
	</style>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="large-2 columns show-for-large-up">
			<div id="sidenav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>OnceUX Plugin</h1>
				<!-- Place document intro sentence(s) here -->
				<p>Using the OnceUX plugin with your Brightcove player, you can playback any Brightcove Once video.</p>
        <p>By default, the plugin enforces that all advertisements are watched and displays an ad count-down timer while they play. You can easily customize this plugin to use your own overlays and allow users to skip advertisements.</p> 
				
      <div id="player" class="section">
        <h2>The player</h2>
        <p>This example enforces the playback of an advertisement before the main subject video. An overlay is displayed with an ad count-down timer.</p>

        <div class="player-block">
            <iframe src='//players.brightcove.net/1752604059001/b2ce0968-2eb1-445c-af0d-4d54e6b73bbb_default/index.html' allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>

        </div>
      </div><!-- id="player" -->  
        
			</div>
				
      <div id="getstarted" class="section">
            <h2>Get started</h2>
        <p>Here is the <code>curl</code> statement to create a Brightcove player with the OnceUX plugin.</p>
        <p>The properties are defined as follows:</p>
				<ul>
          <li><code>scripts</code>: This property includes the script for the plugin.</li>
          <li><code>stylesheets</code>: This property includes the styles for the plugin.</li>
          <li><code>poster</code>: This property defines the poster image for the player.</li>
          <li><code>plugins</code>: This property contains an array of properties and values. For this plugin, you only need to supply the <code>name</code> property with the value of <code>onceux</code>.</li>
          <li><code>options</code>: This property is used to pass data to the plugin.</li>
          <li><code>metadataUri</code>:  This property specifies the URI to call to get the Once VMAP data.</li>
				</ul>	
        <p><code data-gist-id="ef63cba9fedd4f7ed5c5" data-gist-hide-footer="true" data-gist-line="3-31"></code></p>
        <p>The values for the <code>options</code> property are defined in the next section.</p>
      </div>
      
      <div id="options" class="section">
            <h2>Options</h2>
        <p>When you add the OnceUX plugin to your player, as shown in the <code>curl</code> statement above, you must pass an <code>options</code> object to the plugin to initialize it. This object must contain a <code>metadataUri</code> string or a VMAP object, along with any of the other optional properties:</p>
        <ul>
          <li><code>metadataUri</code></li>
          <ul>
            <li>Required</li>
            <li>Type: String</li>
            <li>Default: undefined</li>
            <li>Description: The URI to call for the VMAP data.</li>
            <li>Example: "http://onceux.unicornmedia.com/now/ads/vmap/od/auto/1234"</li>
          </ul>
          <li><code>vmap</code></li>
          <ul>
            <li>Optional</li>
            <li>Type: Object</li>
            <li>Default: none</li>
            <li>Description: If supplied, the plugin will use this VMAP object instead of calling the metadata URL to get the VMAP data.</li>
            <li>Example: see this <a href="//solutions.brightcove.com/bcls/brightcove-player/onceux-plugin/vmap-example.json">VMAP object</a></li>
          </ul>
          <li><code>hideOverlay</code></li>
          <ul>
            <li>Optional</li>
            <li>Type: Boolean</li>
            <li>Default: false</li>
            <li>Description: If true, the countdown timer and the <strong>Learn More</strong> click through overlays will not be shown while ads are playing.</li>
            <li>Example: true (hides default overlays)</li>
          </ul>
          <li><code>timeout</code></li>
          <ul>
            <li>Optional</li>
            <li>Type: Number</li>
            <li>Default: 45000</li>
            <li>Description: The time in milliseconds to wait for the Once URI to respond.</li>
            <li>Example: 10000 (wait 10 seconds)</li>
        </ul>
      </div>
        
      <div id="properties" class="section">
        <h2>Properties</h2>
        <p>You can view the values of runtime properties on the <code>onceux</code> object. Not all properties are currently parsed from the VMAP. See the <a href="//solutions.brightcove.com/bcls/brightcove-player/onceux-plugin/properties-example.json">properties example</a> for the current objects that are returned.</p>
        <p>The following runtime properties are available:</p>
        <ul>
          <li><code>player.onceux.timeline</code></li>
          <ul>
            <li>Type: Object</li>
            <li>Description: An object providing the essential parsed "absolute" timeline information from the VMAP.</li>
            <li>Example: </li>
            <p><code data-gist-id="ef63cba9fedd4f7ed5c5" data-gist-hide-footer="true" data-gist-line="34-42"></code></p>
          </ul>
          <li><code>player.onceux.timeline.contenturi</code></li>
          <ul>
            <li>Type: String</li>
            <li>Description: The content URI parsed from the VMAP.</li>  
          </ul>
          <li><code>player.onceux.timeline.absoluteDuration</code></li>
          <ul>
            <li>Type: Number</li>
            <li>Description: The total duration of the content including all Linear advertisements.</li>  
          </ul>
          <li><code>player.onceux.timeline.contentDuration</code></li>
          <ul>
            <li>Type: Number</li>
            <li>Description: The duration of the content excluding all Linear advertisements.</li>  
          </ul>
          <li><code>player.onceux.timeline.adRolls</code></li>
          <ul>
            <li>Type: Array</li>
            <li>Description: An Array of JSON objects representing the unmodified VAST 'AdBreak' info parsed from the Once VMAP XML file.</li>
            <li>Properties included in the <code>adRolls</code> array:</li>
            <ul>
              <li><code>adRoll.absoluteBeginTime</code></li>
              <ul>
                <li>Indicates the absolute time at which the adRoll will begin.</li>
              </ul>
              <li><code>adRoll.absoluteEndTime</code></li>
              <ul>
                <li>Indicates the absolute time at which the adRoll will end.</li>
              </ul>
              <li><code>adRoll.index</code></li>
              <ul>
                <li>Indicates the position of the adRoll with respect to the other adRollsIndicates the absolute time at which the adRoll will end.</li>
              </ul>
              <li><code>adRoll.playCount</code></li>
              <ul>
                <li>Indicates the number of times the adRoll has completed. Value 0 means that it has not been played.</li>
              </ul>
              <li><code>linearAd.absoluteBeginTime</code></li>
              <ul>
                <li>Indicates the absolute time at which the linear ad will begin.</li>
              </ul>
              <li><code>linearAd.absoluteEndTime</code></li>
              <ul>
                <li>Indicates the absolute time at which the linear ad will end.</li>
              </ul>
              <li><code>linearAd.index</code></li>
              <ul>
                <li>Indicates the position of the linear ad within the adRoll.</li>
              </ul>
              <li><code>linearAd.playCount</code></li>
              <ul>
                <li>Indicates the number of times the linear ad has been played. Value 0 means that it has not been played.</li>
              </ul>
              <li><code>linearAd.skipOffset</code></li>
              <ul>
                <li>Indicates the time after which the linear ad can be skipped. Value 0 means that the linear ad is not skippable.</li>
              </ul>
              <li><code>linearAd.companionAd</code></li>
              <ul>
                <li>An object representing the unmodified VAST companionAd info.</li>
              </ul>
            </ul>
            
          </ul>
          
      </div>
			
      <div id="standarderrors" class="section">
        <h2>Standard errors</h2>
        <p>This plugin has a set of default error messages for the standard HTML5 video errors based on the runtime error code value:</p>
			<ul>
				<li>Error code: 1</li>
				<ul>
					<li>Message: MEDIA_ERR_ABORTED</li>
					<li>Description: The video download was cancelled</li>
				</ul>
				<li>Error code: 2</li>
				<ul>
					<li>Message: MEDIA_ERR_NETWORK</li>
					<li>Description: The video connection was lost, please confirm you're connected to the internet</li>
				</ul>
				<li>Error code: 3</li>
				<ul>
					<li>Message: MEDIA_ERR_DECODE</li>
					<li>Description: The video is bad or in a format that can't be played on your browser</li>
				</ul>
				<li>Error code: 4</li>
				<ul>
					<li>Message: MEDIA_ERR_SRC_NOT_SUPPORTED</li>
					<li>Description: This video is either unavailable or not supported in this browser</li>
				</ul>
				<li>Error code: 5</li>
				<ul>
					<li>Message: MEDIA_ERR_ENCRYPTED</li>
					<li>Description: The video you're trying to watch is encrypted and we don't know how to decrypt it</li>
				</ul>
			</ul>
		    <p>If an error does not have an associated error code, a generic message is displayed:</p>
			<ul>
				<li>Error code: unknown</li>
				<ul>
					<li>Message: MEDIA_ERR_UNKNOWN</li>
					<li>Description: An unanticipated problem was encountered, check back soon and try again</li>
				</ul>
			</ul>
      </div>
			
	  <div id="overridetext" class="section">
        <h2>Override text</h2>
        <p>There are three parts of the error message that you can change:</p>
		<ul>
			<li><code>headline</code> : This is the message text at the top.</li>
			<li><code>type</code> : This is the <strong>Error Code:</strong> text.</li>
			<li><code>message</code> : This is the <strong>Technical details:</strong> text.</li>
		</ul>
		<p><img src="/en/video-cloud/brightcove-player/assets/error-message-plugin2.png"></p>
		<p>Once your player is created, use the HTTP <code>PATCH</code> method to update it as follows:</p>
				<p>In the <code>data</code> property from the curl statement shown below you see an example of how to override the message text for the standard error with an error code value of <code>4</code>. The properties are defined as follows:</p>
				<ul>
				    <li><code>plugins</code>: This property contains an array of properties and values. For this plugin, you only need to supply the <code>name</code> property with the value of <code>errors</code>.</li>
				    <li><code>options</code>: This property is used to pass data to the plugin.</li>
				    <li><code>errors</code>:  This property defines the error code that you want to update. Here we are overriding the message text for the <code>headline</code>, <code>type</code>, and <code>message</code>.<p class="BCL-aside">Note: the error code can be any string value, such as overriding the text for the <code>unknown</code> message.</p></li>
				</ul>	
		<p><code data-gist-id="89b496092aee326f7216" data-gist-hide-footer="true" data-gist-line="1-19"></code></p>  
		<p>If you include the errors script in your code, you can override message text as follows:</p>
		<p><code data-gist-id="89b496092aee326f7216" data-gist-hide-footer="true" data-gist-line="68-77"></code></p>  
      </div>
			
	  <div id="customerrors" class="section">
        <h2>Custom errors</h2>
        <p>You can also define your own custom error messages:</p>
		    <ul>
				<li>Custom error code values can be alphanumeric. We recommend using a negative integer or a text value to keep from colliding with the standard code values.</li>
				<li>Custom error messages can be named anything you want. We recommend that they begin with <code>PLAYER_ERR</code> versus the standardized <code>MEDIA_ERR</code> to avoid confusion.</li>
			</ul>
		<p>Two custom error messages have been added as a reference:</p>
			<ul>
				<li>Error code: '-1'</li>
				<ul>
					<li>Message: PLAYER_ERR_NO_SRC</li>
					<li>Description: No video has been loaded</li>
				</ul>
				<li>Error code: '-2'</li>
				<ul>
					<li>Message: PLAYER_ERR_TIMEOUT</li>
					<li>Description: Could not download the video</li>
				</ul>
			</ul>
		  
		<h3>Adding custom errors</h3>
          <p>Refer to the <a href="#overridetext">Override text</a> section for details about the message parts. When adding a custom error message, use the <code>options</code> property to pass data to the plugin. This example creates a new custom message with an error code value of <code>-3</code> and includes text based on an age gate test.</p>
				
		  <p><code data-gist-id="89b496092aee326f7216" data-gist-hide-footer="true" data-gist-line="22-40"></code></p>  
		  <p>If you include the errors script in your code, you can add custom messages as follows:</p>
		  <p><code data-gist-id="89b496092aee326f7216" data-gist-hide-footer="true" data-gist-line="111-120"></code></p>
		  <h3>Displaying custom errors</h3>
          <p>When you define custom errors, you need to let video.js know when you want to display it. To do this, create your own code to determine when the message should be displayed. Then use the <code>error()</code> function to display the message as follows:</p>
				
		  <p><code data-gist-id="89b496092aee326f7216" data-gist-hide-footer="true" data-gist-line="122-129"></code></p> 
		  <p>Here we set the <code>age_appropriate</code> variable to <code>false</code>, but you would add your own code to determine when to display your custom error messages.</p>
		  <p class="BCL-aside">Note: any code to throw custom errors must wait for the video to load. Use the <code>loadstart</code> event to determine this. If you try to display your message without waiting, then your message will dissappear after the video loads.</p>
      </div>	
			
	  <div id="knownissues" class="section">
        <h2>Known issues</h2>
		<p>On iPhones, the tap events for error messages do not bubble up to the parent video element. This means that you can not close an error message once it appears. This behavior should not pose a problem since the video does not play anyway.</p>
      </div>
			
			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li> <a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/plugin-dev-quick-start.html#passdatatoplugin">Quick Start to Plugin Development</a>
					</li>
					<li> <a href="//docs.brightcove.com/en/video-cloud/player-management/guides/player-mgmt-quick-start.html#customizePlayer">Quick Start to Player Management - Plugin Section</a>
					</li>
					<li> <a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/plugin-guide.html">Player Plugin Overview</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.7/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.0/fastclick.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	<div class="footer text-center"><a href="mailto:docs@brightcove.com">Questions or comments?</a></div>
</body>

</html>