<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="product" content="Video Cloud">
    <meta name="audience" content="API Developer">
    <meta name="task" content="Managing Videos">
    <meta name="api" content="CMS">
    <meta name="feature" content="Geo Restriction">
    <meta name="keywords" content="geo-restriction">
    <!-- End Drupal Taxonomy Data -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title>Using the CMS API: Managing Clips</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');

    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <h1>Using the CMS API: Managing Clips</h1>
            <!-- begin drupal content -->
            <article class="bcls-article">
                <header id="bcls_header" class="bcls-header">
                    <p>In this topic, you will learn how to manage video clips using the CMS API. Clips are videos created from segments of other videos generated by <a href="https://support.brightcove.com/en/video-cloud/docs/creating-video-clip-using-brightcove-social">Brightcove Social</a> and other tools. If the clips are created for sharing via Brightcove Social, you may wish to remove their renditions to reduce your managed storage and/or disable them to prevent them from showing up in your video workflows.</p>
                </header>
                <section id="findingClips" class="bcls-section">
                    <h2>Finding clips</h2>
                    <p>There are special search terms for the CMS API to help you locate clips in your account:</p><ul>
                        <li><code>q=%2Bis_clip:true</code> - returns only clips</li>
                        <li><code>q=%2Dis_clip:true</code> - returns only non-clips</li>
                        <li><code>q=%2Bis_clip:false</code> - returns only non-clips (functionally identical to the previous item)</li>
                        <li><code>q=%2Bclip_source_video_id:<span class="bcls-input">video_id</span></code> - returns clips generated from the specified video</li>
                    </ul>
                    <aside class="bcls-aside bcls-aside--information">Notes:
                        <ul>
                            <li><code>%2B</code> is a URI-encoded <code>+</code> sign</li>
                            <li><code>%2D</code> is a URI-encoded <code>-</code> sign</li>
                            <li>Remember that <code>limit</code> and <code>offset</code> apply: by default, CMS API queries return 10 videos (maximum: limit=100), so if there are many clips in the account, you will need to make multiple requests with appropriate <code>limit</code> and <code>offset</code> parameters to find them all. You can get a count of all clips by sending a GET request to the CMS API counts endpoint: <code>.../accounts/account_id/<span class="bcls-highlight">counts</span>/videos/<span class="bcls-highlight">q=%2Bis_clip:true</span></code></li>
                        </ul>
                    </aside>
                    <h3>Sample</h3>
                    <h4>Request</h4>
<pre class="line-numbers"><code class="language-http">https://cms.api.brightcove.com/v1/accounts/57838016001/videos?<span class="bcls-highlight">q=%2Bis_clip:true</span></code></pre>
                    <h4>Response</h4>
<pre class="line-numbers"><code class="language-json">[
  {
    "id": "5235328819001",
    "account_id": "57838016001",
    "ad_keys": null,
    <span class="bcls-highlight">"clip_source_video_id": "4752143002001",</span>
    "complete": true,
    "created_at": "2016-12-04T17:06:20.562Z",
    "cue_points": [],
    "custom_fields": {
      "subject": "Birds"
    },
    "delivery_type": "static_origin",
    "description": null,
    "digital_master_id": "5235339325001",
    "duration": 24042,
    "economics": "AD_SUPPORTED",
    "folder_id": null,
    "geo": null,
    "has_digital_master": true,
    "images": {
      "thumbnail": {
        "asset_id": "5235341448001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235341448001_5235328819001-th.jpg?pubId=57838016001&videoId=5235328819001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235341448001_5235328819001-th.jpg?pubId=57838016001&videoId=5235328819001",
            "height": 90,
            "width": 160
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/2025/57838016001_5235341448001_5235328819001-th.jpg?pubId=57838016001&videoId=5235328819001",
            "height": 90,
            "width": 160
          }
        ]
      },
      "poster": {
        "asset_id": "5235339121001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235339121001_5235328819001-vs.jpg?pubId=57838016001&videoId=5235328819001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235339121001_5235328819001-vs.jpg?pubId=57838016001&videoId=5235328819001",
            "height": 360,
            "width": 640
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/2025/57838016001_5235339121001_5235328819001-vs.jpg?pubId=57838016001&videoId=5235328819001",
            "height": 360,
            "width": 640
          }
        ]
      }
    },
    "link": null,
    "long_description": null,
    "name": "greatblueheron.mp4 - Clip-2016-12-04",
    "original_filename": "2efadac9-8e36-423c-b988-afcf2cd23c49.mov",
    "projection": null,
    "published_at": "2016-12-04T17:06:20.562Z",
    "reference_id": null,
    "schedule": null,
    "sharing": null,
    "state": "ACTIVE",
    "tags": [
      "newtag"
    ],
    "text_tracks": [],
    "updated_at": "2016-12-04T17:08:41.944Z"
  },
  {
    "id": "5235312567001",
    "account_id": "57838016001",
    "ad_keys": null,
    <span class="bcls-highlight">"clip_source_video_id": "5220368996001",</span>
    "complete": true,
    "created_at": "2016-12-04T17:07:58.450Z",
    "cue_points": [],
    "custom_fields": {
      "subject": "Birds"
    },
    "delivery_type": "static_origin",
    "description": "Mother and child owls...",
    "digital_master_id": "5235341452001",
    "duration": 39253,
    "economics": "AD_SUPPORTED",
    "folder_id": null,
    "geo": null,
    "has_digital_master": true,
    "images": {
      "thumbnail": {
        "asset_id": "5235339124001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235339124001_5235312567001-th.jpg?pubId=57838016001&videoId=5235312567001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235339124001_5235312567001-th.jpg?pubId=57838016001&videoId=5235312567001",
            "height": 90,
            "width": 160
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/1897/57838016001_5235339124001_5235312567001-th.jpg?pubId=57838016001&videoId=5235312567001",
            "height": 90,
            "width": 160
          }
        ]
      },
      "poster": {
        "asset_id": "5235341824001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235341824001_5235312567001-vs.jpg?pubId=57838016001&videoId=5235312567001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235341824001_5235312567001-vs.jpg?pubId=57838016001&videoId=5235312567001",
            "height": 540,
            "width": 960
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/1897/57838016001_5235341824001_5235312567001-vs.jpg?pubId=57838016001&videoId=5235312567001",
            "height": 540,
            "width": 960
          }
        ]
      }
    },
    "link": null,
    "long_description": null,
    "name": "Great Horned Owl - Clip-2016-12-04",
    "original_filename": "c0640095-e696-41ea-8e7e-2ebf4d090d69.mov",
    "projection": null,
    "published_at": "2016-12-04T17:07:58.450Z",
    "reference_id": null,
    "schedule": null,
    "sharing": null,
    "state": "ACTIVE",
    "tags": [
      "bird",
      "nature",
      "air"
    ],
    "text_tracks": [],
    "updated_at": "2016-12-04T17:09:16.967Z"
  }
]</code></pre>
                </section>
                <section id="removingAssets" class="bcls-section">
                    <h2>Removing Assets</h2>
                    <p>If you are not going to use your clips for any other purpose than sharing the to social media sites, you may wish to reduce your managed storage by removing assets from them. In terms of storage, the renditions make the most difference, but you can remove posters and thumbnails as well, if you wish (this would also help to identify the clips in Studio as not being videos for general use).</p>
                    <aside class="bcls-aside bcls-aside--warning">You do <strong>not</strong> want to delete the clip itself, because if you do, you will no longer be able to get social analytics for it.</aside>
                    <p>To remove assets, you will use <a href="http://docs.brightcove.com/en/video-cloud/cms-api/references/cms-api/versions/v1/index.html#api-assetGroup">the asset endpoints of the CMS API</a>. The logic is simple: first GET the assets to retrieve their ids in the Video Cloud system, and them DELETE them:</p>
                    <figure class="bcls-figure">
                        <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/cms-api/guides/clips/clips.svg" alt="Logic for Removing Rendtions">
                        <figcaption class="bcls-caption--image">Logic for Removing Rendtions</figcaption>
                    </figure>
                    <p>Usually there will be only a single poster and thumbnail to delete, but there will generally be multiple renditions, so if you are going to do this programmatically, you will need to loop over the array of objects returned by the GET renditions request and delete the renditions one by one. Below are the relevant API endpoints and some sample code (JavaScript + a proxy written in PHP to make the API requests) to perform the tasks of removing the assets.</p>
                </section>
                <section id="assetEndpoints" class="bcls-section">
                    <h2>Asset endpoints</h2>
                    <p>Here are the relevant asset endpoints you will need to remove assets. For all these endpoints, the base URL is:</p>
<pre class="line-numbers"><code class="language-http">https://cms.api.brightcove.com/v1/accounts</code></pre>
                    <h3>Renditions</h3>
                    <h4>GET renditions</h4>
<pre class="line-numbers"><code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/renditions</code></pre>
                    <h4>DELETE a rendition</h4>
<pre class="line-numbers"><code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/renditions/<span class="bcls-input">rendition_id</span></code></pre>
                    <h3>Posters</h3>
                    <h4>GET posters</h4>
<pre class="line-numbers"><code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/poster</code></pre>
                    <h4>DELETE a poster</h4>
<pre class="line-numbers"><code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/poster/<span class="bcls-input">poster_id</span></code></pre>
                    <h3>Thumbnails</h3>
                    <h4>GET thumbnails</h4>
<pre class="line-numbers"><code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/thumbnail</code></pre>
                    <h4>DELETE a thumbnail</h4>
<pre class="line-numbers"><code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/thumbnail/<span class="bcls-input">thumbnail_id</span></code></pre>
                </section>
            </article>
            <!-- end drupal content -->
            <section class="bcls-section" id="BCLreferences">
                <h2>Related topics</h2>
                <ul>
                    <li><a href="//docs.brightcove.com/en/video-cloud/cms-api/getting-started/overview-cms.html">CMS API Overview</a></li>
                    <li><a href="//docs.brightcove.com/en/video-cloud/cms-api/getting-started/quick-start-cms.html">Quick Start to CMS API</a></li>
                    <li><a href="//docs.brightcove.com/en/video-cloud/cms-api/samples/update-metadata.html">Batch Metadata Update Sample</a></li>
                </ul>
            </section>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v2.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
    <script>
        $(document).foundation();

    </script>


    <div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>

    <br>
    <br>
    <div class="bcls-footer"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
        var feedbackMail = document.getElementById("feedbackMail");
        feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));

    </script>
</body>

</html>
