<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Using the CMS API: Search for Videos</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Using the CMS API: Search for Videos</h1>
				<!-- Place document intro sentence(s) here -->

				<p>Brightcove's CMS API provides a programmatic way to search for videos in your Video Cloud library.</p>
		        <p>In this topic, you will learn how to do the following:</p>
		        <ul>
		          <li>Create and limit a basic search using the <code>q</code> parameter</li>
		          <li>Search using required and excluded terms</li>
		          <li>Use a quoted search to match exact terms and multiple words</li>
		          <li>Search on custom fields</li>
		          <li>Search date fields with a specific date and with ranges</li>
		          <li>Combine search criteria</li>
		        </ul>
		        <p class="BCL-aside">Requests to the CMS API require an authorization header which contain your access tokens. For details on how to obtain client credentials and use them to retrieve access tokens, see the <a href="//docs.brightcove.com/en/video-cloud/oauth-api/guides/oauth-api-overview.html">Brightcove OAuth Overview</a>.</p>
			</div>
            <div class="section" id="urlencoding">
                <h2>Spaces/Special Characters</h2>
                <p>Since the search string will be part of an HTTP request, it cannot contain spaces or special characters that are not allowed in URLs. Avoid illegal characters by URI-encoding the search string before submitting the request. For example, "My Favorite Video" will become:</p>
<pre><code>My%20Favorite%20Video</code></pre>
                <p>For one-off requests, you can use Brightcove Learning's <a href="//docs.brightcove.com/en/video-cloud/utilities/URLencoder.html">string encoder</a> to encode your search strings. For apps, you'll need to find a URI encoding function in the language you are using.</p>
            </div>
			<div class="section" id="search">
		    <h2>Basic search</h2>
        <p>To perform a search of terms in your media library, use the <code>q</code> parameter.</p>
        <pre><code>q={search terms}</code></pre>
        <p>The search terms that you specify should be a url encoded list of terms separated by a space.</p>
        <p>When you provide no qualifier for a search term, such as <code>q=bird</code>, the request will search for that value in the following fields:</p>
        <ul>
          <li><code>id<sup class="once-red"><strong><a href="#note1-1">[1-1]</a></strong></sup></code></li>
          <li><code>name</code></li>
          <li><code>description</code></li>
          <li><code>long_description</code></li>
          <li><code>tags</code></li>
          <li><code>reference_id</code></li>
          <li><code>custom_fields</code> (searches all custom fields)</li>
          <li><code>custom_field_name</code> (searches a specific named custom field)</li>
        </ul>
        <p><strong>Notes</strong></p>
        <li id="note1-1"><sup class="once-red"><strong>[1-1]</strong></sup> Note: searching by id is included for consistency, but a search on <code>q=id:12345</code> will return exactly the same results as the request <code>https://cms.api.brightcove.com/v1/accounts/{account_id}/videos/12345</code></li>
        <p>Example: This request returns videos which have a value of <strong>bird</strong> in at least one of the fields listed above.</p>
      <pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=bird</code></pre>

        <h3>Limit search to a specific property</h3>
        <p>When you provide a qualifier for a search term, such as <code>q=name:bird</code>, the request will search the video <code>name</code> field for a value of <strong>bird</strong>.</p>
        <p>Example: This request returns videos which have a value of <strong>wildlife</strong> in the <code>name</code> field.</p>
      <pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=name:wildlife</code></pre>
        <p>The supported search fields are:</p>
        <table>
					<thead>
						<tr>
							<th>Field</th>
							<th>Legal values</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>name</td>
							<td>strings or quoted strings</td>
						</tr>
						<tr>
							<td>text</td>
							<td>strings or quoted strings (name, description, long_description)</td>
						</tr>
						<tr>
							<td>tags</td>
							<td>strings or quoted strings</td>
						</tr>
						<tr>
							<td>reference_id</td>
							<td>string or quoted string</td>
						</tr>
						<tr>
							<td>state</td>
							<td>ACTIVE, INACTIVE, PENDING</td>
						</tr>
						<tr>
							<td>updated_at</td>
							<td>date range</td>
						</tr>
						<tr>
							<td>created_at</td>
							<td>date range</td>
						</tr>
            <tr>
                <td>schedule.starts_at</td>
                <td>date range</td>
            </tr>
            <tr>
                <td>schedule.ends_at</td>
                <td>date range</td>
            </tr>
						<tr>
							<td>published_at</td>
							<td>date range</td>
						</tr>
						<tr>
							<td>complete<sup class="once-red"><strong><a href="#note2-1">[2-1]</a></strong></sup></td>
							<td>true or false</td>
						</tr>
					</tbody>
				</table>
				<h3>Notes</h3>
				<li id="note2-1"><sup class="once-red"><strong>[2-1]</strong></sup> Note: when you create a new video, the <code>complete</code> property is automatically set to <code>false</code>. As soon as one rendition exists for the video, the <code>complete</code> property will be automatically set to <code>true</code>.</li>
		        <p class="BCL-aside">Note: The fields that use a string value perform a text search against that field.</p>

      </div>

      <div class="section" id="requiredexcludedterms">
        <h2>Required/excluded terms</h2>
				<p>You can mark a search term as required (returned videos MUST match) or excluded (returned videos must NOT match). This is controlled with a URI-encoded <code>+ (%2B)</code> or <code>- (%2D)</code> sign immediately preceding the term.</p>
				<table>
					<thead>
						<tr>
							<th>example</th>
							<th>urlencoded</th>
							<th>meaning</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>+foo</td>
							<td>%2Bfoo</td>
							<td>videos MUST include the term 'foo' in the name, description, long_description, tags, reference_id or custom fields</td>
						</tr>
						<tr>
							<td>+custom_fields:foo</td>
							<td>%2Bcustom_fields:foo</td>
							<td>video MUST include the value 'foo' for some custom field</td>
						</tr>
						<tr>
							<td>-foo</td>
							<td>%2Dfoo</td>
							<td>videos must NOT include the term 'foo' in the name, description, long_description, tags, reference_id or custom fields</td>
						</tr>
						<tr>
							<td>-name:foo</td>
							<td>%2Dname:foo</td>
							<td>videos must NOT include the term 'foo' in the name</td>
						</tr>
					</tbody>
				</table>
        <p>Example: This request returns videos which DO NOT have a value of <strong>sea</strong> in the <code>tags</code> field.</p>
<pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=-tags:sea</code></pre>
		<p>See <a href="#combinesearchcriteria">Combining search criteria</a> below to see how to use required/excluded syntax to enforce AND logic for multiple search terms.</p>
      </div>

      <div class="section" id="quotedsearchterms">
        <h2>Quoted search terms</h2>
        <p>By default, a search will match similar words with your search terms. If you want an exact match, or match multiple words, just wrap the term in quotes:</p>
<pre><code>q="foo"
q="foo bar"</code></pre>
				<p>This also works when searching against a specific field:</p>
<pre><code>q=name:"foo"
q=name:"foo bar"</code></pre>
        <ul>
          <li>Exact match

        <p>Example: This request returns videos which matches exactly a value of <strong>sea</strong> in the <code>tags</code> field.</p>
      <pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=tags:"sea"</code></pre></li>
        <li>Multiple words
        <p>Example: Notice that this request returns videos which have either a value of <strong>sea</strong> or <strong>mammal</strong> in the <code>tags</code> field.</p>
      <pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=tags:sea mammal</code></pre>
        <p>But, this request returns only those videos which have a value of <strong>sea mammal</strong> in the <code>tags</code> field.</p>
        <pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=tags:"sea mammal"</code></pre></li>
        </ul>
      </div>

      <div class="section" id="customfields">
        <h2>Custom fields</h2>
        <p>You may search on any custom field that you have defined for your videos.</p>
<pre><code>q=my_field:foo
q=my_field:"foo"
</code></pre>
        <p class="BCL-aside">Note: Custom fields are treated as strings.</p>
        <p>Example: This request returns videos which have a value of <strong>animal</strong> in the <code>subject</code> custom field.</p>
      <pre><code>https://cms.api.brightcove.com/v1/accounts/921483702001/videos?q=subject:animal</code></pre>
      </div>

      <div class="section" id="dateranges">
        <h2>Date ranges</h2>
				<p>If you are searching on a date field, you can specify a specific date or a range of dates.</p>
				<p>This will search for all videos with an <code>updated_at</code> value between Aug 1, 2012 and October 8, 2012. Here we are specifying each date in UTC format.</p>
        <pre><code>q=updated_at:2012-08-01T00:00:00Z..2012-10-08T00:00:00Z
</code></pre>
				<h3>Supported date formats</h3>
        <p>The supported date formats include UTC and relative.</p>
				<table>
					<thead>
						<tr>
							<th>format</th>
							<th>meaning</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>2012-08-01T00:00:00Z</td>
							<td>This represents a time in UTC.</td>
						</tr>
						<tr>
							<td>2012-08-01</td>
							<td>This represents midnight on a day in UTC. The example is equivalent to 2012-08-01T00:00:00Z</td>
						</tr>
						<tr>
							<td>-1d</td>
							<td>The current time minus 1 day. (see <a href="#relativeDates">below</a>)</td>
						</tr>
						<tr>
							<td>+1d</td>
							<td>The current time plus 1 day. (see <a href="#relativeDates">below</a>)</td>
						</tr>
					</tbody>
				</table>

				<h3 id="relativeDates">Relative dates</h3>
				<p>For relative dates we support a direction (+ or -) followed by a number, followed by a duration. Legal durations are: minutes, hours, days.</p>
				<p>Examples:</p>
				<ul>
					<li>-1day</li>
					<li>-2days</li>
					<li>+4hours</li>
					<li>-60minutes</li>
					<li>-1d</li>
					<li>-2d</li>
					<li>+4h</li>
					<li>-60m</li>
				</ul>
				<h3>Open ended ranges</h3>
				<p>If you want to match all dates until a given time, or match all dates since a given time, leave off one end of the range.</p>
				<p>Example: Search for all videos modified in the last 2 days</p>
				<pre><code>q=updated_at:-2days..</code></pre>
				<p>Example: Search for all videos modified before August 11, 2013:</p>
				<pre><code>q=updated_at:..2013-08-11T00:00:00Z</code></pre>
      </div>
		<div class="section" id="searchByState">
		    <h2>Search by state</h2>
		    <p>You can perform or filter searches by the state of the video using the paramater:</p>
		    <pre><code>q=state:ACTIVE | INACTIVE | PENDING</code></pre>
		</div>
        <div class="section" id="combinesearchcriteria">
			<h2>Combine search criteria</h2>
			<p>You can combine criteria for complex searches.</p>
	        <p>Example: This request searches for videos with a <code>name</code> value of <strong>gossip</strong>, which were updated between August 1, 2010 and October 8, 2010. It then sorts the response data by <code>updated_at</code> date in decending order.</p>
<pre><code>q=%2Bname:gossip+%2Bupdated_at:2010-08-01T00:00:00Z..2010-10-08T00:00:00Z&amp;sort=-updated_at</code></pre>
			<h3>Combining terms for AND logic</h3>
			<p>Use the <a href="#requiredexcludedterms">required/excluded syntax</a> to return videos that have <strong>all</strong> of the specified terms.</p>
			<p>For example, if you search on <code>q=name:foo+tags:bar</code>, the response will contain videos that have 'foo' in the name OR the tag 'bar' (or both). If you want to return only those videos that have 'foo' in the name AND the tag 'bar', you must search on:</p>
<pre><code>q=<strong>%2B</strong>name:foo+<strong>%2B</strong>tags:bar</code></pre>
			<p>Similarly, if you want to return only videos that have 'foo' in the name, but do <strong>not</strong> have the tag 'bar', you would search on:</p>
<pre><code>q=<strong>%2B</strong>name:foo+<strong>%2D</strong>tags:bar</code></pre>
		</div>

		<div class="section" id="BCLreferences">
			<h2>Related topics</h2>
			<ul>
				<li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/overview-di.html">Dynamic Ingest API Overview</a></li>
				<li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/quick-start-di.html">Quick Start to Dynamic Ingest</a></li>
				<li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/faqs-di.html">Dynamic Ingest API FAQs</a></li>
			</ul>
		</div>
	</div>
</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
	var feedbackMail = document.getElementById("feedbackMail");
	feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
	</script>
</body>

</html>
