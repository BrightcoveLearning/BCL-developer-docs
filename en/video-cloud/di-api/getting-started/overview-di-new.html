<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title>Dynamic Ingest API Overview</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/atelier-estuary.light.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <script>
        (function(i, s, o, g, r, a, m) {
        	i['GoogleAnalyticsObject'] = r;
        	i[r] = i[r] || function() {
        		(i[r].q = i[r].q || []).push(arguments)
        	}, i[r].l = 1 * new Date();
        	a = s.createElement(o),
        		m = s.getElementsByTagName(o)[0];
        	a.async = 1;
        	a.src = g;
        	m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <div id="top" class="section">
                <h1>Dynamic Ingest API Overview</h1>
                <!-- Place document intro sentence(s) here -->
                <p>Brightcove's Dynamic Ingest (DI) API is based on functionality where video source files are downloaded from the customer's storage location and specified renditions of the source files are created. The platform is cloud-centric, globally-distributed and based on modern practices to deliver best in class consistency and speed.</p>
                <p>Strengths of the DI API are:</p>
                <ul>
                    <li>
                        <strong>Predictability</strong>: Queue time and end-to-end processing time is determinate.</li>
                    <li>
                        <strong>Speed</strong>: Brightcove's transcoding solution provides superior speed and scalability.</li>
                    <li>
                        <strong>Features</strong>: Input format support, 99.9% transcoding success rate and a simplified usage workflow are just a few of the API's advantages.</li>
                    <li>
                        <strong>Insight</strong>: Notifications when videos are available for playback are provided.</li>
                </ul>
            </div>
            <div id="workflowoverview" class="section">
                <h2>Workflow overview</h2>
                <p>A number of systems/technologies are used in the overall transcoding and storage of media. They are:</p>
                <ul>
                    <li>
                        <strong>Content Management System (CMS) API</strong>: Creates a video object for use in the DI API</li>
                    <li>
                        <strong>Zencoder</strong>: Transcodes the video creating multiple renditions</li>
                    <li>
                        <strong>Amazon S3</strong>: Moves the master and renditions to storage, based on profile settings</li>
                    <li>
                        <strong>Catalog</strong>: Stores requisite information associated with the video</li>
                </ul>
                <p>After initial transcoding, you have the following actions you can perform on the media:</p>
                <ul>
                    <!-- the following item on hold indefinitely -->
                    <!-- <li><strong>Delete</strong>: Delete, when needed, the master or all items</li> -->
                    <li>
                        <strong>Re-transcode</strong>: Create new renditions when master is present (error if master is not present)</li>
                    <li>
                        <strong>Replace</strong>: Point to a new master, or replace an existing master</li>
                </ul>
            </div>
            <div id="operations" class="section">
                <h2>Operations</h2>
                <p>When you use the DI API you will perform different operations, such as reading an ingest profile and writing ingest information to your account. The following is a complete list of operations required for DI tasks:</p>
                <ul>
                    <li>video-cloud/video/create</li>
                    <li>video-cloud/video/read</li>
                    <!-- for adding images -->
                    <li>video-cloud/video/update</li>
                    <li>video-cloud/ingest-profiles/profile/read</li>
                    <li>video-cloud/ingest-profiles/account/read</li>
                    <li>video-cloud/ingest-profiles/account/write</li>
                    <li>video-cloud/ingest-profiles/profile/write</li>
                </ul>
                <p>To obtain client credentials, see one of the following documents:</p>
                <ul>
                    <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials.html">OAuth: Get Client Credentials Using CURL</a>
                    </li>
                    <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials-postman.html">OAuth: Get Client Credentials Using Postman</a>
                    </li>
                </ul>
            </div>
            <div class="section" id="sourceLocations">
                <h2>Valid source locations</h2>
                <p>Dynamic Ingest can pull source video files from: HTTP/HTTPS or S3 - with or without authentication</p>
                <p>
                    <span class="api-setting-info-title">Examples:</span>
                </p>
                <ul>
                    <li>http://example.com/path/to/input.avi</li>
                    <li>https://dl.dropboxusercontent.com/u/3641457/Bird_Titmouse.mp4</li>
                    <li>s3://my-bucket/video.mp4</li>
                </ul>
                <p class="BCL-aside">Note: Dynamic Ingest currently includes limited support for Aspera and FTP, but this must be explicitly enabled on your account. If you would like to use one of these protocols, please contact support.</p>

<!--                 <p>A URL for the file to be transcoded. If the remote server requires authentication, you must include your username and password in the input URL string</p>
                <p>If the URL contains authentication with special characters, <a href="/docs/guides/getting-started/special-characters-in-usernames-and-passwords">make sure that they are properly escaped</a>. Special characters in the path should not need to be escaped.</p>
 -->                <h3>Notes on S3</h3>
                <p>If your videos are in a protected S3 bucket, see <a href="../guides/di-s3.html">Using Dynamic Ingest with S3</a> for details on how to set up permissions for Dynamic Ingest to access your files.</p>
<!--                 <h3>Notes on GCS</h3>
                <p>GCS access keys can be found under the "Interoperable Access" section in the <a href="https://storage.cloud.google.com/m">Google APIs console</a>. Access keys must be <a href="/docs/guides/getting-started/special-characters-in-usernames-and-passwords">properly escaped</a>.</p>
                <h3>Notes on Aspera</h3>
                <p>The ssh-port portion of the URL is not required, and will default to 22.</p>
                <p>Dynamic Ingest runs an Aspera Client on the video encoding servers, which connects to your <a href="http://www.asperasoft.com/en/products/server_software_1">Aspera Enterprise or Connect Server</a>, which hosts the files.</p>
                <p>This is a similar situation to you running an FTP server to make your files available and Dynamic Ingest using an FTP client for file transfer.</p>
 -->            </div>
            <div class="section" id="ingestingVideos">
                <h2>Ingesting videos</h2>
                <p>There are two API calls required for ingesting videos:</p>
                <ol>
                    <li>Call the CMS API to create a video object in the Video Cloud system and get its id</li>
                    <li>Call the DI API to provide the URL for the video source file and specify the <a href="../guides/standard-profiles.html">ingest profile</a> to be used</li>
                </ol>
                <p>See the <a href="quick-start-di.html">Quick Start</a> for details of the API calls, and you can also see a <a href="../samples/batch-dynamic-ingest.html">working sample</a>.</p>
                <p>For CMS API call to create the video in the Video Cloud system, see the <a href="//docs.brightcove.com/en/video-cloud/cms-api/getting-started/overview-cms.html#settingvalues">CMS API Overview</a>. Note that the video <code>name</code> is required, and that the name and any other strings included for video metadata (such as the <code>description</code>) <strong>must be URI-encoded</strong>.</p>
            </div>
            <div class="section" id="replace_retranscode">
                <h2>Replace/retranscode videos</h2>
                <p>The Dynamic Ingest API call is exactly the same as it would be for <a href="./batch-dynamic-ingest.html">ingesting new videos</a> - the only difference is that you do not need to make a prior call to the CMS API to create the video object in the Video Cloud system and get an id for it. If the source video file at the specified URL is the same one originally ingested, you will simply get a new set of renditions. If the source file is new, you will be replacing the existing video. All videos will remain playable with existing renditions until retranscoding is complete.</p>
                <p>See the <a href="../samples/batch-dynamic-ingest-retranscode.html">working sample here</a>.</p>
            </div>
            <div class="section" id="capture_images">
                <h2>Capture images</h2>
                <p>During transcoding, Brightcove will capture a snapshot from the video at the midpoint and save this as poster (video still) and thumbnail images. You can change these images later in Studio or using the <a href="//docs.brightcove.com/en/video-cloud/cms-api/index.html">CMS API</a>.</p>
                    <p class="BCL-aside">Note: for custom renditions, image capture requires that two special renditions be added to the ingest profile that you are using. You cannot currently add or update profiles directly - contact your SE or Account Manager for help in getting your ingest profiles updated. The new renditions must have the following properties:</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Property</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>media_type</code></td>
                                <td>"image"</td>
                            </tr>
                            <tr>
                                <td><code>label</code></td>
                                <td>"poster" or "thumbnail" (you need a rendition for each)</td>
                            </tr>
                            <tr>
                                <td><code>format</code></td>
                                <td>"png" or "jpg"</td>
                            </tr>
                            <tr>
                                <td><code>width</code></td>
                                <td>number (pixels)</td>
                            </tr>
                            <tr>
                                <td><code>height</code></td>
                                <td>number (pixels)</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>Here is sample data for the two renditions:</p>
<pre><code>{
    "height": 360,
    "label": "poster",
    "width": 480,
    "media_type": "image",
    "format": "png"
},
{
    "height": 90,
    "label": "thumbnail",
    "width": 160,
    "media_type": "image",
    "format": "png"
}</code></pre>
                    <p>It is recommended that you use <strong>exactly</strong> these values if you are still using Smart Players. If you have migrated to the new Brightcove Player, you can adjust width and height values to match your players.</p>
                    <p>You should also set the <code>capture-images</code> flag in your request data to <code>true</code>, but this is the default value <em>if</em> the selected profile includes image renditions.</p>
                    <h4>Sample request data:</h4>
<pre><code>{
  "master": { "url": "http://learning-services-media.brightcove.com/videos/mp4/Bird_Titmouse.mp4" },
  "profile": "balanced-high-definition",
  "capture-images": true
}</code></pre>
            </div>
            <div class="section" id="ingest_images">
                <h2>Ingest images</h2>
                <p>You can include a custom poster and thumbnail for your video by referencing their URLs in the JSON you use for the video ingestion:</p>
<pre><code>{
    "master": {
        "url":"http://learning-services-media.brightcove.com/videos/mp4/Water-Droplet.mp4"
    },
    "profile": "balanced-high-definition",
    "capture_images": false,
    "poster": {
        "url": "http://learning-services-media.brightcove.com/images/for_video/Water-In-Motion-poster.png"
        "width": "640",
        "height": "360"
    },
    "thumbnail": {
        "url": "http://learning-services-media.brightcove.com/images/for_video/Water-In-Motion-thumbnail.png"
        "width": "160",
        "height": "90"
    }
}</code></pre>
            </div>
            <div class="section" id="drm">
                <h2>DRM and HLSe</h2>
                <p>Dynamic Ingest handles videos that use any of the DRM types supported by Brightcove. HLSe is also supported.</p>
            </div>
            <div class="section" id="archiving">
                <h2>Archiving Renditions</h2>
                <p>By default, all video and image renditions are automatically archived. If you want to turn archiving of renditions off, c<a href="http://support.brightcove.com/en/contact">ontact Brightcove Support</a>. Note that digital masters are not archived.</p>
            </div>
            <div class="section" id="notifications">
                <h2>Notifications</h2>
                <p>You can specify a one or more callback URLs to receive notifications of the results of the ingest process. The URLs you specify should be for apps than can accept POST requests. Notifications will be sent in JSON format.</p>
                <p class="BCL-aside">Note: up to 10 subscribers for error notifications are supported. You can include more than 10 URLs to have notifications sent to, but only the first 10 will be processed.</p>
                <p>Here’s an example. For a user with pub id 1234567890123 who wants to use Dynamic Ingest to upload a source video file located at https://s3.amazonaws.com/bucket/mysourcevideo.mp4 to an existing title in the catalog with video id 99988877766655 using the balanced-high-definition profile and who, furthermore, wants to receive callbacks at two endpoints located at http://host1/path1 and http://host2/path2 respectively, the DI request would be like this:</p>

<pre><code>POST https://ingest.api.brightcove.com/v1/accounts/1234567890123/videos/99988877766655/ingest-requests { "master": { "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4" }, "profile": "balanced-high-definition", "callbacks": ["http://host1/path1”, “http://host2/path2”] }</code></pre>
                <p>The notification will include:</p>
                <table>
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>status</code>
                            </td>
                            <td>will be
                                <code>FAILED</code> if the ingest or creation of a rendition was not successful, <code>SUCCESS</code> if the request succeeded</td>
                        </tr>
                        <tr>
                            <td>entity</td>
                            <td>if it exists, the Video Cloud id of the asset that was ingested or failed (if the video object was successfully created in Video Cloud)</td>
                        </tr>
                        <tr>
                            <td>
                                <code>errorMessage</code>
                            </td>
                            <td class="BCL-aside">an explanation of why the ingest failed if it did - note that the <code>errorMessage</code> is not returned currently - this is a known issue</td>
                        </tr>
                        <tr>
                            <td>
                                <code>version</code>
                            </td>
                            <td>a string always equal to
                                <code>"1"</code>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>Below is a simple PHP app for handling Dynamic Ingest notifications, followed by a sample of its output:</p>
                <h3>PHP code</h3>
                <div><script src="https://gist.github.com/da693cff4205ff80f91e.js"></script></div>
                <h3>Sample output</h3>
<pre><code>2015-02-04 23:21:49 UTC:
Version: 1
Entity: 4032890911001
Type: ASSET
Status: SUCCESS
Error Message:
Action: CREATE
-------------------------------
2015-02-04 23:30:20 UTC:
Version: 1
Entity: 4032905167001
Type: ASSET
Status: SUCCESS
Error Message:
Action: CREATE
-------------------------------
2015-02-04 23:30:21 UTC:
Version: 1
Entity: 4032614751001
Type: TITLE
Status: SUCCESS
Error Message:
Action: CREATE
-------------------------------</code></pre>
            </div>
            <div class="section" id="limitations">
                <h2>Limitations</h2>
                <dl>
                    <dt>Transcode profiles</dt>
                    <dd>Dynamic Ingest uses one of the <a href="../guides/standard-profiles.html">ingestion profiles described here</a>. It does
                        <strong>not</strong> use the rendition set defined in your Video Cloud account settings. Dynamic Ingest does support custom ingest profiles, but at this time you cannot create your own custom profiles. If you need a custom profile, contact your Brightcove Solutions Engineer (SE) or Account Manager.</dd>
                </dl>
            </div>
            <div class="section" id="BCLreferences">
                <h2>Related Topics</h2>
                <ul>
                    <li><a href="//docs.brightcove.com/en/video-cloud/di-api/getting-started/quick-start-di.html">Quick Start to Dynamic Ingest</a>
                    </li>
                    <li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/faqs-di.html">Dynamic Ingest API FAQs</a>
                    </li>
                    <li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/standard-profiles.html">Standard Ingest Profiles</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
    <script src="/en/scripts/log.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="/en/scripts/bc-mapi.js"></script>
    <script>
        $(document).foundation();
    </script>
    <script type="text/javascript">
        /******** Any scripts specific to page samples should go here *********/
    </script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a>
    </div>
    <script>
        var feedbackMail = document.getElementById("feedbackMail");
        feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
</body>

</html>