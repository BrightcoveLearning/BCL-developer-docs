<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Quick Start to Dynamic Ingest</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.1/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.1/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.1/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-xlarge-up">
			<div id="sidenav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Quick Start to Dynamic Ingest</h1>
				<!-- Place document intro sentence(s) here -->
          <p>In this quick start you will create an ingest request that will create renditions from a video. A visual overview of the steps in this process are shown here:</p>
          <img src="/en/video-cloud/di-api/guides/assets/di-quick-start-overview.png">
          <p>In this quick start you will perform the following tasks:</p>
          <ul>
            <li>Obtain credentials for API usage.</li>
            <li>Fill in a form with obtained credentials, which are then dynamically inserted into following forms.</li>
            <li>Use the Content Management System (CMS) API to create a video object.</li>
            <li>Use the Dynamic Ingest (DI) API, create an ingest request using the ID returned from the CMS API.</li>
            <li>Verify the ingest request functioned correctly.</li>
          </ul>
          <p class="BCL-aside">For details on the API used in this document you can view the <a href="//docs.brightcove.com/en/video-cloud/di-api/guides/overview-di.html">Dynamic Ingest API Overview</a> document and the <a href="//docs.brightcove.com/en/video-cloud/di-api/reference/versions/v1/index.html">Dynamic Ingest API</a> reference.</p>
			</div>
			<div id="oauthproxy" class="section">
        <h2>OAuth proxy</h2>
        <p>The Dynamic Ingest (DI) API's security is implemented using OAuth2. To permit you to get started using the DI API as quickly as possible, the API calls in this quick start will use a security proxy running at <a href="http://solutions.brightcove.com:8004">http://solutions.brightcove.com:8004</a>. If you browse to that URL, you will be redirected to an informational page on the proxy. Be aware that the proxy will only accept requests originating from <strong>localhost</strong> and <strong>*.brightcove.com</strong> domains.</p>
      </div>
			<div id="obtaincredentials" class="section">
				<h2>Obtain credentials</h2>
				<p>To use the DI API you will need proper credentials. Later in this quick start, you will use the credentials in a form when submitting requests to the API.</p>
				<ol>
					<!-- <li class="BCL-aside">The easiest way to get client credentials is to use the <a href="https://studio.brightcove.com/products/videocloud/admin/oauthsettings">API Authentication UI</a> in Studio. See <a href="http://docs.brightcove.com/en/video-cloud/studio/managing-accounts/managing-api-credentials.html">Managing API Credentials</a> for instructions.</li> -->
					<li>Obtain credentials directly from the Brightcove OAuth API (recommended) or use your choice of the <strong>Get Client Credentials</strong> docs listed below. Whichever option you choose, you will need to ask for the correct operation permissions. In this quick start you will need both <strong>video</strong> and <strong>ingest-profiles</strong> operations. You <strong>MUST</strong> use the following operations in place of the defaults shown in the steps used in the client credentials documents. Copy this code and replace the corresponding <code>operations</code> block.</li>
				</ol>
				<p><code data-gist-id="ff79f6ddb8cfce63b153" data-gist-hide-footer="true" data-gist-line="1-5"></code></p>
        <ul>
            <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials.html">OAuth: Get Client Credentials Using CURL</a></li>
            <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials-postman.html">OAuth: Get Client Credentials Using Postman</a></li>
        </ul>
        <p class="BCL-aside">Note: The defined operations grant permissions to use both the CMS and DI APIs as needed in this quick start.</p>
			</div>
			<div id="assignvalues" class="section">
        <h2>Assign values</h2>
        <p>Values you just retrieved in the previous section will be used in calls to the Content Management System and Dynamic Ingest APIs. These values will be entered and assigned in the following form.</p>
        <ol start="2">
          <li>Enter the corresponding values for each of the following. This step <strong>MUST</strong> be completed for any of the API calls to function correctly.</li>
        </ol>
        <div class="form-wrapper">
          <fieldset>
            <legend>Assign values for reuse</legend>
            <p>Submits to local JavaScript and assigns values to variables</p>
            <p>
              Client id:
              <input name="client_id" id="cms_client_id" type="text" >
            </p>
            <p>
              Client secret:
              <input name="client_secret" id="cms_client_secret" type="text">
            </p>
            <p>
              Account ID:
              <input name="account_id" id="cms_account_id" type="text">
            </p>
            <p>
              <input id="initialValues_Submit" type="submit" value="Assign Values">
            </p>
            <p><span id="assignConfirm"></span></p>
          </fieldset>
        </div>
      </div>
			<div id="createvideo" class="section">
        <h2>Create video</h2>
<p class="BCL-aside">To access additional beta features of the CMS API, please contact your Brightcove Account Manager.</p>
        <p>Before you can create an ingest request you must first create a video object. This video object will eventually contain the master copy of the video, metadata, possible renditions and other information. To do this, you will use the Content Management System (CMS) API, permissions for which were granted in the previous section. The fundamental call information for creating a video is:</p>
        <ul>
            <li>HTTP method: <code>POST</code></li>
            <li>Endpoint: <code>https://cms.api.brightcove.com/v1/accounts/<em>YOUR_ACCOUNT_ID</em>/videos</code></li>
        </ul>
        <p class="BCL-aside">Note: Before completing this task you must perform steps 1 and 2 above to retrieve and assign account and credential information.</p>
        <ol start="3">
          <li>You will now use the proxy in conjunction with the following form to create a video. Be sure to alter the body so the <code>name</code> property reflects your choice for the video name.</li>
        </ol>
        <div class="form-wrapper">

				    	<fieldset>
				    		<legend>Caller for the CMS API</legend>
				    		<p>Submits to http://solutions.brightcove.com:<strong>8006</strong></p>
				    			<p>
				    				Call type:
				    				<select name="requestType" id="cms_requestType">
				    					<option>GET</option>
				    					<option selected="selected">POST</option>
				    					<option>PUT</option>
				    					<option>PATCH</option>
				    					<option>DELETE</option>
				    				</select>
				    			</p>
				    			<p>
				    				Call body (optional - include if you need to submit data with the request):<br />
				    				<textarea name="requestBody" id="cms_requestBody">{"name":"My test Video"}</textarea>
				    			</p>
				    			<p>
				    				Full request URL for the API call (your account ID was dynamically inserted when you assigned values above):<br />
				    				<textarea name="url" id="cms_url">https://cms.api.brightcove.com/v1/accounts/YOUR_ACCOUNT_ID/videos</textarea>
				    			</p>
				    			<p>
				    				<input id="cms_Submit" type="submit" value="Submit">
				    			</p>
		            <p>After you click the <strong>Submit</strong> button, the following text area will be populated with the JSON object representing your newly created video.</p>
				    		<pre><code id="cms_response"></code></pre>
				    	</fieldset>
				    </div>
      </div>
			<div id="createingestrequest" class="section">
        <h2>Create ingest request</h2>
        <p>Now that you have the video object created you can create an ingest request for that video. The fundamental call information for creating an ingest request is:</p>
        <ul>
            <li>HTTP method: <code>POST</code></li>
            <li>Endpoint: <code>https://ingest.api.brightcove.com/v1/accounts/<em>YOUR_ACCOUNT_ID</em>/videos/<em>VIDEO_ID</em>/ingest-requests</code></li>
        </ul>
        <p class="BCL-aside">Note: Before completing this task you must perform steps 1 and 2 above to retrieve and assign account and credential information.</p>
        <ol start="4">
          <li>You will now use the proxy in conjunction with the following form to create an ingest request. Be sure to alter the body so the <code>url</code> property contains the path to your media source and the <code>profile</code> property reflects the renditions you wish created.</li>
        </ol>
		    <div class="form-wrapper">
		        <fieldset>
		            <legend>Caller for the Dynamic Ingest API</legend>
		            <p>Submits to http://solutions.brightcove.com:<strong>8004</strong></p>
		                <p>
		                    Call type:
		                    <select name="requestType" id="di_requestType">
		                        <option>POST</option>
		                    </select>
		                </p>
		                <p>
		                    Call body (optional - include if you need to submit data with the request):<br />
		                    <textarea rows="3" name="requestBody" id="di_requestBody">{"master":{"url":"http://learning-services-media.brightcove.com/videos/mp4/Bird_Woodpecker.mp4"},"profile":"balanced-high-definition"}</textarea>
		                </p>
		                <p>
		                    Full request URL for the API call (Your account ID and the video ID were dyamically inserted):<br />
		                    <textarea name="url" id="di_url">https://ingest.api.brightcove.com/v1/accounts/ACCOUNT_ID/videos/VIDEO_ID/ingest-requests</textarea>
		                </p>
		                <p>
		                    <input id="di_Submit" type="submit" value="Submit">
		                </p>
		            <p>After you click the <strong>Submit</strong> button, the following text area will be populated with the JSON object representing the newly created ingest request. The ID returned uniquely identifies your ingest request.</p>
		            <pre><code id="di_response"></code></pre>
		        </fieldset>
		    </div>
      </div>
			<div id="seerequestresults" class="section">
				<h2>See request results</h2>
				<ol start="5">
					<li>See the results of the ingest request using <a href="./overview-di.html#notifications">Notifications</a> or by going to Video Cloud Studio, choose the Media module, then double-click the video you just created. Select the <strong>Video Files</strong> tab, and in the <strong>Renditions List</strong> you will see the renditions that correspond to the profile you selected.</li>
				</ol>
				<div><img src="./assets/studio-showing-renditions.png"></div>
				<p class="BCL-aside">Note: It is possible not all renditions will be created as your master may not be of high enough quality to produce all intended renditions.</p>
				<p>Congratulations, in this quick start you have completed the steps necessary to create an ingest request and have seen the renditions of your master video have been created.</p>
			</div>
			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/overview-di.html">Dynamic Ingest API Overview</a></li>
					<li><a href="//docs.brightcove.com/en/video-cloud/di-api/guides/faqs-di.html">Dynamic Ingest API FAQs</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.1/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	var BCLS = ( function ($) {
		var // CMS API stuff
			$cms_account_id = $("#cms_account_id"),
			$cms_client_id = $("#cms_client_id"),
			$cms_client_secret = $("#cms_client_secret"),
			$cms_requestBody = $("#cms_requestBody"),
			$cms_requestType = $("#cms_requestType"),
			$cms_url = $("#cms_url"),
			$cms_submit = $("#cms_Submit"),
			$cms_response = $("#cms_response"),
			cmsURL = "https://solutions.brightcove.com/bcls/bcls-proxy/bcls-proxy.php",
			// Dynamic Ingest API stuff
			$di_client_id = $("#cms_client_id"),
			$di_client_secret = $("#cms_client_secret"),
			$di_requestBody = $("#di_requestBody"),
			$di_requestType = $("#di_requestType"),
			$di_url = $("#di_url"),
			$di_submit = $("#di_Submit"),
			$di_response = $("#di_response"),
			diURL = "https://solutions.brightcove.com/bcls/bcls-proxy/bcls-proxy.php",
			// functions
			bclslog,
			submitRequest,
			cleanString,
			setCMSOptions,
			setDIOptions;
		// IE safe logger
		bclslog = function (context, message) {
			if (console) {
				console.log(context, message);
			}
		}
        // function to remove spaces and line breaks
        cleanString = function (str) {
          // remove line breaks
          str = str.replace(/(\r\n|\n|\r)/gm,"");
          // remove spaces
          // here we have to be careful - spaces fine within strings
          // but not outside them
          if (str != "") {str = JSON.stringify(JSON.parse(str));};
          return str;
        };
		// set options for the CMS API request
		setCMSOptions = function () {
			var options = {};
			options.client_id = $cms_client_id.val();
			options.client_secret = $cms_client_secret.val();
			options.requestBody = cleanString($cms_requestBody.val());
			options.requestType = $cms_requestType.val();
			options.url = $cms_url.val();
			bclslog("cms options", options);
			// now submit the request
			submitRequest(options, cmsURL, "cms");
		};
	    // set options for the Dynamic Ingest API request
		setDIOptions = function () {
			var options = {};
			options.client_id = $di_client_id.val();
			options.client_secret = $di_client_secret.val();
			options.requestBody = cleanString($di_requestBody.val());
			options.requestType = $di_requestType.val();
			options.url = $di_url.val();
			bclslog("di options", options);
			// now submit the request
			submitRequest(options, diURL, "di");
		};

		// function to submit Request
		submitRequest = function (options, proxyURL, type) {
			var parsedData = {};
			bclslog("options", options);
			$.ajax({
				url: proxyURL,
				type: "POST",
				data: options,
				success : function (data) {
					bclslog(data);
					parsedData = JSON.parse(data);
					switch (type) {
						case "cms":
						$cms_response.html(data);
						$di_url.html("https://ingest.api.brightcove.com/v1/accounts/" + $cms_account_id.val() + "/videos/" + parsedData.id +"/ingest-requests");
						bclslog($di_url.val());
						break;
						case "di":
						$di_response.html(data);
						break;
					}
				},
				error : function (XMLHttpRequest, textStatus, errorThrown) {
					switch (type) {
						case "cms":
						$cms_response.html("The called failed; here's what the server sent back: " + textStatus + " " + errorThrown);
						break;
						case "di":
						$di_response.html("The called failed; here's what the server sent back: " + errorThrown);
						break;
					}
				}
			});
		};
      setInitialValues = function () {
        var elem = document.getElementById("assignConfirm");
        elem.innerHTML = "    Values Assigned!";
        $cms_url.html("https://cms.api.brightcove.com/v1/accounts/" + $cms_account_id.val() + "/videos");

      };
    $("#initialValues_Submit").on("click", setInitialValues);
		$cms_submit.on("click", setCMSOptions);
		$di_submit.on("click", setDIOptions);
	})($);
	</script>

	<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
	var feedbackMail = document.getElementById("feedbackMail");
	feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
	</script>
</body>

</html>
