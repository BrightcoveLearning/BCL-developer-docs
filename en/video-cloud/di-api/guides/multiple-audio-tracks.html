<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="products" content="Video Cloud">
    <meta name="role" content="API Developer">
    <meta name="task" content="Add Videos/Assets">
    <meta name="topic" content="Audio">
    <meta name="api" content="Dynamic Ingest">
    <meta name="keywords" content="">
    <!-- End Drupal Taxonomy Data -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title>Multiple Audio Tracks</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <h1>Multiple Audio Tracks</h1>
            <!-- begin drupal content -->
            <article class="bcls-article">
                <header id="bcls_header" class="bcls-header">
                    <p>This topic explains how to add and manage multiple audio tracks for videos using the Dyanamic Ingest and CMS APIs.</p>
                </header>
                <section id="introduction" class="bcls-section">
                    <h2>Introduction</h2>
                    <h2>Introduction</h2>
                    <p>The ability to associate multiple audio tracks with a single title can be useful in a couple of key scenarios:</p>
                    <ul>
                        <li>Playing back the same video in different languages for a broader reach globallyâ€‚</li>
                        <li>Providing audio with descriptions for the visually challenged</li>
                    </ul>
                    <aside class="bcls-aside bcls-aside--information">Note that multiple audio tracks can only be used with videos set up for <a href="../getting-started/overview-di-dynamic-delivery.html">Dynamic Delivery</a>.</aside>
                </section>
                <section class="bcls-section" id="setup">
                    <h2>Setup</h2>
                    <p>The setup for Dynamic Ingest requests is the same, whether you are ingesting a video, images, audio tracks, WebVTT files, or all of these:</p>
                    <dl>
                        <dt>Request URL</dt>
                        <dd>
<pre class="line-numbers"><code class="language-http">https://ingest.api.brightcove.com/v1/accounts/{account_id}/videos/{video_id}/ingest-requests</code></pre>
                        </dd>
                        <dt>Authentication</dt>
                        <dd>Authentication requires an access token passed as a <code>Bearer</code> token in an <code>Authorization</code> header:
<pre class="line-numbers"><code class="language-bash">Authorization: Bearer {access_token}</code></pre>
                        <p>To get access tokens, you will need <strong>client credentials</strong> (see below). For the process of obtaining an access token, see <a href="//docs.brightcove.com/en/video-cloud/oauth-api/guides/get-token.html">Get Access Tokens</a>.</p>
                        </dd>
                    </dl>
                    <h3 class="bcls-expander-head">Getting client credentials</h3>
                    <div class="bcls-expander-content">
                        <p>To get a <code>client_id</code> and <code>client_secret</code>, you will need to go to the OAuth UI and register this app:</p>
                            <ul>
                                <li>
                                    <a href="https://studio.brightcove.com/products/videocloud/admin/oauthsettings">https://studio.brightcove.com/products/videocloud/admin/oauthsettings</a>
                                </li>
                            </ul>
                        <p>You can also get your credentials via CURL or Postman - see:</p>
                        <ul>
                            <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials.html">Get Client Credentials Using CURL</a></li>
                            <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials-postman.html">Get Client Credentials Using Postman</a></li>
                        </ul>
                    </div>
                    <h3>Note on S3</h3>
                    <p>If your images will be pulled from a protected S3 bucket, you will need to set a bucket policy to allow Video Cloud to access the files. See <a href="di-s3.html#setPolicy">Using Dynamic Ingest with S3</a> for details.</p>
                </section>
                <section class="bcls-section" id="workflow">
                    <h2>Workflow</h2>
                    <p>There are two primary use cases:</p>
                    <ul>
                        <li>Ingest a new video with multiple audio tracks
                            <figure class="bcls-figure">
                                <img class="bcls-image" style="max-height:175px" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/di-api/guides/multiple-audio-tracks/new-video-workflow.svg" alt="New Video Workflow">
                                <figcaption class="bcls-caption--image">New Video Workflow</figcaption>
                            </figure>
                        </li>
                        <li>Add multiple audio tracks to an existing video
                            <figure class="bcls-figure">
                                <img class="bcls-image" style="max-height:175px" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/di-api/guides/multiple-audio-tracks/existing-video.svg" alt="Existing Video Workflow">
                                <figcaption class="bcls-caption--image">Existing Video Workflow</figcaption>
                            </figure>
                        </li>
                    </ul>
                    <p>We will look at the details of the API requests in a section below.</p>
                </section>
                <section id="Audio_track_metadata" class="bcls-section">
                    <h2>Audio track metadata</h2>
                    <p>There are some metadata fields attached to audio tracks - some of these are set when you ingest the tracks, while others are created by Video Cloud. Some of these fields are read-only, and others can be updated by you. The metadata fields will be detailed below in the context of the relevant API requests, but two particular ones requirse some explanation here, as they are crucial in determining how the Brightcove Player will handle the multiple audio tracks.</p>
                    <h3><code>language</code></h3>
                    <p>The <code>language</code> field, set for each track during ingestion, specifies the language for the track. This is important if the track is a dub of spoken words in the video. The value of this field will be a two-letter code like <code>en</code> or <code>hi</code>. For a full list of language codes, see the <code>Subtag</code> values in <a href="http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry">http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry</a>.</p>
                    <h3><code>variant</code></h3>
                    <p>The <code>variant</code> field describes the kind of audio track. The possible values, with standard meanings are:</p>
                    <ul>
                        <li><code>main</code> - the main track, usually the one muxed into the video file</li>
                        <li><code>alternate</code> - an alternate audio track</li>
                        <li><code>commentary</code> - an audio track that provides commentary on the video track</li>
                        <li><code>dub</code> - a tracked containing a dubbed version of spoken words in a different language</li>
                        <li><code>descriptive</code> - track is descriptive of the video content in some way</li>
                    </ul>
                    <h3>Account defaults</h3>
                    <p>You can set account defaults for <code>language</code> and <code>variant</code> to determine what audio track will be treated as the default by the Brightcove Player (the default can also be overridden by updating the track metadata, as we will see in a section below). To set the defaults for your account, contact Support.</p>
                </section>
                <section class="bcls-section" id="Ingest_audio_tracks">
                    <h2>Ingest audio tracks</h2>
                    <p>Now we will look at the API calls to ingest audio tracks for the two use cases described earlier.</p>
                    <h3>New video with multiple audio tracks</h3>
                    <h4>Create the video object (CMS API)</h4>
                    <ol class="blcs-tasklist">
                        <li>You can add several items of video metadata when you create the video object, but here we will just add the minimum: a <code>name</code> for the video:
<pre class="line-numbers"><code class="language-json">{
    "name": "<span class="bcls-input">YOUR_VIDEO_NAME</span>"
}</code></pre>
                        </li>
                        <li>Submit the JSON above (with the placeholder text replaced by your video name) as the request body for <code>POST</code> request to <code>https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">YOUR_ACCOUNT_ID</span></code></li>
                        <li>You will get a lot of video metadata back in the response, but the important piece here is the <code>id</code> (the video id), which you need for the next step.</li>
                    </ol>
                    <h4>Ingest the video and audio tracks</h4>
                    <p>Next we will ingest the video and audio tracks (we could add other assets like images and text tracks, but we will keep it simple here). The one thing you may find a little confusing is that <code>audio_tracks</code> appears twice in the JSON for the request body:</p>
                    <ul>
                        <li>An <code>audio_tracks</code> object within the <code>master</code> object contains metadata for the audio track included in the video file (if any - this is also referred to as the muxed in audio) - this will include metadata only, without a URL for the audio file, since the audio track is already included in the video file</li>
                        <li>A top-level <code>audio_tracks</code> object describing the additional audio tracks you are ingesting - these will include a URL for audio file, as well as other metadata</li>
                    </ul>
                    <ol class="bcls-tasklist">
                        <li>The JSON data to be sent in the request body is as follows:
<pre class="line-numbers"><code class="language-json">{
  "master": {
      "url": "<span class="bcls-input">http://host/master.mp4</span>",
      "audio_tracks" [
          {
              "language": "en",
              "variant": "main"
          }
      ]
  },
  "audio_tracks" [
      {
          "url": "<span class="bcls-input">https://my.assets.com/audio-fr.mp4</span>"
          "language": "fr",
          "variant": "dub"
      },
      {
          "url": "<span class="bcls-input">https://my.assets.com/audio-commentary.mp4</span>"
          "language": "en",
          "variant": "commentary"
      }
  ]
    "profile": "<span class="bcls-input">MY_INGEST_PROFILE</span>",
    "capture-images": true,
    "callbacks": [
        "http://my.apps.com/bcls/di-api/di-callbacks.php"
    ]
}</code></pre>
                        </li>
                        <li>Send the JSON above, substituting your own URLs for the placeholders, and adjusting the <code>language</code> and <code>variant</code> values, in a <code>POST</code> request to <code>https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">ACCOUNT_ID</span>/videos/<span class="bcls-input">ID/ingest-requests</span></code> (the <code>ID</code> here is the video id returned from request to create the video object)</li>
                    </ol>
                    <h3>Add audio tracks to an existing video</h3>
                    <p>To add additional audio tracks to an existing video, the procedure is the same, except that you do not need to make the request to the CMS API to create the video, because it already exists. And in the request to the Dynamic Ingest API, you will not need to include the URL for the video file. You do, however, want to include the metadata for the muxed in audio track in the existing video. So the JSON for the ingest request will look like this:</p>
<pre class="line-numbers"><code class="language-json">{
  "master": {
      "audio_tracks" [
          {
              "language": "en",
              "variant": "main"
          }
      ]
  },
  "audio_tracks" [
      {
          "url": "<span class="bcls-input">https://my.assets.com/audio-fr.mp4</span>"
          "language": "fr",
          "variant": "dub"
      },
      {
          "url": "<span class="bcls-input">https://my.assets.com/audio-commentary.mp4</span>"
          "language": "en",
          "variant": "commentary"
      }
  ]
    "profile": "<span class="bcls-input">MY_INGEST_PROFILE</span>",
    "capture-images": false,
    "callbacks": [
        "http://my.apps.com/bcls/di-api/di-callbacks.php"
    ]
}</code></pre>
                </section>

            </article>
            <!-- end drupal content -->
            <section class="bcls-section" id="BCLreferences">
                <h2>Related Topics</h2>
                <ul>
                    <li><a href="//docs.brightcove.com/en/video-cloud/di-api/getting-started/overview-di.html">Dynamic Ingest API Overview</a></li>
                    <li><a href="//docs.brightcove.com/en/video-cloud/di-api/getting-started/quick-start-di.html">Quick Start to Dynamic Ingest</a></li>
                </ul>
            </section>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v2.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
    <script>
        $(document).foundation();
    </script>

<div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<div class="bcls-footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>
