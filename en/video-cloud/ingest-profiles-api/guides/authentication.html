<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Ingest Profiles API Authentication</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Ingest Profiles API Authentication</h1>
				<p>Authentication for API requests depends on the <a href="//docs.brightcove.com/en/video-cloud/oauth-api/index.html">Brightcove OAuth Service</a>. Go to the general OAuth documentation for a full explanation of how it works. Here we will walk through the steps you need to complete to get client credentials and use those in turn to get temporary access tokens for Ingest Profiles API calls.</p>
            </div>
            <div class="section" id="introduction">
                <h2>Introduction</h2>
                <p>Authentication via OAuth2 involves 2 operations:</p>
                <ol>
                    <li>Get client credentials - a one-time operation per API</li>
                    <li>Get an access token - before each API request</li>
                </ol>
                <p>We will walk through these two operations for the Ingest Profiles API in the following sections.</p>
            </div>
            <div class="section" id="getCredentials">
                <h2>Client credentials</h2>
                <p>Client credentials consist of a <code>client_id</code> and a <code>client_secret</code>. These are used a username/password pair when you getting access tokens. Once you create your client credentials, they are valid indefinitely. You can create credentials for one or more accounts, and for any list of API operations you like. In this guide, we'll see how to create credentials for all Ingest Profiles API operations for a single account.</p>
                <p>For many API operations, you can get client credentials through the API Authentication UI in Studio, and that is the recommended way to do it. The operations for the Ingest Profiles API are not currently included in the UI, however, so for now you will need to make requests to the OAuth API directly. We will walk through this in the following section.</p>
            </div>
            <div class="section" id="stepsGetCredentials">
                <h2>Get client credentials</h2>
                <p>Below are steps that will guide you through getting your client credentials. You will first need to get your BC_TOKEN, which is used to authenticate you for the client credentials request.</p>
                <h3>Get your <code>BC_TOKEN</code> and account number</h3>
                <p>You will need to login to Studio to get your <code>BC_TOKEN</code>.</p>
                <ol>
                    <li>Login to Studio as you normally do.</li>
                    </li>
                    <li>You need your account number (referred to as the Publisher ID in Studio), which you can get by going to your account profile in Studio:<br />
                    <img class="video-cloud-only" src="assets/account-info-old-studio.png" width="199" height="175">
                    <img class="perform-only" src="assets/get-account-info-perform.png" width="187" height="193">
                    </li>
                    <li>With any page in Studio open, open the developer tools for the browser, go to the Console, and paste in the following code:
<pre><code>var cookiesArray = document.cookie.split(";"), cookiesObj = {}, i, tmpArray = [];
for (i = 0; i < cookiesArray.length; i++) {
    tmpArray = cookiesArray[i].split("=");
    cookiesObj[tmpArray[0].replace(/\s/g, "")] = tmpArray[1];
}
window.prompt("BC_TOKEN:", cookiesObj.BC_TOKEN);</code></pre>
                        <p>and press return.</p>
                    </li>
                    <li>You should see a prompt appear that contains your <code>BC_TOKEN</code>:<br /><img src="//docs.brightcove.com/en/video-cloud/oauth-api/guides/assets/prompt-with-token-safari.png" width="426" height="183"></li>
                    <li>If you have your BC_TOKEN, go on to the <a href="#getClientCredentials">Get client credentials</a> section; if for some reason you did not get your BC_TOKEN using the previous steps, just go to the Console, type <code>document.cookies</code>, and press return.
                    </li>
                    <li>All cookies for the page will be returned in a semi-colon-separated list. Find the BC_TOKEN cookie in the list, and copy the value:<br />
                    <img src="//docs.brightcove.com/en/video-cloud/oauth-api/guides/assets/get-access-token-console.png" width="636" height="281" alt="BC_TOKEN in Chrome Developer Tools">
                </ol>
                <h3>Get <code>client_credentials</code></h3>
                <p>Now we are ready to make the call to the OAuth service to retrieve client credentials. We have to specify a client application name that we are requesting credentials for - the name is arbitrary, intended to help you keep track of what the credentials are for - and here we will just use "ingest-profiles-api-client." We also have to specify the scope of the operations we want access to in an array, and here we will use:</p>
<pre><code>[
    "video-cloud/ingest-profiles/profile/read",
    "video-cloud/ingest-profiles/profile/write",
    "video-cloud/ingest-profiles/account/read",
    "video-cloud/ingest-profiles/account/write"
]</code></pre>
                <ol start="7">
                    <li>Edit the following curl command, then paste it into the command line and press <strong>Return</strong>. You must provide your specific values for the following three values:
                    <ul>
                        <li><em><strong>your BC_TOKEN</strong></em></li>
                        <li><em><strong>your credential name</strong></em></li>
                        <li><em><strong>your account id</strong></em></li>
                    </ul>
<pre><code>curl \
  --include \
  --header "Authorization: BC_TOKEN <em><strong>your_BC_TOKEN</strong></em>" \
  --data 'name=<em><strong>your credential name</strong></em>&maximum_scope=[{
      "identity": {
        "type": "video-cloud-account",
        "account-id": <em><strong>your_account_id</strong></em>
      },
      "operations": [
            "video-cloud/ingest-profiles/profile/read",
            "video-cloud/ingest-profiles/profile/write",
            "video-cloud/ingest-profiles/account/read",
            "video-cloud/ingest-profiles/account/write"
        ]
    }]' \
https://oauth.brightcove.com/v3/client_credentials</code></pre>

                    </li>
                    <li>The response should look like this (formatting added):
<pre><code>{
    "client_secret":"HHxp9xn0yxMqktLEG2DhzjYB4g6AN2cl02KudMvfK-3dT6JRtiR1tUZ7LiwtHI5vqo4VT7LuD6tM4c0llEw2Rw",
    "issued_at":"2014-08-11T17:37:24Z",
    "name":"Test Client",
    "redirect_url":null,
    "description_html":"My my test players app",
    "issued_to":"<em><strong>your email address</strong></em>",
    "client_id":"9309bb5d-90fb-4d3a-aba4-1795dd5fa0b8",
    "maximum_scope":[{
        "identity":{"type":<span class="video-cloud-only">"video-cloud-account"</span><span class="perform-only">perform-account</span>,
            "account-id":57838016001},
            "operations":<span class="video-cloud-only">["video-cloud/players/all"]</span><span class="perform-only">["perform/players/all"]</span>
        }],
    "trusted":null,
    "type":"credential",
    "description":"My my test players app",
    "expires_at":null,
    "revoked":null,
    "name_html":"Test Client",
    "issued_user":53255203001
}</code></pre>
                    </li>
                    <li>Copy and save the <code>client_id</code> and <code>client_secret</code>, as you will need these anytime you need to get an <code>access_token</code>.</li>
                </ol>
            </div>
            <div class="section" id="getAccessToken">
                <h2>Get access tokens</h2>
            </div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.9/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
	var feedbackMail = document.getElementById("feedbackMail");
	feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
	</script>
</body>

</html>
