<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Quick Start to Pull-Based Ingest</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href="//files.brightcove.com/proxima-nova/font-faces.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/styles/github.min.css">
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="large-2 columns show-for-large-up">
			<div id="sidenav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Quick Start to Pull-Based Ingest</h1>
				<!-- Place document intro sentence(s) here -->
          <p>In this quick start you will perform the following tasks:</p>
          <ul>
          	<li>Create a Node.js application to act as your OAuth security proxy. This proxy will use your access token to make calls to the needed APIs.</li>
            <li>Create a video using the Content Management System (CMS) API and use the returned ID in the Pull-Based Ingest (PBI) API call.</li>
            <li>Create an ingest request using the ID returned from the CMS API and an HTTP <code>POST</code> method using the PBI API. </li>
            <li>Verify the ingest request functioned correctly.</li>
          </ul>
          <p class="BCL-aside">For details on the API used in this document you can view the <a href="//docs.brightcove.com/en/video-cloud/pbi-api/guides/overview-pbi.html">Pull-Based Ingest API Overview</a> document and the <a href="//docs.brightcove.com/en/video-cloud/pbi-api/reference/versions/v1/index.html">Pull-Based Ingest API</a> reference.</p>
          <p class="text-warning">Note: The steps in the document involve curl and other command-line tools that are native to Mac and Linux systems, but not part of the Windows operating system. If you are on Windows, you can get these tools by installing <a href="//cygwin.com">cygwin</a>. During the install you will be prompted for packages to install. Open the <strong>Net</strong> package, then check the <strong>curl</strong> option and then finish the installation. Once you have done this you will be able to follow the Quick Start to Pull-Based Ingest successfully as written using the cygwin command line. Tools are available to run curl at the normal Windows command line, but not detailed in this document.</p>
			</div>
      <div id="oauthproxy" class="section">
        <h2>Create proxy</h2>
        <p>Security on the PBI API uses OAuth2. This requires some work to access the API. </p>
        <ol>
        <li>In this quick start it is recommended you set up a Node.js application to act as a proxy. The <a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/quick-start.html">OAuth Quick Start</a> guides you through the steps to create a basic proxy in Node.js that gets an access token for a Brightcove API, makes the API call, and then returns the response data.</li>
        <li>You will also need a local web server running to serve up a testing page, <strong>tester.html</strong>, which works with the proxy. Note that simply browsing the page as a file will NOT work as the page utilizes an iframe, which requires an HTTP server.</li>
        </ol>
      </div>
			<div id="obtaincredentials" class="section">
				<h2>Obtain credentials</h2>
				<p>To use the PBI API you will need proper credentials. Later in this quick start, you will use the credentials in a form when submitting requests to APIs.</p> 
				<ol start="3">
					<li>To obtain proper credentials use your choice of these two options (Be sure to read the paragraph following the bullets to ensure you ask for the proper operations):</li>
				</ol>
				<ul>
				    <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials.html">OAuth: Get Client Credentials Using CURL</a></li>
				    <li><a href="http://docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials-postman.html">OAuth: Get Client Credentials Using Postman</a></li>
				</ul>
				<p>Whichever option you choose, you will need to ask for the correct operation permissions. In this quick start you will need both <strong>video</strong> and <strong>ingest-profile</strong> operations. The following can be used with curl or Postman to get the proper permissions:</p>
				<p><code data-gist-id="ff79f6ddb8cfce63b153" data-gist-hide-footer="true" data-gist-line="1-6"></code></p>
			</div>
			<div id="obtainvideoid" class="section">
				<h2>Obtain video id</h2>
				<p>Before you can create an ingest request you must first create a video object. This video object will eventually contain the master copy of the video, metadata, possible renditions and other information. To do this, you will use the Content Management System (CMS) API, permissions for which were granted in the previous section.</p>
				<ol start="4">
					<li>You will now use the proxy in conjunction with the <strong>tester.html</strong> page to create a video object and retrieve the <code>id</code> for the video. Browse to <strong>tester.html</strong> and complete the form as follows:</li>
				</ol>
				<div class="BCL-aside">
					<p>Note: When filling out the form:</p>
					<ul>
					    <li>Be sure the <strong>body contains no spaces or carriage returns</strong></li>
					    <li>Realize the name you supply will be the video name you see in Video Cloud Studio</li>
					</ul>
				</div>
				<table>
					<tr>
						<th>Form Field</th>
						<th>Value</th>
					</tr>
					<tr>
						<td>Client id</td>
						<td>Returned in your client credentials</td>
					</tr>
					<tr>
						<td>Client secret</td>
						<td>Returned in your client credentials</td>
					</tr>
					<tr>
						<td>Call type</td>
						<td><strong>POST</strong></td>
					</tr>
					<tr>
						<td>Call body</td>
						<td><strong>{"name":"**YOUR_VIDEO_NAME**"}</strong></td>
					</tr>
					<tr>
						<td>Full request URL for the API call</td>
						<td><strong>https://cms.api.brightcove.com/v1beta1/accounts/**YOUR_ACCOUNT_ID**/videos</strong></td>
					</tr>         
				</table>
				<p>After you click the <strong>Submit</strong> button, the text area following the button will be populated with a JSON object, as shown in the following screenshot. Copy the ID returned and proceed to the next section.</p>
				<p><img src="/en/video-cloud/pbi-api/guides/assets/quick-start-pbi-cms-form.png"></p>
			</div>
			<div id="createingestrequest" class="section">
				<h2>Create ingest request</h2>
				<ol start="5">
					<li>Create the actual ingest request by again using the OAuth proxy in conjunction with the <strong>tester.html</strong> page. This time you will use the ID just returned to create the ingest request. Browse to <strong>tester.html</strong> and complete the form as follows:</li>
				</ol>
				<div class="BCL-aside">
					<p>Note: When filling out the form:</p>
						<ul>
						    <li>Be sure the <strong>body contains no spaces or carriage returns</strong></li>
						    <li>The profile varies based upon the renditions you wish created; see the <a href="//docs.brightcove.com/en/video-cloud/pbi-api/guides/standard-profiles.html">Standard Ingest Profiles</a> document for details</li>
						</ul>
				</div>
				<table>
					<tr>
						<th>Form Field</th>
						<th>Value</th>
					</tr>
					<tr>
						<td>Client id</td>
						<td>Returned in your client credentials</td>
					</tr>
					<tr>
						<td>Client secret</td>
						<td>Returned in your client credentials</td>
					</tr>
					<tr>
						<td>Call type</td>
						<td><strong>POST</strong></td>
					</tr>
					<tr>
						<td>Call body</td>
						<td>{"master":{"url":"**YOUR_PATH_TO_VIDEO**}"},"profile":"**YOUR_RENDITION_PROFILE**"}</td>
					</tr>
					<tr>
						<td>Full request URL for the API call</td>
						<td><strong>https://ingest.api.brightcove.com/v1/accounts/**YOUR_ACCOUNT_ID**/videos/**ID_RETURNED_EARLIER**/ingest-requests</strong></td>
					</tr>
				</table>
				<p>After you click the <strong>Submit</strong> button, the text area following the button will be populated with a JSON object, as shown in the following screenshot. The ID returned uniquely identifies your ingest request.</p>
				<p><img src="/en/video-cloud/pbi-api/guides/assets/quick-start-pbi-pbi-form.png"></p>
			</div>
			<div id="seerequestresults" class="section">
				<h2>See request results</h2>
				<ol start="6">
					<li>See the results of the ingest request by going to Video Cloud Studio, choose the Media module, then double-click the video you just created. Select the <strong>Video Files</strong> tab, and in the <strong>Renditions List</strong> you will see the renditions that correspond to the profile you selected.</li>
				</ol>
				<p><img src="/en/video-cloud/pbi-api/guides/assets/studio-showing-renditions.png"></p>
				<p class="BCL-aside">Note: It is possible not all renditions will be created as your master may not be of high enough quality to produce all intended renditions.</p>
				<p>Congratulations, in this quick start you have completed the steps necessary to create an ingest request and have seen the renditions of your master video have been created.</p>
			</div>
			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li><a href="">DOC TITLE</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.7/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.2/fastclick.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.3.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	<div class="footer text-center"><a href="mailto:docs@brightcove.com">Questions or comments?</a></div>
</body>

</html>
