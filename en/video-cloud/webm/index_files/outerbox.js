var TRCRBox=function(v,d,l,g){var h=window.opera?true:false;var c=document.attachEvent&&!h?true:false;this.is_ie7=this.is_ie&&window.XMLHttpRequest;this.is_khtml=document.all&&document.addEventListener?true:false;this.is_safari=document.childNodes&&!document.all&&!navigator.taintEnabled&&!navigator.accentColorName;this.is_dom=document.getElementById?true:false;this.is_gecko=!this.is_ie&&!this.is_khtml&&!this.is_safari&&this.is_dom;this.origin=v;this.header=false;this.item_id_array=[];this.reqParams=g;this.reqParams.req=null;this.reqParams["item-type"]="video";this.id=o();this.allowAnimation=false;__trcCopyProps(d,this);this.opened=false;this.loaded=false;this.animate=null;this.element=null;this.listContainer=null;this.loaderAnim=null;this.retryCount=0;this.drawList=false;this.trc=l;this.timeout=false;this.timeoutId=null;this.errorHandler="";this.ads_boxes=[];this.boxes=[];this.mode_name=(typeof this.mode_name=="undefined")?((typeof this.syndicator=="undefined")?"rbox-"+this.origin:"rbox-syndication"):this.mode_name;this.src=null;var e=l;var a=this;this.auto_scroll_interval=null;this.auto_scroll=null;var t=null;var r=null;function o(){return"trc_"+Math.floor(Math.random()*100000)}function n(){var x="http://trc.taboolasyndication.com/dispatch/";var z=["publisher="+escape(window.trc_publisher_id),"list-id="+escape(a.listContainer.id),"format=json","id="+parseInt(Math.random()*1000),"list-size="+e.getProperty(a.mode_name,"list-size")];if(a.syndicator){z.push("syndicator="+a.syndicator)}if(a.testmode){z.push("testmode=true")}if(typeof trc_label!="undefined"){z.push("label="+trc_label)}if(a.origin=="t2v"){a.reqParams["item-type"]="text"}if(typeof e.get_intent=="function"){z.push("intent="+e.get_intent(a))}for(var y in a.reqParams){if(y=="external"||a.reqParams[y]==null||typeof a.reqParams[y]=="undefined"){continue}if(y=="item-url"){if((a.reqParams[y].search("taboolasyndication.com")<0)&&(a.reqParams[y].search("taboola.com")<0)){z.push(escape(y)+"="+escape(a.reqParams[y]))}continue}z.push(escape(y)+"="+escape(a.reqParams[y]))}a.item_id_array.push(a.reqParams["item-id"]);if(a.reqParams.external){z.push("external="+escape(a.reqParams.external))}return x+"?"+z.join("&")}function w(x){var y=window.trc_publisher_id;if(typeof a.syndicator!="undefined"){y=a.syndicator}if(x=="preview"){return"http://cdn.taboolasyndication.com/libtrc/"+y+"/trc-"+x+".js"}return"http://cdn.taboolasyndication.com/libtrc/"+y+"/trc-"+a.listContainer.id+"-"+x+".js"}function m(x){if((typeof trc_json_response=="undefined")||(trc_json_response==null)){if(x){a.src=w("preview")}else{a.src=w("error")}return true}return false}function q(x){if(((typeof trc_json_response.trc=="undefined")||typeof trc_json_response.trc["video-list"]=="undefined")||(typeof trc_json_response.trc["video-list"].video=="undefined")||(trc_json_response.trc["video-list"].video.length<1)){if(x){a.src=w("preview")}else{if(a.origin!="uploader"){a.src=w("empty")}else{trc_json_response.trc["video-list"]={video:[]};return false}}return true}return false}function u(x,z){if(x){var y=trc_json_response.trc["video-list"].video;if(!(y instanceof Array)){y=[y]}if(z!=w("preview")){if(y.length<10){a.src=w("preview");return true}}}return false}function s(){if(a.timeout&&this.src!=w("timeout")){return}if(typeof a.timeoutId=="number"){window.clearTimeout(a.timeoutId);delete a.timeoutId}var x=false;if((a.testmode)&&((window.location.host.search("taboolasyndication.com")>=0)||(window.location.host.search("taboola.com")>=0))){x=true}if(!m(x)){if(!q(x)){if(!u(x,this.src)){if(!a.drawList){a.listContainer.removeChild(a.loaderAnim);a.drawList=true;a.drawListBody(trc_json_response.trc,t,r);e.startQueue()}trc_json_response=null;return}}}a.getData()}this.getData=function(){__trcInfo("Starting to load recommendations");this.loaded=true;a.retryCount++;if(a.retryCount>e.MAX_RETRY){a.listContainer.removeChild(this.loaderAnim);a.drawList=true;if(typeof a.errorHandler=="string"){a.listContainer.appendChild(document.createTextNode("Error getting recommendations: "+a.errorHandler))}else{if(typeof a.errorHandler=="function"){a.errorHandler()}}e.startQueue();return}__trcRegisterDomReadyHandler(function(){try{var x=8000;if(a.timeout){x=12000}a.timeoutId=window.setTimeout(function(){a.timeout=true;a.src=w("timeout");a.getData()},x);TRC.loadScript(a.src,"js",s)}catch(y){__trcError("Error in getData: "+y)}},(this.is_ie)?false:true)};function p(){var x=a.element.scrollHeight-a.element.clientHeight;if(x>0){a.element.style.height=Math.ceil(a.element.clientHeight+(x/4))+"px";return}window.clearInterval(a.animate);a.animate=null}function f(){var x=a.element.clientHeight-(a.header.offsetHeight+__trcGetMargins(a.header));if(x>0){a.element.style.height=Math.floor(a.element.clientHeight-(x/4))+"px";return}window.clearInterval(a.animate);a.animate=null;a.listContainer.style.display="none"}function k(y,B,C,x,A){var z=document.createElement("element");z.className=B;z.innerHTML=x;A.appendChild(z);return z}function j(){if(a.header_value=="No Header"){return false}var z=e.getProperty(a.mode_name,"header");if(z=="No Header"||z==""){return false}var y=document.createElement("div");y.id=a.id.replace("trc_","trc_header_");y.className="trc_rbox_header";var x=document.createElement("span");x.className="trc_rbox_header_span";x.innerHTML=(a.header_value==false)?z:a.header_value;y.appendChild(x);if(e.getProperty(a.mode_name,"expandable")){y.onclick=function(){a.toggle(a.allowAnimation)}}return y}function b(x){var y=document.createElement("div");y.id=(typeof x.syndicator=="undefined")?"rbox-"+x.origin:"rbox-syndication";y.className="trc_rbox_div";y.style.display="none";return y}this.close=function(x){if(typeof x!="boolean"){x=true}if(typeof this.header=="object"){if(this.header.className.search("trc_rbox_header_open")<0){this.header.className=this.header.className+" trc_rbox_header_closed"}else{this.header.className=this.header.className.replace("trc_rbox_header_open","trc_rbox_header_closed")}}this.opened=false;if(x){this.animate=window.setInterval(function(){f()},10)}else{this.element.style.height="auto";this.listContainer.style.display="none";if(e.drawInterface){this.element.style.display="none"}this.listContainer.parentNode.style.display="none"}};this.open=function(x){if(typeof x!="boolean"){x=true}if(x){this.element.style.height=this.element.clientHeight+"px";this.animate=window.setInterval(function(){p()},10)}else{this.element.style.height="auto"}if(typeof this.header=="object"){if(this.header.className.search("trc_rbox_header_closed")<0){this.header.className=this.header.className+" trc_rbox_header_open"}else{this.header.className=this.header.className.replace("trc_rbox_header_closed","trc_rbox_header_open")}}this.opened=true;if(e.drawInterface){this.element.style.display="block"}this.listContainer.style.display="block";this.listContainer.parentNode.style.display="block";if((this.reqParams["item-id"]!=null&&this.reqParams["item-id"].length!=0&&typeof this.reqParams["item-id"]!="undefined")||(this.testmode==true)){if(this.loaderAnim==null){this.loaderAnim=this.genLoading(this.listContainer,e)}}};this.load=function(y,x){if(this.loaded){return}if(this.loaderAnim==null){this.open(y)}if((this.reqParams["item-id"]!=null&&this.reqParams["item-id"].length!=0&&typeof this.reqParams["item-id"]!="undefined")||(this.testmode==true)){this.src=n();this.errorHandler=x;this.getData()}else{this.loaded=true}};this.toggle=function(x){if(typeof x!="boolean"){x=true}if(this.animate){window.clearInterval(this.animate);this.animate=null}if(this.opened){this.close(x)}else{this.open(x);if(!this.loaded){e.renderQueue.push(this)}}};this.render=function(x){this.element=document.createElement("div");this.element.id=this.id.replace("trc_","trc_wrapper_");this.element.className="trc_rbox "+a.mode_name;x.appendChild(this.element);this.header=j();if(typeof this.header=="object"){this.element.appendChild(this.header)}if(this.listContainer==null){var z=document.createElement("div");z.id=this.id.replace("trc_","outer_");z.className="trc_rbox_outer";z.style.overflow="hidden";this.listContainer=b(this);z.appendChild(this.listContainer);this.element.appendChild(z)}if(e.drawInterface){this.element.style.display="none"}this.element.style.overflowY="hidden";this.element.style.overflowX="visible";var y=e.getProperty(this.mode_name,"auto-scroll");if(typeof y!="undefined"){if(y!="none"){this.element.onmouseover=function(){if(a.auto_scroll_interval!=null){window.clearInterval(a.auto_scroll_interval)}};this.element.onmouseout=function(){if(typeof a.auto_scroll=="function"){if(a.auto_scroll_interval!=null){window.clearInterval(a.auto_scroll_interval)}a.auto_scroll_interval=window.setInterval(a.auto_scroll,parseInt(y))}}}}if(((this.reqParams["item-id"]!=null&&this.reqParams["item-id"].length!=0&&typeof this.reqParams["item-id"]!="undefined")||(this.testmode==true))&&e.visible){e.log1("available",{pi:this.reqParams["item-id"],pt:this.reqParams["item-type"],li:this.listContainer.id})}};this.is_ad_visible=function(z){if(z.clientHeight<=0){return false}var B=(z.offsetTop<0)?0:z.offsetTop;var y=(z.offsetLeft<0)?0:z.offsetLeft;var x=z.offsetLeft+z.clientWidth*0.5;var A=z.offsetTop+z.clientHeight*0.5;if(((B>=this.listContainer.scrollTop)&&(B<(this.listContainer.scrollTop+this.listContainer.offsetHeight)))&&((A>this.listContainer.scrollTop)&&(A<=(this.listContainer.scrollTop+this.listContainer.offsetHeight)))&&((y>=this.listContainer.scrollLeft)&&(y<(this.listContainer.scrollLeft+this.listContainer.offsetWidth)))&&((x>this.listContainer.scrollLeft)&&(x<=(this.listContainer.scrollLeft+this.listContainer.offsetWidth)))){return true}else{return false}};this.show_ad=function(){var x=this.ads_boxes;for(i=0;i<x.length;i++){if(x[i]!=null){if(this.is_ad_visible(x[i])){x[i].img.load_count=new Date().getTime();x[i].thumb.appendChild(x[i].img);x[i].img.src=x[i].img_src;x[i]=null}}}};return this};TRCRBox.prototype.drawListBody=function(H,E,D){this.boxes=[];this.ads_boxes=[];var a={};var v=0;var C=this.listContainer;var k=this.trc;if(typeof H["test-variant"]!="undefined"){if(typeof k.modes["_ab_"+this.mode_name+"_"+H["test-variant"]]!="undefined"){C.parentNode.className=this.mode_name="_ab_"+this.mode_name+"_"+H["test-variant"]}}var p=H["video-list"].video;if(typeof p=="undefined"){return}if(!(p instanceof Array)){p=[p]}function s(I){var e;do{e=Math.floor(Math.random()*p.length);if(p[e]!=null){if(p[e]["id"]==I){p[e]=null}}}while(p[e]==null);var J=p[e];p[e]=null;return J}var w=this.reqParams.req=H.req;var x=this.reqParams.sd=H["session-data"];var q=this.reqParams.uid=H["user-id"];if(typeof PageManager=="function"){PageManager.storePublisherValue(window.trc_publisher_id,"session-data",x);PageManager.storeValue("user-id",q)}var n=this.reqParams["item-id"];var t=this.reqParams["item-type"];var d=C.id;var g=this.origin;var G=false;var c=k.getProperty(this.mode_name,"detail-order");var u=this;c=c.split(",");for(var A=0;A<c.length;A++){if(c[A]=="duration"){G=true}}C.onmouseover=function(){k.log1("explore",{ri:w,sd:x,ui:q,pi:n,pt:t,li:d})};var l=document.createElement("div");l.id="internal_"+this.id;C.appendChild(l);var b=false;var j=k.getProperty(this.mode_name,"list-size");if(p.length>j){b=true}else{j=p.length}if(k.getProperty(this.mode_name,"orientation")=="horizontal"){C.style.overflowY="hidden";C.style.overflowX="auto"}else{C.style.overflowX="hidden";C.style.overflowY="auto"}for(var A=0;A<j;A++){var h=(b)?s(n):p[A];try{var r=this.drawVideoBox(h,G);if(k.getProperty(this.mode_name,"orientation")=="vertical"){var o=document.createElement("div");o.style.clear="both";r.appendChild(o)}else{r.style.height=C.clientHeight+"px"}if(k.getProperty(this.mode_name,"navigation-type")=="paging"){this.boxes.push(r)}else{l.appendChild(r);if(r.fixTitleFont){r.fixTitleFont()}if(r.fixDescOverflow){r.fixDescOverflow()}v+=r.clientWidth+1}if(r.video_data.type=="video-ad"||r.video_data.type=="text-ad"){this.ads_boxes.push(r)}}catch(F){__trcError("Error in drawVideoBox: "+F)}}if(k.adjustRBoxHeight){window.setTimeout(function(){try{var K=C.clientHeight-l.clientHeight;if(K>0){var I=Math.max(C.clientHeight-K,k.getProperty(this.mode_name,"thumbnail-height"));C.style.height=I+"px"}}catch(J){__trcError("Problem in adjustRBoxHeight: "+J.message,J.stack)}},1000)}if(k.getProperty(this.mode_name,"navigation-type")=="paging"){var z=TRC.filesAdded;D=function(){var e=u.drawPager();var I=k.getProperty(u.mode_name,"auto-scroll");if(typeof I!="undefined"&&typeof e!="undefined"){if(I!="none"){u.auto_scroll=function(){var J=0;for(A=0;A<e.pages.length;A++){if(e.pages[A]==e.current){if(A!=(e.pages.length-1)){J=++A;break}}}e.pages[J].page_switch()};if(u.auto_scroll_interval!=null){window.clearInterval(u.auto_scroll_interval)}u.auto_scroll_interval=window.setInterval(u.auto_scroll,parseInt(I))}}if(typeof z.css!="undefined"&&E!=null){window.clearInterval(E)}};if(typeof z.css=="undefined"){E=window.setInterval(D,100)}else{D()}}else{if(k.getProperty(this.mode_name,"orientation")=="horizontal"){l.style.width=v+"px"}var u=this;C.onscroll=function(){k.log1("explore",{ri:w,sd:x,ui:q,pi:n,pt:t,li:d});u.show_ad()};this.show_ad()}if(typeof this.syndicator!="undefined"){var y=null;var B=null;var m=k.getProperty(this.mode_name,"branding-url");if(typeof m=="object"){if(typeof m[this.syndicator]!="undefined"){var y=document.createElement("div");y.id="branding_div";var f=document.createElement("img");f.id="branding_img";f.src=m[this.syndicator];if(k.getProperty(this.mode_name,"header")){B=document.getElementById("_trc_header_span")}else{if(k.direction=="ltr"){y.style.textAlign="right"}else{y.style.textAlign="left"}y.style.height="auto";y.style.cssFloat="none";y.style.styleFloat="none"}f.onload=function(){if(B!=null){var e=u.listContainer.parentNode.clientWidth-B.offsetWidth;if(this.width>e){this.style.width=e-5+"px"}}};y.appendChild(f)}if(y!=null){if(B!=null){B.parentNode.appendChild(y)}else{C.parentNode.parentNode.insertBefore(y,C.parentNode)}}}}k.getFunction(this.mode_name,"list-suffix",l,g);k["publisher-end"](this.id);if(C.clientHeight>0){k.log1("visible",{ri:H.req,sd:x,ui:q,pi:n,pt:t,li:d})}};TRCRBox.prototype.drawPager=function(){var h=this.mode_name;var f=this.boxes;var p=this.reqParams.req;var q=this.reqParams.sd;var l=this.reqParams.uid;var n=this.reqParams["item-type"];var j=this.reqParams["item-id"];var d=this.trc;var v=document.getElementById("internal_"+this.id);var u=this.listContainer;function g(){while(v.hasChildNodes()){v.removeChild(v.lastChild)}}function o(){var A=new Array();var z=0;var y=0;for(t=0;t<f.length;t++){v.appendChild(f[t]);if(d.getProperty(h,"orientation")=="vertical"){if((v.offsetHeight-5)>=u.clientHeight){v.removeChild(f[t]);A[z++]={start_index:y,end_index:((t-1)<y)?y:t-1};if((t-1)>=y){y=t--}else{y=t}g()}}else{if(((u.clientHeight*1.1))<u.scrollHeight){v.removeChild(f[t]);A[z++]={start_index:y,end_index:((t-1)<=y)?y:t-1};if((t-1)>=y){y=t--}else{y=t}g()}}}A[z]={start_index:y,end_index:t-1};g();return A}g();u.style.overflowX="hidden";u.style.overflowY="hidden";var s=o();var k=document.createElement("div");k.style.clear="both";for(t=s[0].start_index;t<=s[0].end_index;t++){if(t<f.length){v.appendChild(f[t]);if(f[t].video_data.type=="video-ad"||f[t].video_data.type=="text-ad"){if(f[t].img_src!=null){f[t].img.load_count=new Date().getTime();f[t].thumb.appendChild(f[t].img);f[t].img.src=f[t].img_src;f[t].img_src=null}}if(f[t].fixTitleFont){f[t].fixTitleFont()}if(f[t].fixDescOverflow){f[t].fixDescOverflow()}}}v.appendChild(k);var r=document.getElementById("trc_pager");if(r!=null){u.parentNode.removeChild(r)}var a=s.length;if(a-parseInt(a)>0.1){a=Math.ceil(a)}else{a=parseInt(a)}if(a<=1){return}var w=document.createElement("div");u.parentNode.appendChild(w);w.id="trc_pager";w.className="trc_pager";w.current=null;w.pages=new Array();w.curPage=0;var x=document.createElement("div");x.id="pager_prev_"+this.id;x.className="trc_pager_prev";w.appendChild(x);x.onclick=function(){if(w.curPage>0){w.pages[w.curPage-1].onclick()}};x.innerHTML="&laquo;";var m=document.createElement("div");m.id="pager_next_"+this.id;m.className="trc_pager_next";m.onclick=function(){if(w.curPage+1<w.pages.length){w.pages[w.curPage+1].onclick()}};m.innerHTML="&raquo;";var b=document.createElement("div");b.className="trc_pager_pages";w.appendChild(b);var e=document.createElement("div");e.className="trc_pager_counter";w.appendChild(e);for(var t=0;t<a;t++){var c=document.createElement("div");c.innerHTML=(t+1);c.className="trc_pager_unselected";b.appendChild(c);c.index=t;c.page_switch=function(){v.removeChild(k);if(w.current!=null){w.current.className="trc_pager_unselected";for(t=s[w.curPage].start_index;t<=(s[w.curPage].end_index);t++){if(t<f.length){v.removeChild(f[t])}}for(t=s[this.index].start_index;t<=s[this.index].end_index;t++){if(t<f.length){if(typeof f[t].img!="undefined"){if(f[t].img_src!=null){f[t].img.load_count=new Date().getTime();f[t].thumb.appendChild(f[t].img);f[t].img.src=f[t].img_src;f[t].img_src=null}}v.appendChild(f[t]);if(f[t].fixTitleFont){f[t].fixTitleFont()}if(f[t].fixDescOverflow){f[t].fixDescOverflow()}}}}v.appendChild(k);w.current=this;this.className="trc_pager_selected";w.curPage=this.index;if(this.index+1>=w.pages.length){m.className="trc_pager_next pager_disabled"}else{m.className="trc_pager_next pager_enabled"}if(this.index<=0){x.className="trc_pager_prev pager_disabled"}else{x.className="trc_pager_prev pager_enabled"}e.innerHTML=(this.index+1)+" of "+w.pages.length};c.onclick=function(){this.page_switch();if(this.index!=0){d.log1("explore",{ri:p,sd:q,ui:l,pi:j,pt:n,li:u.id})}};w.pages.push(c)}w.appendChild(m);w.pages[0].onclick();return w};TRCRBox.prototype.createVideoLink=function(e,b,c,n){var l=document.createElement("a");var g=this.listContainer.id;var k=this.trc;var j=this.reqParams.req;var a=this.reqParams.sd;var d=this.reqParams.uid;var h=this.reqParams["item-type"];var f=this.reqParams["item-id"];var m=this.origin;l.title=n;e.link_target=this.link_target;if(e.type=="video-ad"){l.href="#";l.target="_parent";l.onmouseover=function(){k.log1("discover",{ri:j,sd:a,ui:d,pi:f,pt:h,li:g,ii:e["item-id"],it:e.type})}}else{if(e.type=="text-ad"){l.href=c;l.onmouseover=function(){k.log1("discover",{ri:j,sd:a,ui:d,pi:f,pt:h,li:g,ii:e["item-id"],it:e.type})}}else{l.href=c;if(e.type=="video"&&this.link_target!="blank"){l.target="_parent"}}}l.onclick=function(r){if(e.type=="text-ad"){var q="link";var o=false;var p=document.getElementsByTagName("embed");for(i=0;i<p.length;i++){if(typeof p[i].pauseVideo=="function"){o=true;try{p[i].pauseVideo(q)}catch(r){__trcError("Error in createVideoLink: "+r)}}}if(!o){objects=document.getElementsByTagName("object");for(i=0;i<objects.length;i++){if(typeof objects[i].pauseVideo=="function"){o=true;try{objects[i].pauseVideo(q)}catch(r){__trcError("Error in createVideoLink: "+r)}}}}if(!o){if(typeof trc_pauseVideo!="undefined"&&typeof trc_pauseVideo=="function"){trc_pauseVideo(q)}}window.open(c)}else{if(e.type=="video"&&e.link_target=="blank"){window.open(c)}else{k.logTrcEvent("click",{pi:f,pt:h,li:g,ii:e["item-id"],it:e.type,ri:j,sd:a,ui:d},function(){if(e.type=="video"){if(typeof pageTracker!="undefined"&&typeof pageTracker._trackPageview=="function"){pageTracker._trackPageview(b.split(/^\w+:\/\/[\w.]+/).pop())}if(e.link_target=="local"&&typeof window.trc_videoSelected=="function"){window.trc_videoSelected(e.id,b)}else{if(e.link_target=="brightcove"){if(typeof window.trc_videoSelected=="function"){window.trc_videoSelected(e.id,null)}else{if(modVP!=null){if(typeof modVP.loadVideo=="function"){if(k["brightcove-uses-reference"]==true){modVP.loadVideo((e.id.search(/video/)>=0)?e.id.split("video")[1]:e.id,"referenceId")}else{modVP.loadVideo((e.id.search(/video/)>=0)?e.id.split("video")[1]:e.id)}scroll(0,0)}}}}else{window.parent.location=b}}}else{if(e.type=="video-ad"){var s=false;var t=document.getElementsByTagName("embed");for(i=0;i<t.length;i++){if(typeof t[i].playVideoAd=="function"){s=true;try{t[i].playVideoAd(e.title,e["display-url"],e["landing-url"],e.url,j,a,e["item-id"],g)}catch(u){__trcError("Error in createVideoLink: "+u)}}}if(!s){objects=document.getElementsByTagName("object");for(i=0;i<objects.length;i++){if(typeof objects[i].playVideoAd=="function"){s=true;try{objects[i].playVideoAd(e.title,e["display-url"],e["landing-url"],e.url,j,a,e["item-id"],g)}catch(u){__trcError("Error in createVideoLink: "+u)}}}}}}})}}return false};if(this.is_ie){l.realOnclick=l.onclick;l.onclick=function(){__trc_safeEvent(this.realOnclick);return false}}return l};TRCRBox.prototype.drawVideoBox=function(f,M){var J=document.createElement("div");J.video_data=f;var o=this.listContainer.id;var B="";var w=this.trc;var q=this.reqParams.req;var E=this.reqParams.sd;var k=this.reqParams.uid;var z=this;var g=document.createElement("span");g.style.display="block";g.className="video-label-box";function H(Q,P,e){var O=document.createElement("span");if(Q!=null){O.className=Q}if(P!=null){if(typeof P=="object"){O.appendChild(P)}else{O.innerHTML=P}}e.appendChild(O);return O}function m(P){var O=P.charCodeAt(0);if((1488<=O&&O<=1514)||(1536<=O&&O<=1791)){var e=document.createElement("bde");e.dir="rtl";return e}else{return null}}J.className="videoCube "+w.getProperty(this.mode_name,"orientation")+" "+(f.type=="video"?"origin-":"sponsored-")+f.origin;var u=f.url;if(u.search(/\w{3,4}:\/\/trc.taboolasyndication.com/)==0){var D=u.split(/[\?&]/);for(var I=0;I<D.length;I++){if(D[I].split("=")[0]=="url"){u=unescape(D[I].split("=")[1]);break}}}u=w.getFunction(this.mode_name,"change-url",u,J);var C=this.origin,K=this.reqParams["item-id"];var t=this.reqParams["item-type"];var G=w.getProperty(this.mode_name,"sponsored-link-text");var c=w.getProperty(this.mode_name,"sponsored-video-text");var h="http://trc.taboolasyndication.com/log/"+escape(window.trc_publisher_id)+"/click?pi="+escape(K)+(q?"&ri="+escape(q):"")+(E?"&sd="+escape(E):"")+(k?"&ui="+escape(k):"")+"&it="+f.type+"&ii="+f["item-id"]+"&pt="+t+"&li="+o+"&url="+escape(u)+"&r="+Math.floor(Math.random()*100);if(w.getProperty(this.mode_name,"icons")){if(f.origin!=C){switch(f.origin){case"focused":B="Similar: ";break;case"people":B="People also liked: ";break;default:B=""}}}try{if(f.type=="video-ad"){if(typeof c!="undefined"){B=w.gt.gettext(c+":")}else{B=w.gt.gettext("Sponsored Video:")}}else{if(f.type=="text-ad"){if(typeof G!="undefined"){B=w.gt.gettext(G+":")}else{B=w.gt.gettext("Sponsored Link:")}}}}catch(L){__trcError("Error in TRCobj.gt.gettext: "+L)}B+=f.title;var j=this.createVideoLink(f,u,h,B);var y="";if(!M){if((f.type=="video")&&(typeof f.duration!="undefined")&&(f.duration!="")&&(f.duration!="0")){y=this.genDuration(f.duration)}}var r=this.createVideoLink(f,u,h,B);if((typeof f["thumbnail-clickable"]!="undefined")&&(f["thumbnail-clickable"]=="false")){r.title="";r.style.cursor="default";r.onclick=function(O){return false}}var n=w.getProperty(this.mode_name,"thumbnail-height");var a=w.getProperty(this.mode_name,"thumbnail-width");var v=document.createElement("span");v.className="thumbBlock";var x=document.createElement("img");if(f.type=="video"){if(typeof n!="undefined"){x.style.height=n+"px"}if(typeof a!="undefined"){x.style.width=a+"px"}x.onerror=function(){this.onerror=null;this.src=(typeof w.getProperty(z.mode_name,"default-thumbnail")!="undefined")?w.getProperty(z.mode_name,"default-thumbnail"):""};x.src=f.thumbnail;v.appendChild(x)}else{v.style.overflowX="hidden";v.style.overflowY="hidden";x.style.visibility="hidden";if(typeof n!="undefined"){v.style.height=n+"px";x.style.height=n+"px";x.style.display="inline"}if(typeof a!="undefined"){v.style.width=a+"px"}x.onerror=function(){this.load_count=new Date().getTime();this.onerror=null;this.src="http://cdn.taboolasyndication.com/taboola/logo.png"};x.onload=function(){this.load_count=new Date().getTime()-this.load_count;if(typeof a!="undefined"){if(this.width>a){this.style.width=a+"px"}else{this.style.width=this.width+"px"}x.style.visibility="visible";var Q=(a-parseInt(this.style.width))/2;this.style.paddingRight=Q+"px";this.style.paddingLeft=Q+"px"}v.style.overflowX="visible";v.style.overflowY="visible";var P=this.src.match("://([^/]+)")[1];if(typeof f["tracking-image"]!="undefined"){var e="http://trc.taboolasyndication.com/log/"+escape(trc_publisher_id)+"/tracking?pi="+escape(K)+(q?"&ri="+escape(q):"")+(E?"&sd="+escape(E):"")+(k?"&ui="+escape(k):"")+"&it="+f.type+"&ii="+f["item-id"]+"&pt="+t+"&li="+o+"&url="+escape(f["tracking-image"])+"&id="+Math.floor(Math.random()*100);var O=document.createElement("img");O.style.height="1px";O.style.width="1px";O.style.display="none";O.src=e;j.appendChild(O)}w.log1("display",{ri:q,sd:E,ui:k,pi:K,pt:t,li:o,ii:f["item-id"],it:f.type,d:this.load_count+","+P})};x.load_count=null;J.thumb=v;J.img=x;J.img_src=f.thumbnail}r.appendChild(v);if(y!=""){var b=document.createElement("div");b.className="video-duration";b.appendChild(y);v.appendChild(b)}J.appendChild(r);J.appendChild(j);try{if(f.type=="video-ad"){if(typeof c!="undefined"){H("sponsored",w.gt.gettext(c),j)}else{H("sponsored",w.gt.gettext("Sponsored Video"),j)}}else{if(f.type=="text-ad"){if(typeof G!="undefined"){H("sponsored",w.gt.gettext(G),j)}else{H("sponsored",w.gt.gettext("Sponsored Link"),j)}}}}catch(L){__trcError("Error in TRCobj.gt.gettext: "+L)}j.appendChild(g);var A=w.getProperty(this.mode_name,"detail-order");A=A.split(",");if(f.type=="video"){for(var I=0;I<A.length;I++){switch(A[I]){case"title":var N=m(f.title);if(N!=null){var F=H("video-label video-title",null,g);N.innerHTML=f.title;F.appendChild(N)}else{var s=H("video-label video-title",f.title,g)}break;case"uploader":if(typeof f.uploader!="undefined"){H("video-label video-uploader",this.formatData("uploader",f.uploader,w),g)}break;case"category":if(typeof f.category!="undefined"){H("video-label video-category",this.formatData("category",unescape(f.category.split(";")[0].split("//")[0]),w),g)}break;case"views":H("video-label video-views",this.formatData("views",f.views,w),g);break;case"rating":H("video-label video-rating",this.formatData("rating",f.rating,w),g);break;case"description":var p=m(f.description);if(p!=null){var s=H("video-label video-description",null,g);p.innerHTML=f.description;s.appendChild(p)}else{var s=H("video-label video-description",f.description,g)}s.title='"Description: '+this.removeHtmlTags(f.description)+'"';break;case"duration":if((typeof f.duration!="undefined")&&(f.duration!="")){H("video-label video-duration-detail",this.formatData("duration",f.duration,w),g)}break;case"published-date":if((typeof f["published-date"]!="undefined")&&(f["published-date"]!="")){H("video-label video-published-date",this.formatData("published-date",f["published-date"],w),g)}break}}}else{if(f.type=="text-ad"||f.type=="video-ad"){var N=m(f.title);if(N!=null){var F=H("video-label video-title",null,g);N.innerHTML=f.title;F.appendChild(N)}else{var s=H("video-label video-title",f.title,g)}if(f.description!=""){var p=m(f.description);if(p!=null){var s=H("video-label video-description",null,g);p.innerHTML=f.description;s.appendChild(p)}else{var s=H("video-label video-description",f.description,g)}s.title="Description: "+this.removeHtmlTags(f.description)}var d=u.match(new RegExp("^\\w{3,5}://([^/]+)/?"));if(d){d=d[1]}else{d=u.split("/")[0]}if(typeof f["display-url"]!="undefined"){d=f["display-url"]}H("sponsored-url",d,j)}}J.vurl=f.url;J.onmouseover=function(){this.className+=" videoCube_hover"};J.onmouseout=function(){this.className=this.className.replace(/\b\s+videoCube_hover\b/g,"")};var l=this;J.fixTitleFont=function(){window.setTimeout(function(){try{var P=g.getElementsByTagName("span");var R=null;for(var O=0;O<P.length;O++){if(P[O].className.search("title")>=0){R=P[O]}}J.fixTitleFontDelayed(R)}catch(Q){__trcError("Problem in fixTitleFont: "+Q.message,Q.stack)}},10)};J.fixTitleFontDelayed=function(X){if(X==null){return}if(X.clientHeight<=0){return}var S=false;var Q=X.innerHTML;X.innerHTML='<span style="display:block;">H</span>';var e=X.firstChild.clientHeight;var V=Math.max(0,X.scrollHeight-X.clientHeight);X.innerHTML=Q;function U(aa){var ac=aa.getElementsByTagName("span");if(ac[0]!=null){aa.removeChild(ac[0])}var Z=l.removeTagsEntities(aa.innerHTML);var ab=Z.length-4;aa.innerHTML=l.fixTitle(Z,w,ab);ac=H(null,"...",aa)}while((X.clientHeight+V+(e/2))<X.scrollHeight){S=true;if((typeof f["truncate-title"]=="undefined")||(f["truncate-title"]=="true")){var W=X.getElementsByTagName("bde");if(W.length!=0){U(W[0])}else{U(X)}}else{var R=0;var P=false;var Y=document.getCurrentStyle(X,"font-size");if(parseInt(Y)<=9){break}var O=["px","pt","em","ch"];while((!P)&&(R<O.length)){if(Y.indexOf(O[R])){Y=parseInt(Y);switch(O[R]){case"px":Y=Y-1;break;case"pt":Y=(Y/0.75)-1;break;case"em":case"ch":Y=(Y*10)-1;break}P=true}R++}var T="font-size: "+Y+"px!important; line-height: "+Y*1.25+"px!important;";if(typeof(X.style.cssText)=="string"){X.style.cssText=T}else{X.setAttribute("style",T)}if(Y==document.getCurrentStyle(X,"font-size")){break}}}if(z.is_ie){if(!S){X.style.height="auto"}}};J.fixDescOverflow=function(){window.setTimeout(function(){try{var P=g.getElementsByTagName("span");var O=null;for(var Q=0;Q<P.length;Q++){if(P[Q].className.search("description")>=0){O=P[Q]}}J.fixDescriptionOverflow(O)}catch(R){__trcError("Problem in fixDescOverflow: "+R.message,R.stack)}},10)};J.fixDescriptionOverflow=function(O){if(O==null){return}if(O.clientHeight<=0){return}var S=O.innerHTML;O.innerHTML='<span style="display:block;">H</span>';var R=O.firstChild.clientHeight;var e=Math.max(0,O.scrollHeight-O.clientHeight);O.innerHTML=S;function Q(U){var V=U.getElementsByTagName("span");if(V[0]!=null){U.removeChild(V[0])}var T=l.removeTagsEntities(U.innerHTML);var W=T.lastIndexOf(" ");if(W==-1){W=T.length-4}U.innerHTML=l.fixDescription(T,w,W);V=H(null,"...",U)}while((O.clientHeight+e+(R/2))<O.scrollHeight){var P=O.getElementsByTagName("bde");if(P.length!=0){Q(P[0])}else{Q(O)}}};try{if(f.type=="video"||window.TRC.ads_use_renderer){w.getFunction(this.mode_name,"item-renderer",J,J.video_data)}}catch(L){__trcError("Error in itemRenderer: "+L)}return J};TRCRBox.prototype.genDuration=function(a){var c=this.formatDuration(a);var k=document.createElement("dt");var d=document.createElement("div");k.style.position="absolute";k.style.overflow="hidden";k.style.zIndex=48;k.appendChild(d);for(var e=0,f=0;e<=1000;e+=20,f++){var h=document.createElement("div");h.style.backgroundColor="white";h.style.position="absolute";h.style.top="0px";h.style.width="1px";h.style.height="2em";var b=Math.round(Math.sqrt(e)*3.125);h.style.left=f+"px";h.style.opacity=(b/100);h.style.filter="alpha(opacity="+b+")";d.appendChild(h)}var j=document.createElement("div");j.style.position="absolute";j.style.zIndex=50;j.style.margin="2px 10px";j.innerHTML=c;k.appendChild(j);return k};TRCRBox.prototype.fixTitle=function(c,b,a){if(typeof c!="string"){return c}c=c.replace(/^\s+|\s+$/g,"");return c.substr(0,a-1)};TRCRBox.prototype.removeTagsEntities=function(b){var a=new RegExp("<[^>]*>$");if(!a.test(b)){a=new RegExp("&w+;$");if(!a.test(b)){return b}}return b.replace(a,"")};TRCRBox.prototype.removeHtmlTags=function(a){return a.replace(new RegExp("<[^>]+>","g"),"")};TRCRBox.prototype.fixDescription=function(b,a,c){if(typeof b!="string"){return b}return b.substring(0,c)};TRCRBox.prototype.formatData=function(d,a,c){var b=c.getProperty(this.mode_name,"format-"+d);if(typeof b=="function"){return b.call(this,a)}if((d.search("duration")>=0)||(d.search("Duration")>=0)){a=this.formatDuration(a)}if(typeof a=="undefined"){a=""}return b.replace(new RegExp("%\\w"),'<dt style="display:inline">'+a+"</dt>")};TRCRBox.prototype.formatDuration=function(d){var a=parseInt(d/3600);if(a>=1){d=d%3600}else{a=0}var b=parseInt(d/60);var c=parseInt(d%60);if(typeof a!="number"||typeof b!="number"||typeof c!="number"||isNaN(a)||isNaN(b)||isNaN(c)||d<1){return""}return(a>=1?a:"")+(b<10?"0":"")+b+":"+(c<10?"0":"")+c};TRCRBox.prototype.formatNumber=function(a){return this.trc.getFunction(this.mode_name,"format-number",a)};TRCRBox.prototype.genLoading=function(f,e){var d=document.createElement("div");d.id="__trc_loading";d.className="loading-animation";var c=e.getProperty(this.mode_name,"loading-animation-url");if(c!="null"){var a=document.createElement("img");a.src=c;d.appendChild(a)}var b=document.createElement("span");b.innerHTML=e.gt.gettext("Loading...");d.appendChild(b);f.appendChild(d);return d};TRCRBox.prototype.dateFormatISO=function(c){var e=new Date(parseInt(c)*1000);var b=e.getFullYear();var a=e.getMonth()+1;var d=e.getDate();if(d<10){d="0"+d}if(a<10){a="0"+a}return b+"-"+a+"-"+d};TRCRBox.prototype.dateFormatAmerican=function(c){var e=new Date(parseInt(c)*1000);var b=e.getFullYear();var a=e.getMonth()+1;var d=e.getDate();return a+"/"+d+"/"+b};TRCRBox.prototype.dateFormatEuropean=function(c){var e=new Date(parseInt(c)*1000);var b=e.getFullYear();var a=e.getMonth()+1;var d=e.getDate();return d+"/"+a+"/"+b};TRCRBox.prototype.dateFormatDays=function(h){var b=new Date();var d=" months ago";var c=b.getFullYear();var l=b.getMonth();var a=new Date();if(typeof h!="undefined"||parseInt(h)!=0){a=new Date(parseInt(h)*1000)}var f=a.getFullYear();var g=a.getMonth();var k=(c*12+l)-(f*12+g);if(k==0){var e=b.getDate();var j=a.getDate();k=e-j;if(k<=1){d=" day ago"}else{d=" days ago"}}else{if(k==1){d=" month ago"}}return k+d};TRCRBox.prototype.ratingStars=function(e,d){if(d>5){d=Math.floor(d/2)}if(typeof e=="undefined"){return""}var a=document.createElement("span");for(i=0;i<d;i++){var c=document.createElement("img");c.style.width="16px";c.style.height="16px";c.style.display="inline";var b="http://cdn.taboolasyndication.com/taboola/star-on.png";var f="http://cdn.taboolasyndication.com/taboola/star-off.png";if(i<parseInt(e)){c.src=b}else{c.src=f}a.appendChild(c)}return a};