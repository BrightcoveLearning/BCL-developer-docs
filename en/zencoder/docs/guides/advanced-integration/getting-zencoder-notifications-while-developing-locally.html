

<!DOCTYPE html>
<html lang="en">
  <head>
      <!-- Begin Drupal Taxonomy Data -->
      <meta name="products" content="Zencoder">
      <meta name="role" content="API Developer">
      <meta name="task" content="">
      <meta name="topic" content="">
      <meta name="API" content="Zencoder">
      <!-- End Drupal Taxonomy Data -->
    <title>
            Advanced Integration: Using Fetcher to get Notifications on localhost --       Zencoder
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
    


    

    

    
    

    
    

    
  </head>
  <body id="docs_show" class="application docs">
    <div id="wrap">
      
      <div id="body_padding">
        
          
        <div id="main" class="clearfix">
              

  <div id="docs_content">
    <div id="main_content">
      
      <div id="search-results">
  <p>
    <a href="../../../docs.html">Home</a> &raquo; <a href="../../guides.html">Guides</a> &raquo; <a href="../advanced-integration.html">Advanced Integration</a> &raquo; Using Fetcher to get Notifications on localhost
  </p>

  <h2>
      <span class="api-section-permalink">
        <a href="getting-zencoder-notifications-while-developing-locally.html">permalink</a>
      </span>
    Using Fetcher to get Notifications on localhost
  </h2>

    <p>Zencoder posts a notification to your application when a file is finished encoding. When developing locally Zencoder may be unable to notify your application because your server is not accessible over the internet. To solve this, we recommend using the <a href="http://rubygems.org/gems/zencoder-fetcher">Zencoder Fetcher</a>.</p>
<p>Fetcher acts as an intermediary between your local application and Zencoder. It can be run once or set to loop at a given interval, gathering any notifications on Zencoder for your account and then posting them to your application.</p>
<h2>Installing Fetcher</h2>
<p>First, install Ruby and RubyGems.</p>
<p>Then, install Zencoder Fetcher.</p>
<div class="docs-code">
  <pre class="brush: ruby;">
    gem install zencoder-fetcher
  </pre>
</div>
<h2>Running Fetcher</h2>
<p>Grab your <a href="http://app.zencoder.com/api/">API key</a> so you can access your jobs.</p>
<div class="docs-code">
  <pre class="brush: ruby;">
    zencoder_fetcher YOUR_API_KEY
  </pre>
</div>
<p>This is the most basic request you can make, which will retrieve the 50 most recent notifications generated by Zencoder, then post them to http://localhost:3000.</p>

<h2>Test URLs</h2>
<p>If you don't have a server to post notifications to, you can use <code>http://zencoderfetcher/</code> for your <a href="https://app.zencoder.com/docs/api/encoding/notifications/notification-url">notification URL</a>.</p>
<p>This will create a successful notification for Fetcher to grab and post to your application.</p>

<h2>Other Parameters</h2>
<p>
  Optional parameters include:
  <ul>
  	<li><code>--url (-u)</code> specifies the URL to post the notifications</li>
  	<li><code>--loop (-l)</code> indicates that the notifier should be run in a loop.</li>
  	<li><code>--interval (-i)</code> specifies the number of seconds to wait between checks for new notifications if looping. The default is 60.</li>
  	<li><code>--count (-c)</code> specifies the number of notifications to retrieve. The default is 50.</li>
  	<li><code>--page (-p)</code> specifies the page to load. The default is 1.</li>
  </ul>
</p>
<p>The notification sent is JSON, containing the follow information:</p>
<div class="docs-code">
  <pre class="brush: javascript;">{
  "outputs": [
    {
      "height": 120,
      "audio_sample_rate": 8000,
      "frame_rate": 8,
      "channels": "1",
      "duration_in_ms": 1920,
      "video_bitrate_in_kbps": 70,
      "video_codec": "h264",
      "format": "mpeg4",
      "audio_codec": "aac",
      "label": null,
      "file_size_in_bytes": 17938,
      "width": 160,
      "audio_bitrate_in_kbps": 9,
      "id": 235314,
      "total_bitrate_in_kbps": 79,
      "state": "finished",
      "url": "ftp://example.com/file.mp4",
      "md5_checksum": "7f106918e02a69466afa0ee014172496",
      "thumbnails": [
        {
          "label": "poster",
          "images": [{
            "url": "ftp://example.com/images/123.png",
            "format": "PNG",
            "file_size_bytes": 1273573,
            "dimensions": "1280x720"
          }]
        }
      ]
    },
    {
      "height": 120,
      "audio_sample_rate": 8000,
      "frame_rate": 8,
      "channels": "1",
      "duration_in_ms": 1920,
      "video_bitrate_in_kbps": 70,
      "video_codec": "h264",
      "format": "mpeg4",
      "audio_codec": "aac",
      "label": null,
      "file_size_in_bytes": 17938,
      "width": 160,
      "audio_bitrate_in_kbps": 9,
      "id": 235314,
      "total_bitrate_in_kbps": 79,
      "state": "finished",
      "url": "ftp://example.com/file.mp4",
      "md5_checksum": "7f106918e02a69466afa0ee014172496",
      "thumbnails": [
        {
          "label": "poster",
          "images": [{
            "url": "ftp://example.com/images/123.png",
            "format": "PNG",
            "file_size_bytes": 1273573,
            "dimensions": "1280x720"
          }]
        }
      ]
    }
  ],
  "job": {
    "created_at": "2011-09-27T04:20:10Z",
    "pass_through": null,
    "updated_at": "2011-09-27T04:21:18Z",
    "submitted_at": "2011-09-27T04:20:10Z",
    "id": 172151,
    "state": "finished"
  },
  "input": {
    "height": 120,
    "audio_sample_rate": 8000,
    "frame_rate": 8,
    "channels": "1",
    "duration_in_ms": 1552,
    "video_bitrate_in_kbps": 32,
    "video_codec": "mpeg4",
    "format": "mpeg4",
    "audio_codec": "aac",
    "file_size_in_bytes": 13960,
    "width": 160,
    "audio_bitrate_in_kbps": 9,
    "id": 172149,
    "state": "finished",
    "total_bitrate_in_kbps": 41,
    "md5_checksum": "7f106918e02a69466afa0ee014174143"
  }
}</pre>
</div>
<h2>Be Aware</h2>
<p>Notifications via the fetcher are not filtered to notifications that haven't been sent before. If you have created 1 new job since your last request, and request 10, you'll get the last 10 jobs. Be sure to handle this in your application. You can also use this to your advantage when developing as you will not have to create a new job every time changes are made to your code.</p>

</div>

    </div>
  </div>

        </div>
      </div>
    </div>
    

    
    
      
  


  </body>
  <!-- Version: 3.325.1 -->
</html>

