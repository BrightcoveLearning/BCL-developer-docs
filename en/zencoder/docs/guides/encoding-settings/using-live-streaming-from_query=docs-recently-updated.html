

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
    <title>
            Encoding Recommendations: Live Transcoding Guide and Recommendations --       Zencoder
    </title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"b32b942736","applicationID":"4441395","transactionName":"cgtWQ0EOWFwAFBlTCVIXF0RbDkM=","queueTime":0,"applicationTime":340,"agent":""}</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1026.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="lhEDwIesd3Zwt52BtwiCloNm+2m1bpjYrIVVGhKSodM=" name="csrf-token" />
    <script type="text/javascript">
      var _sf_startpt          = (new Date()).getTime();
      var _km_api_key          = '9e336b149965e7863a3f63ef82f0a9652e947238';
      var _mapbox_access_token = 'pk.eyJ1IjoiemVuY29kZXIiLCJhIjoiZlNCeDJIYyJ9.4aMQV_HE7Gf8lB4xC8qWNQ';
      var _zc_environment      = 'production';
      var _zc_controller       = 'docs_controller';
      var _zc_changelog        = false;
    </script>

    <!--[if lt IE 9]>
      <script src="https://a.zencdn.net/assets/selectivizr-d7619a79537ff588d4d36e42778b61c0.js" type="text/javascript"></script>
    <![endif]-->

    <link href="../../../../a.zencdn.net/assets/common-8cb491527f6f845f407f3afa63412867.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../../../../a.zencdn.net/assets/facebox-215b2aa3f5153bf1e5a65c3c813b2083.css" media="all" rel="stylesheet" type="text/css" />
    

    <!--[if IE]>
      <link href="https://a.zencdn.net/assets/ie-f71d51ef2dd07407e995cea78e2974f7.css" media="all" rel="stylesheet" type="text/css" />
    <![endif]-->
    <link href="../../../../a.zencdn.net/assets/print-cda8f121f6d18ef5eaccaa4944098308.css" media="print" rel="stylesheet" type="text/css" />      <link href="../../../../a.zencdn.net/assets/docs-6b24ef369bf9f9ffa4be33e0a98bc931.css" media="all" rel="stylesheet" type="text/css" />

    <link href="../../../../a.zencdn.net/assets/favicon-30d4e55c4200749dc5493d61be3c9079.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />

    
  </head>
  <body id="docs_show" class="application docs">
    <div id="wrap">
      <div id="parallax_1" class="parallax screen"><div id="parallax_2" class="parallax"><div id="parallax_3" class="parallax"></div></div></div>
      <div id="body_padding">
        <img alt="" class="print" height="65" src="../../../../a.zencdn.net/assets/logo-print-c8eb6ccdba8286b7c36e567b2527f3bc.png" width="300" />
        <div id="header" class="screen">
            <a href="http://zencoder.com" id="logo" class="screen">
            <img alt="" height="54" src="../../../../a.zencdn.net/assets/logo-4578a00ccade4cf0594054ff8625db54.png" width="250" />
          </a>
          <ul id="nav">
              <li>
      <a href="../../../signup.html"><span class="nav-title">Sign Up</span><span class="nav-desc">Create your account.</span></a>
    </li>
              <li>
      <a href="../../../login.html"><span class="nav-title">Log In</span><span class="nav-desc">See your stuff.</span></a>
    </li>
              <li class="selected">
      <a href="../../../docs.html"><span class="nav-title">Docs/Support</span><span class="nav-desc">Guides & reference.</span></a>
    </li>
          </ul>
        </div>
          
        <div id="main" class="clearfix">
              <ul id="docs_nav">
  <li id="docs-nav-search" class="category-group-name">
    <form accept-charset="UTF-8" action="../../search.html" id="doc_search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>      <input class="query" id="q" name="q" placeholder="Search" type="search" />
      <img alt="Spinner" id="doc_search_activity" src="../../../../a.zencdn.net/assets/spinner-a5ea8f7ee3514bae1534f6c05f4d361c.gif" style="display:none;" />
</form>  </li>
  <li class="category-group-name"><a href="../../../docs.html">Home</a></li>
  <li class="category-group-name">
    <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;%68%65%6c%70@%7a%65%6e%63%6f%64%65%72.%63%6f%6d?body=%5BHelpful%20things%20to%20include%3A%20links%20to%20source%20files%2C%20job%20IDs%2C%20screenshots...%5D">Support Email &raquo;</a>
  </li>
    <li class="category-group-name"><a href="../../guides.html">Guides</a></li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../getting-started.html">Getting Started</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../advanced-integration.html">Advanced Integration</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../encoding-settings.html"><span class="selected">Encoding Recommendations</span></a>
          </li>
        </ul>
      </li>
    <li class="category-group-name"><a href="../../api.html">API Reference</a></li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../api/jobs.html">Jobs</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../api/inputs.html">Inputs</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../api/outputs.html">Outputs</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../api/accounts.html">Accounts</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../api/reports.html">Reports</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../api/encoding.html">Encoding Settings</a>
          </li>
        </ul>
      </li>
    <li class="category-group-name"><a href="../../faq.html">FAQ</a></li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../faq/basics.html">Basics</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../faq/codecs-and-formats.html">Codecs And Formats</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../faq/about-encoding.html">Encoding</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../faq/transfer.html">File Transfers</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../faq/problems.html">Problems</a>
          </li>
        </ul>
      </li>
      <li class="category-group-list">
        <ul>
          <li class="category-name">
              <a href="../../faq/pricing.html">Pricing</a>
          </li>
        </ul>
      </li>
    <li class="category-group-name"><a href="../../errors.html">Error Codes</a></li>
</ul>

  <div id="docs_content">
    <div id="main_content">
      
      <div id="search-results">
  <p>
    <a href="../../../docs.html">Home</a> &raquo; <a href="../../guides.html">Guides</a> &raquo; <a href="../encoding-settings.html">Encoding Recommendations</a> &raquo; Live Transcoding Guide and Recommendations
  </p>

  <h2>
      <span class="api-section-permalink">
        <a href="using-live-streaming.html">permalink</a>
      </span>
    Live Transcoding Guide and Recommendations
  </h2>

    <a name="introduction"></a>
<p>
  Live Streaming takes a single high quality RTMP stream and converts it to multiple bitrate RTMP and HLS streams for viewing by users on a variety of devices and bandwidths. Files can also be created when the stream is completed, giving you a non-segmented video for playback on other devices.
</p>

<ul>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#supported-encoders">Supported Encoders</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#supported-cdns">Supported CDNs and Streaming Servers</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#formats">Supported Formats</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#considerations">Geographic Considerations</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#limitations">Limitations</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#notes">Notes</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#examples">The Parts of an API Request</a></li>
  <li><a href="using-live-streaming-from_query=docs-recently-updated.html#full-request">Full Request Example</a></li>
</ul>

<a name="supported-encoders"></a>
<h3>Supported Encoders</h3>
<p>
  Zencoder accepts RTMP input and has been tested with several streaming clients for creating your source video stream.
</p>

<ul>
  <li><a href="http://www.xsplit.com/">XSplit</a></li>
  <li><a href="http://obsproject.com/">OBS</a></li>
  <li><a href="http://www.telestream.net/wirecast/overview.htm">Wirecast</a></li>
  <li><a href="http://www.adobe.com/products/flash-media-encoder.html">Flash Media Live Encoder (FMLE)</a></li>
</ul>

<p>
  Other encoders may work but have not been tested yet. We will expand this list as we are able to test more.
</p>

<a name="supported-cdns"></a>
<h3>Supported CDNs and Streaming Servers</h3>
<p>
  Zencoder can stream generated live outputs to multiple streaming media servers via RTMP and HLS.
</p>

<ul>
  <li>Akamai</li>
  <li>Edgecast</li>
  <li>Limelight</li>
  <li>Flash Media Server</li>
  <li>Wowza</li>
  <li>YouTube</li>
  <li>Amazon CloudFront (HLS)</li>
  <li>Fastly</li>
</ul>

<p>
  Other CDNs and servers may work but have not been tested yet. We will expand this list as we are able to test more.
</p>

<a name="formats"></a>
<h3>Supported Formats</h3>
<a name="input"></a>
<h4>Input</h4>
<p>
  For best results, use H.264 and AAC codecs in your RTMP stream. We also support VP6 and MP3, but quality may not be as high when using these codecs. Sending Zencoder the highest quality stream that your upstream connection supports will improve the quality of the streams generated.
</p>

<a name="output"></a>
<h4>Output</h4>
<p>
  Live output videos can be published to an RTMP server or uploaded as HLS segments. Regular, non-live files can also be generated when the input stream has ended.
</p>

<a name="considerations"></a>
<h3>Geographic Considerations</h3>
<p>
  The farther data needs to go, the greater the latency and delay in playback. To reduce latency make sure to use servers in the <a href="https://app.zencoder.com/docs/api/encoding/job/region">region</a> closest to the streaming source.
</p>
<p>
  When streaming to Akamai via RTMP the endpoint should be close to the Zencoder transcoding server. <a href="http://app.zencoder.com/contact">Contact support</a> for assistance setting this up.
</p>

<a name="limitations"></a>
<h3>Limitations and Known Issues</h3>
<ul>
  <li>Max input resolution of 1080p</li>
  <li>Max input bitrate of 10mbps</li>
  <li>Input must be 30 fps or less</li>
  <li>Audio-only outputs are supported, but cannot be he-aac or 48khz aac</li>
  <li>Stream duration is limited to 26 hours</li>
  <li>Streaming must begin within 30 minutes of job creation</li>
  <li>HTTP POST uploads (for HLS) have only been tested with Akamai</li>
  <li>DRM is currently not supported</li>
  <li>Microsoft Smooth Streaming is currently not supported for live streaming</li>
</ul>

<a name="examples"></a>
<h3>The Parts of an API Request</h3>
<h4>Job Creation and Response</h4>
<p>
  To create a Live Streaming job set <code>live_stream</code> to true and specify at least one output with <code>URL</code> to a compatible host.
</p>

<div class="docs-code">
  <pre class="brush: js;">{
  "live_stream": true,
  "outputs": [
    {
        "label": "rtmp_300",
        "size": "480x270",
        "video_bitrate": 300,
        "url": "rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_300@63239"
    }
  ]
}
  </pre>
  <pre class="brush: xml;"><api-request>
  <live_stream>true</live_stream>
  <outputs type="array">
    <output>
      <label>rtmp_300</label>
      <video_bitrate>300</video_bitrate>
      <size>480x270</size>
      <url>rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_300@63239</url>
    </output>
  </outputs
</api-request>
</pre>
</div>

<p>
  When a Live Streaming job is created, the response to the API request will contain a URL and stream name. Publish your RTMP stream to this URL and Zencoder will begin transcoding to the requested output streams, as explained in the rest of this guide.
</p>

<div class="docs-code">
  <pre class="brush: js;">{
  "stream_url":"rtmp://live0.us-va.zencoder.io:1935/live",
  "stream_name":"8f4dc774cfd3ed79f27f65c0c43ee5cf",
  "id":123456,
  "outputs":[...]
}</pre>
  <pre class="brush: xml;"><api-response>
  <job>
    <id>123456</id>
    <stream_url>rtmp://live0.us-va.zencoder.io:1935/live</stream_url>
    <stream_name>8f4dc774cfd3ed79f27f65c0c43ee5cf</stream_name>
    <outputs type="array">
      <output>
        ...
      </output>
    </outputs>
  </job>
</api-response>
</pre>
</div>

<h3>Output</h3>
<a name="rtmp-output"></a>
<h4>RTMP Outputs</h4>
<p>
  For RTMP outputs, simply specifying an RTMP output URL is enough to publish the stream to your server. This will create an output with the default <a href="https://app.zencoder.com/docs/api/encoding/rate-control/quality">quality</a> of 3, which determines the bitrate to use to create a good quality video based on the input. Since the bitrate generated with quality can vary, it is recommended to specify a <a href="https://app.zencoder.com/docs/api/encoding/rate-control/video-bitrate">video bitrate</a> to target bitrates for the devices and users who will be watching the stream.
</p>

<div class="docs-code">
  <pre class="brush: js;">{
  "live_stream": true,
  "outputs": [
    {
        "video_bitrate": 1200,
        "url": "rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/live_01_300@63239"
    }
  ]
}</pre>
  <pre class="brush: xml;"><api-request>
  <live_stream>true</live_stream>
  <outputs type='array'>
    <output>
      <video_bitrate>1200</video_bitrate>
      <url>rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/live_01_300@63239</url>
    </output>
  </outputs>
</api-request></pre>
</div>

<p>The format of the ouput file in the URL must match the format in the example above: <code>live_01_300</code>, where <code>live</code> is the event name, <code>01</code> is the angle, and <code>300</code> is the bitrate. Each is separated by an underscore. Bitrate is not required.</p>

<p>
  By default the stream will use the H.264 and AAC codecs for <a href="https://app.zencoder.com/docs/api/encoding/format-and-codecs/video-codec">video</a> and <a href="https://app.zencoder.com/docs/api/encoding/format-and-codecs/audio-codec">audio</a>. MP3 can also be used for audio.
</p>

<p>
  For RTMP servers requiring authentication, the username and password can be provided via the URL, like <code>rtmp://username:password@outputserver:1935/app/streamname/live_01_300@63239</code>. This can be used to publish to Wowza or FMS servers, as well as many CDNs, such as Akamai.
</p>

<p>
  We will simultaneously publish to a <a href="https://app.zencoder.com/docs/api/encoding/general-output-settings/secondary-url">secondary_url</a> if specified. When a primary and backup url are provided by the CDN (such as Akamai), <code>secondary_url</code> should always be set to the backup. This will provide redundancy in case there are issues with the primary stream.
</p>

<a name="hls-output"></a>
<h4>HLS Outputs</h4>
<p>
  HLS outputs are created similarly to regular <a href="http-live-streaming.html">HTTP Live Streaming</a> outputs, with the addition of the <a href="https://app.zencoder.com/docs/api/encoding/job/live-stream">live_stream</a> flag. As with RTMP outputs, specifying a <a href="https://app.zencoder.com/docs/api/encoding/rate-control/video-bitrate">video bitrate</a> to target bitrates for the devices and users who will be watching the stream is recommended.
</p>

<div class="docs-code">
  <pre class="brush: js;">{
  "audio_bitrate": 56,
  "audio_sample_rate": 22050,
  "url": "http://post.example.akamaihd.net/PATH/TO/eventname_01_640.m3u8",
  "decoder_bitrate_cap": 900,
  "decoder_buffer_size": 2400,
  "max_frame_rate": 30,
  "public": 1,
  "type": "segmented",
  "video_bitrate": 600,
  "width": 400,
  "format": "ts",
  "live_stream": true
}</pre>
  <pre class="brush: xml;"><output>
  <audio_bitrate>56</audio_bitrate>
  <audio_sample_rate>22050</audio_sample_rate>
  <url>http://post.example.akamaihd.net/PATH/TO/eventname_01_640.m3u8</url>
  <decoder_bitrate_cap>900</decoder_bitrate_cap>
  <decoder_buffer_size>2400</decoder_buffer_size>
  <max_frame_rate>30</max_frame_rate>
  <public>1</public>
  <type>segmented</type>
  <video_bitrate>600</video_bitrate>
  <width>400</width>
  <format>ts</format>
  <live_stream>true</live_stream>
</output></pre>
</div>

<p>Live HLS outputs can be uploaded to any compatible server supported by Zencoder, including S3 and FTP. They can also be transferred to Akamai for HLS Live Delivery via HTTP POST, using an output URL like <code>http://example.akamaihd.net/12355/1234567890/eventname_ios_300.m3u8</code>.</p>

<a name="file-outputs"></a>
<h4>File Outputs</h4>
<p>
  Output videos in any other <a href="https://app.zencoder.com/docs/api/encoding/format-and-codecs/format">format</a> or using any other <a href="https://app.zencoder.com/docs/api/encoding/format-and-codecs/video-codec">codecs</a> will be transcoded and uploaded after the input stream has completed.
</p>

<div class="docs-code">
  <pre class="brush: js;">{
  "label":"archive",
  "url":"s3://example-bucket/eventname_archive.mp4"
}</pre>
  <pre class="brush: xml;"><output>
  <label>archive</label>
  <url>s3://example-bucket/eventname_archive.mp4</url>
</output></pre>
</div>

<p>
  <strong>NOTE:</strong> Setting <a href="https://app.zencoder.com/docs/api/encoding/job/live-stream">live_stream</a> with unsupported formats (non-HLS) will cause those outputs to fail.
</p>

<a name="full-request"></a>
<h3>Full Request</h3>
<p>A full request can create RTMP and HLS outputs, plus an HLS playlist to tell players the available streams for different bandwidths.</p>

<div class="docs-code">
  <pre class="brush: js;">{
    "live_stream": true,
    "outputs": [
        {
            "label": "rtmp_300",
            "size": "480x270",
            "video_bitrate": 300,
            "url": "rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_300@63239"
        },
        {
            "label": "rtmp_600",
            "size": "640x360",
            "video_bitrate": 600,
            "url": "rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_600@63239"
        },
        {
            "label": "rtmp_1200",
            "size": "1280x720",
            "video_bitrate": 1200,
            "url": "rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_1200@63239"
        },
        {
            "label": "hls_300",
            "size": "480x270",
            "video_bitrate": 300,
            "url": "http://post.bcoveliveios-i.akamaihd.net/IOSSTREAM/PUBLISHERID/eventname_01_300.m3u8",
            "type": "segmented",
            "live_stream": true
        },
        {
            "label": "hls_600",
            "size": "640x360",
            "video_bitrate": 600,
            "url": "http://post.example.akamaihd.net/PATH/TO/eventname_ios_600.m3u8",
            "type": "segmented",
            "live_stream": true
        },
        {
            "label": "hls_1200",
            "size": "1280x720",
            "video_bitrate": 120,
            "url": "http://post.example.akamaihd.net/PATH/TO/eventname_01_1200.m3u8",
            "type": "segmented",
            "live_stream": true
        },
        {
            "url": "http://post.example.akamaihd.net/PATH/TO/master.m3u8",
            "type": "playlist",
            "streams": [
                {
                    "bandwidth": 300,
                    "path": "eventname_01_300.m3u8"
                },
                {
                    "bandwidth": 600,
                    "path": "eventname_01_600.m3u8"
                },
                {
                    "bandwidth": 1200,
                    "path": "eventname_01_1200.m3u8"
                }
            ]
        },
        {
          "label":"archive",
          "url":"s3://example-bucket/eventname_archive.mp4"
        }
    ]
}</pre>
  <pre class="brush: xml;"><api-request>
  <live_stream>true</live_stream>
  <outputs type="array">
    <output>
      <label>rtmp_300</label>
      <video_bitrate>300</video_bitrate>
      <size>480x270</size>
      <url>rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_300@63239</url>
    </output>
    <output>
      <label>rtmp_600</label>
      <video_bitrate>600</video_bitrate>
      <size>640x360</size>
      <url>rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_600@63239</url>
    </output>
    <output>
      <label>rtmp_1200</label>
      <video_bitrate>1200</video_bitrate>
      <size>1280x720</size>
      <url>rtmp://user:pass@server.akamaientrypoint.net/EntryPoint/eventname_01_1200@63239</url>
    </output>
    <output>
      <label>hls_300</label>
      <live_stream>true</live_stream>
      <video_bitrate>300</video_bitrate>
      <size>480x270</size>
      <type>segmented</type>
      <url>http://post.example.akamaihd.net/PATH/TO/eventname_01_300.m3u8</url>
    </output>
    <output>
      <label>hls_600</label>
      <live_stream>true</live_stream>
      <video_bitrate>600</video_bitrate>
      <size>640x360</size>
      <type>segmented</type>
      <url>http://post.example.akamaihd.net/PATH/TO/eventname_01_600.m3u8</url>
    </output>
    <output>
      <label>hls_1200</label>
      <live_stream>true</live_stream>
      <video_bitrate>120</video_bitrate>
      <size>1280x720</size>
      <type>segmented</type>
      <url>http://post.example.akamaihd.net/PATH/TO/eventname_01_1200.m3u8</url>
    </output>
    <output>
      <streams type="array">
        <stream>
          <bandwidth>300</bandwidth>
          <path>eventname_01_300.m3u8</path>
        </stream>
        <stream>
          <bandwidth>600</bandwidth>
          <path>eventname_01_600.m3u8</path>
        </stream>
        <stream>
          <bandwidth>1200</bandwidth>
          <path>eventname_01_1200.m3u8</path>
        </stream>
      </streams>
      <type>playlist</type>
      <url>http://post.example.akamaihd.net/PATH/TO/master.m3u8</url>
    </output>
    <output>
      <label>archive</label>
      <url>s3://example-bucket/eventname_archive.mp4</url>
    </output>
  </outputs>
</api-request></pre>
</div>

<a name="notes"></a>
<h3>Notes</h3>

<h4>S3 Permissions</h4>
<p>When creating HLS outputs on Amazon S3, you must set permissions in your API request to deal with the way AWS makes the file accessible. Not doing this can lead to delays in permissions being applied, and cause issues during playback. Add the settings below to any HLS outputs to ensure that permissions are set correctly.</p>

<p>
  <strong>NOTE:</strong> Due to S3's eventual consistency approach to redundancy, files uploaded there are not always immediately available. This could cause issues with live HLS playback on S3.
</p>

<div class="docs-code">
  <pre class="brush: js;">"headers": {
  "x-amz-acl": "public-read"
},
"access_control": [
  {
    "permission": "FULL_CONTROL",
    "grantee": "aws@zencoder.com"
  },
  {
    "permission": "READ",
    "grantee": "http://acs.amazonaws.com/groups/global/AllUsers"
  }
]</pre>
  <pre class="brush: xml;"><headers>
    <x-amz-acl>public-read</x-amz-acl>
  </headers>
  <access_control type="array">
    <access_control>
      <permission>FULL_CONTROL</permission>
      <grantee>aws@zencoder.com</grantee>
    </access_control>
    <access_control>
      <permission>READ</permission>
      <grantee>http://acs.amazonaws.com/groups/global/AllUsers</grantee>
    </access_control>
  </access_control></pre>
</div>

<h4>Akamai & HLS Playlists</h4>
<p>For the master playlist Akamai expects the filename will be index.m3u8, master.m3u8, or playlist.m3u8. If it is not you may get 404 responses when trying to access the playlist. This can be overridden in your Akamai configuration. See <a href="https://control.akamai.com/portal/kb/kbSearchDetails.jsf?articleId=6027">Akamai's documentation</a> for more information.</p>

<h4>Waiting Jobs Limit</h4>
<p>We have a defult limit of 5 waiting streams per account. If you reach this limit, you will need to cancel or start streaming to one of the waiting streams in order to create a new live job. If you need this limit increased, please contact <a href="https://support.brightcove.com/en/contact/create">support</a>.</p>

</div>

    </div>
    <div id="docs_search_results">
    </div>
  </div>

        </div>
      </div>
    </div>
    <div id="footer" class="screen">
      <div id="feedback">
        <div id="feedback_content" class="content">
          <!--<strong>I wish this page would...</strong>
          <input id="feedback_input" name="wish" type="text" value="" />
          <input height="23" name="mood" src="https://a.zencdn.net/assets/feedback-happy-84889f3f6afe3f2d48d11fbee6ea1a63.png" type="image" value="happy" width="22" />
          <input height="23" name="mood" src="https://a.zencdn.net/assets/feedback-meh-21ab4292195e219904858f43c47e3315.png" type="image" value="meh" width="22" />
          <input height="23" name="mood" src="https://a.zencdn.net/assets/feedback-sad-afac56b816085f0477aca92e378c0888.png" type="image" value="sad" width="22" /> -->
        </div>
      </div>
      <div id="footer_content" class="content clearfix">
        <div class="footer-column">
          <h4>Help!</h4>
          <ul>
            <li>For details on how to use Zencoder, check out our <a href="../../../docs.html">Documentation and Guides</a>.</li>
            <li>If you have a specific question, please open a <a href="https://support.brightcove.com/en/contact/create">support ticket</a>.</li>
            <li>For information about any ongoing issues, visit our <a href="http://status.zencoder.com">Status Page</a>.</li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>The Latest</h4>
          <table>
            <tr>
              <th>March 31, 2017</th>
              <td><a href="https://www.brightcove.com/en/blog/2017/03/live-streaming-format-future">Live Streaming Format of the Future</a></td>
            </tr>
            <tr>
              <th>March 30, 2017</th>
              <td><a href="https://www.brightcove.com/en/blog/2017/03/video-marketing-mentors-integrating-video-your-tech-stack">Video Marketing Mentors: Integrating Video With Your Tech Stack</a></td>
            </tr>
            <tr>
              <th>March 27, 2017</th>
              <td><a href="https://www.brightcove.com/en/blog/2017/03/generate-short-links-your-players-video-cloud-studio">Generate Short Links to your Players in the Video Cloud Studio</a></td>
            </tr>
            <tr>
              <th>March 22, 2017</th>
              <td><a href="https://www.brightcove.com/en/blog/2017/03/video-analytics-now-available-media-module">Video Analytics Now Available in the Media Module</a></td>
            </tr>
          </table>
        </div>
        <div id="footer_docs" class="footer-column">
          <h4>Documentation</h4>
          <ul>
            <li><a href="../../faq.html">FAQ</a></li>
            <li><a href="../getting-started.html">Getting Started</a></li>
            <li><a href="../../faq/about-encoding.html">Encoding</a></li>
            <li><a href="../../api.html">API Integration</a></li>
            <li><a href="../../../login.html">Recent Changes</a></li>
          </ul>
        </div>
        <p id="legal">
          &copy; 2008&mdash;2017 Zencoder, Inc. All rights reserved. <a href="https://www.brightcove.com/privacy">Privacy Policy</a> | <a href="http://zencoder.com/terms">Terms of Use</a> | <a href="../../../login.html">Attribution</a>
        </p>
      </div>
    </div>

    <script src="../../../../a.zencdn.net/assets/common-f0a408a5dce1206885a8d0352891cf57.js" type="text/javascript"></script>
    
      <script src="../../../../a.zencdn.net/assets/docs-885652dd599dc12b5c70c9d7b810b371.js" type="text/javascript"></script>
  <script type='text/javascript'>
    var search_url = '/docs/ajax_search';
  </script>


  </body>
  <!-- Version: 3.325.1 -->
</html>

