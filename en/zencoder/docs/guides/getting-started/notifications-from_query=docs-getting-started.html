

<!DOCTYPE html>
<html lang="en">
  <head>
      <!-- Begin Drupal Taxonomy Data -->
      <meta name="products" content="Zencoder">
      <meta name="role" content="API Developer">
      <meta name="task" content="">
      <meta name="topic" content="">
      <meta name="API" content="Zencoder">
      <!-- End Drupal Taxonomy Data -->
    <title>
            Getting Started: Getting Notifications When Videos Are Finished --       Zencoder
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
    


    

    

    
    

    
    

    
  </head>
  <body>
    <div id="wrap">
      
      <div id="body_padding">
        
          
        <div id="main" class="clearfix">
              

  <div id="docs_content">
    <div id="main_content">
      
      <div id="search-results">
  <p>
    <a href="../../../docs.html">Home</a> &raquo; <a href="../../guides.html">Guides</a> &raquo; <a href="../getting-started.html">Getting Started</a> &raquo; Getting Notifications When Videos Are Finished
  </p>

  <h2>
      <span class="api-section-permalink">
        <a href="notifications.html">permalink</a>
      </span>
    Getting Notifications When Videos Are Finished
  </h2>

    <p>After a job or an output file is complete, you can find out about it in several ways.</p>
<ul>
  <li>We can POST an HTTP request to your application with the details.
    <ul>
      <li><a href="notifications-from_query=docs-getting-started.html#api_version_2">API Version 2 Notification Content</a></li>
      <li><a href="notifications-from_query=docs-getting-started.html#api_version_1">API Version 1 Notification Content</a></li>
    </ul>
  </li>
  <li>You can <a href="../advanced-integration/getting-zencoder-notifications-while-developing-locally.html">request your notifications using the Zencoder Fetcher gem</a>. This is useful when you are developing locally and Zencoder can't reach your development server.</li>
  <li>We can send an email.</li>
  <li>You can check the Zencoder Dashboard for job status.</li>
</ul>

<p><strong>API V1 Note:</strong> Job-level notifications are not supported.</p>
<p><strong>API V1 Note:</strong> Content-Type is not set unless notification is specified.</p>

<p>To receive HTTP or email notifications, add <a href="https://app.zencoder.com/docs/api/encoding/notifications/notifications">Notification options</a> to your API request, like this:</p>

<div class="docs-code">
  <pre class="brush: js; light: true;">
    {
      "api_key": "93h630j1dsyshjef620qlkavnmzui3",
      "input": "s3://bucket-name/file-name.avi",
      "notifications": [
        "http://user:password@example.com/zencoder",
        "admin@example.com"
      ],
      "outputs": [
        {
          "label": "web",
          "url": "s3://output-bucket/web.mp4",
          "size": "512x384",
          "notifications": [
            "http://user:password@example.com/zencoder",
            "admin@example.com"
          ]
        },
        {
          "label": "iphone",
          "url": "s3://output-bucket/iphone.m4v",
          "size": "480x320",
          "notifications": [
            {"format": "xml", "url": "http://user:password@example.com/zencoder1"},
            {"format": "json", "url": "http://user:password@example.com/zencoder2"},
            "http://example.com/zencoder3",
            "admin@example.com"
          ]
        }
      ]
    }
  </pre>
  <pre class="brush: xml; light: true;">
    <api-request>
      <api_key>93h630j1dsyshjef620qlkavnmzui3</api_key>
      <input>s3://bucket-name/file-name.avi&lt;/input>
      <notifications type="array">
        <notification>http://user:password@example.com/zencoder</notification>
        <notification>admin@example.com</notification>
      </notifications>
      <outputs type="array">
        <output>
          <label>web</label>
          <url>s3://output-bucket/web.mp4</url>
          <size>512x384</size>
          <notifications type="array">
            <notification>http://user:password@example.com/zencoder</notification>
            <notification>admin@example.com</notification>
          </notifications>
        </output>
        <output>
          <label>iphone</label>
          <url>s3://output-bucket/iphone.m4v</url>
          <size>480x320</size>
          <notifications type="array">
            <notification>
              <format>xml</format>
              <url>http://example.com/zencoder1</url>
            </notification>
            <notification>
              <format>xml</format>
              <url>http://example.com/zencoder2</url>
            </notification>
            <notification>http://example.com/zencoder3</notification>
            <notification>admin@example.com</notification>
          </notifications>
        </output>
      </outputs>
    </api-request>
  </pre>
</div>

<p>In this example, when the first output file is completed, two notifications would be sent:
  <ul>
    <li>Email to <tt>admin@example.com</tt> with information about the output and the input/job.</li>
    <li>HTTP POST to <tt>http://user:password@example.com/zencoder</tt> with a Content-Type header set to 'application/json' with information about the output and the input/job.</li>
  </ul>
</p>

<p>When the second output file is complete, four more notifications would be sent:
  <ul>
    <li>HTTP POST to <tt>http://example.com/zencoder1</tt> with a Content-Type header set to 'application/xml' with information about the output and the input.</li>
    <li>HTTP POST to <tt>http://example.com/zencoder2</tt> with a Content-Type header set to 'application/json' with information about the output and the input/job.</li>
    <li>Email to <tt>admin@example.com</tt> with information about the output and the input/job.</li>
    <li>HTTP POST to <tt>http://example.com/zencoder3</tt> with a Content-Type header set to 'application/json' with information about the output and the input/job.</li>
  </ul>
</p>

<p>When the job is completed, two more notifications would be sent:
  <ul>
    <li>Email to <tt>admin@example.com</tt> with information about the output and the input.</li>
    <li>HTTP POST to <tt>http://user:password@example.com/zencoder</tt> with a Content-Type header set to 'application/json' with information about the output and the input.</li>
  </ul>
</p>

<p><strong>Note:</strong> If Zencoder is unable to succesfully connect to the target server when sending a notification, the notification will be queued to try again. The notification will be attempted up to 25 times, with the delay between attempts doubling each time.</p>

<h2 id="api_version_2">HTTP Notifications - API Version 2</h2>

<p>Beginning in API version 2 notifications contain rich content with much more information about the job and input and output files. The body of the notification can contain JSON or XML. If uploads fail, notifications will also contain information about <a href="file-backups.html">errors and backup servers used</a>.</p>

<h3>Job Notification Example</h3>
<div class="docs-code">
  <pre class="brush: js;">
  {
  "outputs":[
    {
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails": [
        {
          "label":"poster",
          "images":
          [
            {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
            }
          ]
        }
      ]
    },
    {
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails": [
        {
          "label":"poster",
          "images":
          [
            {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
            }
          ]
        }
      ]
    }
  ],
  "job":{
      "created_at":"2011-09-27T04:20:10Z",
      "pass_through":null,
      "updated_at":"2011-09-27T04:21:18Z",
      "submitted_at":"2011-09-27T04:20:10Z",
      "id":172151,
      "state":"finished"
    },
  "input":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1552,
      "video_bitrate_in_kbps":32,
      "video_codec":"mpeg4",
      "format":"mpeg4",
      "audio_codec":"aac",
      "file_size_in_bytes":13960,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":172149,
      "state":"finished",
      "total_bitrate_in_kbps":41,
      "md5_checksum":"7f106918e02a69466afa0ee014174143"
    }
  }
  </pre>
  <pre class="brush: xml;">
    <?xml version="1.0" encoding="UTF-8"?>
    <hash>
      <outputs type="array">
        <output>
          <height type="integer">16</height>
          <audio-sample-rate type="integer">48000</audio-sample-rate>
          <frame-rate type="float">29.97</frame-rate>
          <channels>2</channels>
          <duration-in-ms type="integer">5055</duration-in-ms>
          <audio-bitrate-in-kbps type="integer">87</audio-bitrate-in-kbps>
          <video-codec>h264</video-codec>
          <format>mpeg4</format>
          <file-size-in-bytes type="integer">62625</file-size-in-bytes>
          <audio-codec>aac</audio-codec>
          <total-bitrate-in-kbps type="integer">93</total-bitrate-in-kbps>
          <label nil="true"></label>
          <width type="integer">30</width>
          <id type="integer">235316</id>
          <video-bitrate-in-kbps type="integer">6</video-bitrate-in-kbps>
          <state>finished</state>
          <url>ftp://example.com/file.mp4</url>
          <md5_checksum>7f106918e02a69466afa0ee014172496</md5_checksum>
          <thumbnails type="array">
            <thumbnail>
              <urls type="array">
                <url>
                  <url>ftp://example.com/images/123.png</url>
                  <format>PNG</format>
                  <file-size-bytes type="integer">1273573</file-size-bytes>
                  <dimensions>1280x720</dimensions>
                </url>
              </urls>
              <label>1280</label>
            </thumbnail>
          </thumbnails>
        </output>
        <output>
          <height type="integer">16</height>
          <audio-sample-rate type="integer">48000</audio-sample-rate>
          <frame-rate type="float">29.97</frame-rate>
          <channels>2</channels>
          <duration-in-ms type="integer">5055</duration-in-ms>
          <audio-bitrate-in-kbps type="integer">87</audio-bitrate-in-kbps>
          <video-codec>h264</video-codec>
          <format>mpeg4</format>
          <file-size-in-bytes type="integer">62625</file-size-in-bytes>
          <audio-codec>aac</audio-codec>
          <total-bitrate-in-kbps type="integer">93</total-bitrate-in-kbps>
          <label nil="true"></label>
          <width type="integer">30</width>
          <id type="integer">235316</id>
          <video-bitrate-in-kbps type="integer">6</video-bitrate-in-kbps>
          <state>finished</state>
          <url>ftp://example.com/file.mp4</url>
          <md5_checksum>7f106918e02a69466afa0ee014172496</md5_checksum>
          <thumbnails type="array">
            <thumbnail>
              <urls type="array">
                <url>
                  <url>ftp://example.com/images/123.png</url>
                  <format>PNG</format>
                  <file-size-bytes type="integer">1273573</file-size-bytes>
                  <dimensions>1280x720</dimensions>
                </url>
              </urls>
              <label>1280</label>
            </thumbnail>
          </thumbnails>
        </output>
      </outputs>
      <job>
        <test type="boolean">false</test>
        <created-at type="datetime">2011-09-27T19:14:24Z</created-at>
        <pass-through nil="true"></pass-through>
        <updated-at type="datetime">2011-09-27T19:15:01Z</updated-at>
        <submitted-at type="datetime">2011-09-27T19:14:24Z</submitted-at>
        <id type="integer">172153</id>
        <state>finished</state>
      </job>
      <input>
        <height type="integer">16</height>
        <audio-sample-rate type="integer">48000</audio-sample-rate>
        <frame-rate type="float">29.97</frame-rate>
        <channels>2</channels>
        <duration-in-ms type="integer">5038</duration-in-ms>
        <audio-bitrate-in-kbps type="integer">148</audio-bitrate-in-kbps>
        <video-codec>h264</video-codec>
        <format>mpeg4</format>
        <file-size-in-bytes type="integer">100149</file-size-in-bytes>
        <audio-codec>aac</audio-codec>
        <total-bitrate-in-kbps type="integer">155</total-bitrate-in-kbps>
        <width type="integer">30</width>
        <id type="integer">172151</id>
        <state>finished</state>
        <video-bitrate-in-kbps type="integer">7</video-bitrate-in-kbps>
        <md5_checksum>7f106918e02a69466afa0ee014174143</md5_checksum>
      &lt;/input>
    </hash>
  </pre>
</div>

<h3>Output Notification Example</h3>
<div class="docs-code">
  <pre class="brush: js;">
  {
  "output":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails":
        [
          {
            "label":"poster",
            "images":
            [
              {
                "url": "ftp://example.com/images/123.png",
                "format": "PNG",
                "file_size_bytes": 1273573,
                "dimensions": "1280x720"
              }
            ]
          }
        ]
    },
  "job":{
      "created_at":"2011-09-27T04:20:10Z",
      "pass_through":null,
      "updated_at":"2011-09-27T04:21:18Z",
      "submitted_at":"2011-09-27T04:20:10Z",
      "id":172151,
      "state":"finished"
    },
  "input":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1552,
      "video_bitrate_in_kbps":32,
      "video_codec":"mpeg4",
      "format":"mpeg4",
      "audio_codec":"aac",
      "file_size_in_bytes":13960,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":172149,
      "state":"finished",
      "total_bitrate_in_kbps":41,
      "md5_checksum":"7f106918e02a69466afa0ee014174143"
    }
  }
  </pre>
  <pre class="brush: xml;">
    <?xml version="1.0" encoding="UTF-8"?>
    <hash>
      <output>
        <height type="integer">16</height>
        <audio-sample-rate type="integer">48000</audio-sample-rate>
        <frame-rate type="float">29.97</frame-rate>
        <channels>2</channels>
        <duration-in-ms type="integer">5055</duration-in-ms>
        <audio-bitrate-in-kbps type="integer">87</audio-bitrate-in-kbps>
        <video-codec>h264</video-codec>
        <format>mpeg4</format>
        <file-size-in-bytes type="integer">62625</file-size-in-bytes>
        <audio-codec>aac</audio-codec>
        <total-bitrate-in-kbps type="integer">93</total-bitrate-in-kbps>
        <label nil="true"></label>
        <width type="integer">30</width>
        <id type="integer">235316</id>
        <video-bitrate-in-kbps type="integer">6</video-bitrate-in-kbps>
        <state>finished</state>
        <url>ftp://example.com/file.mp4</url>
        <md5_checksum>7f106918e02a69466afa0ee014172496</md5_checksum>
        <thumbnails type="array">
          <thumbnail>
            <urls type="array">
              <url>
                <url>ftp://example.com/images/123.png</url>
                <format>PNG</format>
                <file-size-bytes type="integer">1273573</file-size-bytes>
                <dimensions>1280x720</dimensions>
              </url>
            </urls>
            <label>1280</label>
          </thumbnail>
        </thumbnails>
      </output>
      <job>
        <test type="boolean">false</test>
        <created-at type="datetime">2011-09-27T19:14:24Z</created-at>
        <pass-through nil="true"></pass-through>
        <updated-at type="datetime">2011-09-27T19:15:01Z</updated-at>
        <submitted-at type="datetime">2011-09-27T19:14:24Z</submitted-at>
        <id type="integer">172153</id>
        <state>finished</state>
      </job>
      <input>
        <height type="integer">16</height>
        <audio-sample-rate type="integer">48000</audio-sample-rate>
        <frame-rate type="float">29.97</frame-rate>
        <channels>2</channels>
        <duration-in-ms type="integer">5038</duration-in-ms>
        <audio-bitrate-in-kbps type="integer">148</audio-bitrate-in-kbps>
        <video-codec>h264</video-codec>
        <format>mpeg4</format>
        <file-size-in-bytes type="integer">100149</file-size-in-bytes>
        <audio-codec>aac</audio-codec>
        <total-bitrate-in-kbps type="integer">155</total-bitrate-in-kbps>
        <width type="integer">30</width>
        <id type="integer">172151</id>
        <state>finished</state>
        <video-bitrate-in-kbps type="integer">7</video-bitrate-in-kbps>
        <md5_checksum>7f106918e02a69466afa0ee014174143</md5_checksum>
      &lt;/input>
    </hash>
  </pre>
</div>


<h2 id="api_version_1">HTTP Notifications - API Version 1</h2>

<p>The notification API request is sent from Zencoder to your server as a POST to the notification URL, and is either JSON or XML containing two or three values. The first is a Job ID. This ID matches the ID you received when you submitted the initial job request. Second is the state &#8211; either &#8216;processing', &#8216;finished', &#8216;failed', or &#8216;cancelled'. If the output was assigned a label the notification will also contain the output label you supplied when the job was initially created.</p>
<p><strong>Finished Job</strong></p>
<div class="docs-code">
  <pre class="brush: js; light: true;">
    &nbsp;
    {"job":
      {"state":"finished","id":1234},
      "output":{
        "label":"web",
        "url":"http://example.com/file.mp4",
        "state":"finished",
        "id":12345
      }
    }
  </pre>
  <pre class="brush: xml; light: true;">
    <hash>
      <job>
        <state>finished</state>
        <id type="integer">1234</id>
      </job>
      <output>
        <state>finished</state>
        <label>web</label>
        <id type="integer">12345</id>
        <url>http://example.com/file.mp4</url>
      </output>
    </hash>
  </pre>
</div>
<p><strong>Failed Job</strong></p>
<div class="docs-code">
  <pre class="brush: js; light: true;">
    {"job":
      {"state":"failed","id":1234},
      "output":{
        "label":"web",
        "url":"http://example.com/file.mp4",
        "state":"failed",
        "id":12345
      }
    }
  </pre>
  <pre class="brush: xml; light: true;">
    <hash>
      <job>
        <state>failed</state>
        <id type="integer">1234</id>
      </job>
      <output>
        <state>failed</state>
        <label>web</label>
        <id type="integer">12345</id>
        <url>http://example.com/file.mp4</url>
      </output>
    </hash>
  </pre>
</div>

</div>

    </div>
  </div>

        </div>
      </div>
    </div>
    

    
    
      
  


      <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v2.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
    <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
    <script>
        $(document).foundation();
    </script>
    <div style="text-align:center">
        <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
    </div>
    <div class="bcls-footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
        var feedbackMail = document.getElementById("feedbackMail");
        feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
</body>

  <!-- Version: 3.325.1 -->
</html>

